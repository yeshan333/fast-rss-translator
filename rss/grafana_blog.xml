<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Grafana Labs blog on Grafana Labs</title>
    <link>/blog/index.xml</link>
    <description>Recent content in Grafana Labs blog on Grafana Labs</description>
    <item>
      <title>【Take the 3rd annual Observability Survey, brought to you by Grafana Labs】参加 Grafana Labs 为您带来的第三届年度可观测性调查</title>
      <link>https://grafana.com/blog/2024/09/18/take-the-3rd-annual-observability-survey-brought-to-you-by-grafana-labs/</link>
      <description>【&lt;p&gt;In the observability space, change is constant. New tools and techniques are constantly emerging, and teams continue to evolve as they adopt and mature their strategies. With so much in flux, we need your help to make sense of it all with our third annual &lt;a href=&#34;/observability-survey/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Observability Survey&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;We run this survey every year to help the community get a better understanding of the state of observability. It highlights where the community is succeeding and struggling, and it gives your team a chance to see how it stacks up against your peers.&lt;/p&gt;&#xA;&lt;div class=&#34;btn-row &#34;&gt;&lt;a class=&#34;btn btn--primary &#34; href=&#34;https://grafana.com/observability-survey/?pg=blog&amp;amp;plcmt=body-txt&#34; rel=&#34;noopener noreferrer&#34;&gt;Take the survey&lt;/a&gt;&lt;/div&gt;&#xA;&lt;p&gt;We understand that your time is precious, so the survey should take no more than five minutes to complete. You’ll be asked questions like: How many tools and data sources are you using (Grafana and beyond)? What are your most important criteria for selecting an observability tool? What role would you like to see AI play in observability? And how are you using Prometheus and OpenTelemetry?&lt;/p&gt;&#xA;&lt;p&gt;We also respect your privacy, so all responses will be kept anonymous — no need to hand over corporate email or the name of your first born.&lt;/p&gt;&#xA;&lt;p&gt;Early next year, a summary of the results will be published, as well as some analysis to help provide context on what those numbers mean. &lt;a href=&#34;/observability-survey-2024/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Our 2024 survey&lt;/a&gt; provided all sorts of interesting insights, including stats on the number and types of observability tools organizations are using; the challenges and benefits that come with observability; and the role of OSS in observability.&lt;/p&gt;&#xA;&lt;p&gt;We can’t wait to hear what you have to say, so &lt;a href=&#34;/observability-survey/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;fill out the survey today&lt;/a&gt; and share it with anyone else in your network who might be interested! And if you&amp;rsquo;re at an event where we have a presence in the coming months, including &lt;a href=&#34;/events/observabilitycon/&#34;&gt;ObservabilityCON&lt;/a&gt; next week, stop by to take it in person. We might have some fun swag to share.&lt;/p&gt;】&lt;p&gt;在可观察性空间中，变化是恒定的。新的工具和技术不断涌现，团队随着策略的采用和成熟而不断发展。由于变化如此之大，我们需要您的帮助来通过我们的第三次年度&lt;a href=&#34;/observability-survey/?pg=blog&amp;plcmt=body-txt&#34;&gt;可观测性调查&lt;/a&gt;来理解这一切。&lt;/p &gt;&#xA;&lt;p&gt;我们每年都会进行这项调查，以帮助社区更好地了解可观测性的状态。它突出显示了社区在哪些方面取得了成功，哪些方面遇到了困难，并且让您的团队有机会了解其与同行相比如何。&lt;/p&gt;&#xA;&lt;div class=&#34;btn-row &#34;&gt;&lt;a class=&#34;btn btn--primary&#34; href=&#34;https://grafana.com/observability-survey/?pg=blog&amp;plcmt=body-txt&#34; rel=&#34;noopener noreferrer &#34;&gt;参加调查&lt;/a&gt;&lt;/div&gt;&#xA;&lt;p&gt;我们知道您的时间很宝贵，因此完成调查的时间不应超过五分钟。您会被问到以下问题：您使用了多少工具和数据源（Grafana 及其他）？您选择可观察性工具的最重要标准是什么？您希望人工智能在可观测性方面发挥什么作用？您如何使用 Prometheus 和 OpenTelemetry？&lt;/p&gt;&#xA;&lt;p&gt;我们也尊重您的隐私，因此所有回复都将保持匿名 - 无需交出公司电子邮件或您长子的姓名。&lt;/p&gt;&#xA;&lt;p&gt;明年初，我们将发布结果摘要以及一些分析，以帮助提供有关这些数字含义的背景信息。 &lt;a href=&#34;/observability-survey-2024/?pg=blog&amp;plcmt=body-txt&#34;&gt;我们的 2024 年调查&lt;/a&gt;提供了各种有趣的见解，包括组织正在使用的可观察性工具的数量和类型的统计数据；可观察性带来的挑战和好处；以及 OSS 在可观测性中的作用。&lt;/p&gt;&#xA;&lt;p&gt;我们迫不及待地想听听您的意见，所以&lt;a href=&#34;/observability-survey/?pg=blog&amp;plcmt=body-txt&#34;&gt;立即填写调查问卷&lt;/a&gt;并与以下人分享您网络中可能感兴趣的其他人！如果您参加了我们在未来几个月举办的活动，包括下周的 &lt;a href=&#34;/events/observabilitycon/&#34;&gt;ObservabilityCON&lt;/a&gt;，请亲自过来参加。我们可能有一些有趣的礼物可以分享。&lt;/p&gt;</description>
      <pubDate>Wed, 18 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【The Catchpoint Enterprise data source for Grafana: key features and how to get started】Grafana 的 Catchpoint Enterprise 数据源：主要功能以及如何开始</title>
      <link>https://grafana.com/blog/2024/09/11/the-catchpoint-enterprise-data-source-for-grafana-key-features-and-how-to-get-started/</link>
      <description>【&lt;p&gt;Earlier this year, we were thrilled to announce that Catchpoint is now available as an Enterprise data source for Grafana!&lt;/p&gt;&#xA;&lt;p&gt;With the public preview release of the &lt;a href=&#34;/solutions/catchpoint/visualize/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Catchpoint Enterprise data source&lt;/a&gt;, you can seamlessly bring Catchpoint’s extensive Digital Experience Monitoring (DEM) and Internet Performance Monitoring (IPM) capabilities into your Grafana dashboards, enhancing your ability to visualize and analyze performance metrics in real-time.&lt;/p&gt;&#xA;&lt;p&gt;Read on to learn more about visualizing Catchpoint data in Grafana, key features of the data source, and how to get started with installation. You can also check out a demo of the data source in the video below.&lt;/p&gt;&#xA;&lt;div&#xA;class=&#34;youtube-lazyload responsive-video&#34;&#xA;data-embed=&#34;MPVbzJSqqnw&#34;&#xA;data-url=&#34;https://www.youtube.com/embed/MPVbzJSqqnw?autoplay=1&amp;amp;rel=0&#34;&#xA;data-title=&#34;YouTube Video&#34;&#xA;&gt;&#xA;&lt;div class=&#34;play-button&#34;&gt;&lt;/div&gt;&#xA;&lt;/div&gt;&#xA;&lt;h2 id=&#34;what-is-catchpoint&#34;&gt;What is Catchpoint?&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://www.catchpoint.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Catchpoint&lt;/a&gt; is a leading IPM platform that provides comprehensive insights into your infrastructure, applications, and user experiences. With Catchpoint, you can monitor your entire digital ecosystem, identify performance bottlenecks, and ensure optimal performance and availability.&lt;/p&gt;&#xA;&lt;h2 id=&#34;why-integrate-catchpoint-with-grafana&#34;&gt;Why integrate Catchpoint with Grafana?&lt;/h2&gt;&#xA;&lt;p&gt;Integrating Catchpoint with Grafana brings a new dimension to your monitoring and visualization toolkit. Here are some key benefits:&lt;/p&gt;&#xA;&lt;h3 id=&#34;unified-monitoring&#34;&gt;Unified monitoring&lt;/h3&gt;&#xA;&lt;p&gt;With the Catchpoint Enterprise data source for Grafana, you can centralize your performance data in one place. Combine Catchpoint’s detailed metrics with other data sources in Grafana to get a holistic view of your digital experience.&lt;/p&gt;&#xA;&lt;h3 id=&#34;enhanced-visualization&#34;&gt;Enhanced visualization&lt;/h3&gt;&#xA;&lt;p&gt;Leverage Grafana’s powerful visualization capabilities to create dynamic and interactive dashboards. Visualize Catchpoint data using a variety of panels, customize your views, and gain deeper insights into your performance metrics.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 3014px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/catchpoint-data-source/catchpoint-meta-2.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/catchpoint-data-source/catchpoint-meta-2.png&#34;data-srcset=&#34;/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=320 320w, /media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=550 550w, /media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=750 750w, /media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=900 900w, /media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=1040 1040w, /media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=1240 1240w, /media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;A screenshot of a Grafana dashboard for Catchpoint data.&#34;&#xA;width=&#34;3014&#34;&#xA;height=&#34;1232&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/catchpoint-data-source/catchpoint-meta-2.png&#34;&#xA;alt=&#34;A screenshot of a Grafana dashboard for Catchpoint data.&#34;&#xA;width=&#34;3014&#34;&#xA;height=&#34;1232&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;h3 id=&#34;real-time-analysis&#34;&gt;Real-time analysis&lt;/h3&gt;&#xA;&lt;p&gt;The Catchpoint data source allows you to monitor the performance and availability of your internet stack, including web applications and their underlying resources, in real time, enabling you to quickly identify and address potential problems before they impact your users.&lt;/p&gt;&#xA;&lt;h2 id=&#34;key-features&#34;&gt;Key features&lt;/h2&gt;&#xA;&lt;p&gt;The Catchpoint Enterprise data source plugin for Grafana offers a range of features to enhance your monitoring experience, including:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Custom queries&lt;/strong&gt;: Create custom queries, using the &lt;code&gt;SLO&lt;/code&gt;, &lt;code&gt;RUM&lt;/code&gt;, and &lt;code&gt;Test&lt;/code&gt; query types, to fetch the exact service-level objective, real user monitoring, and performance testing data you need from Catchpoint.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Comprehensive metrics&lt;/strong&gt;: Access a wide array of performance metrics, including availability, response time, and more.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Alerting&lt;/strong&gt;: Set up alerts in Grafana based on Catchpoint data to stay informed about critical issues.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;getting-started&#34;&gt;Getting started&lt;/h2&gt;&#xA;&lt;p&gt;The Catchpoint data source is available in &lt;a href=&#34;/products/enterprise/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Enterprise&lt;/a&gt; and &lt;a href=&#34;/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;, including in our generous &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;free-forever tier&lt;/a&gt;. To get started, follow our &lt;a href=&#34;/docs/plugins/grafana-catchpoint-datasource/latest/&#34;&gt;technical documentation&lt;/a&gt;, which offers detailed instructions on how to install the plugin, configure your data source, and create your first dashboards.&lt;/p&gt;&#xA;&lt;h2 id=&#34;join-the-community&#34;&gt;Join the community&lt;/h2&gt;&#xA;&lt;p&gt;We are excited to see how you use the Catchpoint data source to enhance your monitoring capabilities. Join the conversation on our &lt;a href=&#34;https://community.grafana.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;community forums&lt;/a&gt; and share your experiences, insights, and feedback. We look forward to hearing from you — and stay tuned for more updates and enhancements in the future!&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;The easiest way to get started with our Enterprise data source plugins is in &lt;a href=&#34;/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;. We have a generous forever-free tier that includes access to Enterprise data sources for 3 active users. If you haven’t already, &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;sign up for free today!&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;】&lt;p&gt;今年早些时候，我们很高兴地宣布 Catchpoint 现已可作为 Grafana 的企业数据源！&lt;/p&gt;&#xA;&lt;p&gt;借助 &lt;a href=&#34;/solutions/catchpoint/visualize/?pg=blog&amp;plcmt=body-txt&#34;&gt;Catchpoint Enterprise 数据源&lt;/a&gt;的公共预览版，您可以无缝地引入 Catchpoint 广泛的数字体验监控(DEM) 和互联网性能监控 (IPM) 功能集成到您的 Grafana 仪表板中，增强您实时可视化和分析性能指标的能力。&lt;/p&gt;&#xA;&lt;p&gt;继续阅读，了解有关在 Grafana 中可视化 Catchpoint 数据、数据源的主要功能以及如何开始安装的更多信息。您还可以在下面的视频中查看数据源的演示。&lt;/p&gt;&#xA;&lt;div&#xA;类 =“youtube-lazyload 响应视频”&#xA;数据嵌入=“MPVbzJSqqnw”&#xA;data-url=&#34;https://www.youtube.com/embed/MPVbzJSqqnw?autoplay=1&amp;rel=0&#34;&#xA;数据标题=“YouTube 视频”&#xA;&gt;&#xA;&lt;div class=&#34;play-button&#34;&gt;&lt;/div&gt;&#xA;&lt;/div&gt;&#xA;&lt;h2 id=&#34;what-is-catchpoint&#34;&gt;什么是 Catchpoint？&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://www.catchpoint.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Catchpoint&lt;/a&gt; 是领先的 IPM 平台，可提供对您的基础设施、应用程序的全面洞察和用户体验。借助 Catchpoint，您可以监控整个数字生态系统、识别性能瓶颈并确保最佳性能和可用性。&lt;/p&gt;&#xA;&lt;h2 id=&#34;why-integrate-catchpoint-with-grafana&#34;&gt;为什么将 Catchpoint 与 Grafana 集成？&lt;/h2&gt;&#xA;&lt;p&gt;将 Catchpoint 与 Grafana 集成为您的监控和可视化工具包带来了新的维度。以下是一些主要优点：&lt;/p&gt;&#xA;&lt;h3 id=&#34;unified-monitoring&#34;&gt;统一监控&lt;/h3&gt;&#xA;&lt;p&gt;借助 Grafana 的 Catchpoint Enterprise 数据源，您可以将性能数据集中在一处。将 Catchpoint 的详细指标与 Grafana 中的其他数据源相结合，全面了解您的数字体验。&lt;/p&gt;&#xA;&lt;h3 id=&#34;enhanced-visualization&#34;&gt;增强可视化&lt;/h3&gt;&#xA;&lt;p&gt;利用 Grafana 强大的可视化功能创建动态和交互式仪表板。使用各种面板可视化 Catchpoint 数据、自定义视图并更深入地了解性能指标。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：3014px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/catchpoint-data-source/catchpoint-meta-2.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src=&#34;/media/blog/catchpoint-data-source/catchpoint-meta-2.png&#34;data-srcset=&#34;/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w= 320 320w、/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=550 550w、/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=750 750w 、/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=900 900w、/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=1040 1040w、/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=1240 1240w、/media/blog/catchpoint-data-source/catchpoint-meta-2.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Catchpoint 数据的 Grafana 仪表板的屏幕截图。&#34;&#xA;宽度=“3014”&#xA;高度=“1232”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/catchpoint-data-source/catchpoint-meta-2.png”&#xA;alt=&#34;Catchpoint 数据的 Grafana 仪表板的屏幕截图。&#34;&#xA;宽度=“3014”&#xA;高度=“1232”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;h3 id=&#34;real-time-analysis&#34;&gt;实时分析&lt;/h3&gt;&#xA;&lt;p&gt;借助 Catchpoint 数据源，您可以实时监控互联网堆栈的性能和可用性，包括 Web 应用程序及其底层资源，从而使您能够在潜在问题影响用户之前快速识别和解决它们。&lt;/p &gt;&#xA;&lt;h2 id=&#34;key-features&#34;&gt;主要功能&lt;/h2&gt;&#xA;&lt;p&gt;Grafana 的 Catchpoint Enterprise 数据源插件提供了一系列功能来增强您的监控体验，包括：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;自定义查询&lt;/strong&gt;：使用 &lt;code&gt;SLO&lt;/code&gt;、&lt;code&gt;RUM&lt;/code&gt; 和 &lt;code&gt;Test&lt;/code&gt; 查询类型创建自定义查询，以从 Catchpoint 获取所需的准确服务级别目标、真实用户监控和性能测试数据。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;综合指标&lt;/strong&gt;：访问各种绩效指标，包括可用性、响应时间等。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;警报&lt;/strong&gt;：根据 Catchpoint 数据在 Grafana 中设置警报，以随时了解关键问题。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;getting-started&#34;&gt;开始使用&lt;/h2&gt;&#xA;&lt;p&gt;Catchpoint 数据源可在 &lt;a href=&#34;/products/enterprise/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana Enterprise&lt;/a&gt; 和 &lt;a href=&#34;/products/cloud/?pg= blog&amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;，包括在我们慷慨的&lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;plcmt=body-txt&#34;&gt;永久免费套餐&lt;/a&gt;一个&gt;。首先，请遵循我们的&lt;a href=&#34;/docs/plugins/grafana-catchpoint-datasource/latest/&#34;&gt;技术文档&lt;/a&gt;，其中提供了有关如何安装插件、配置数据源和创建您的第一个仪表板。&lt;/p&gt;&#xA;&lt;h2 id=&#34;join-the-community&#34;&gt;加入社区&lt;/h2&gt;&#xA;&lt;p&gt;我们很高兴看到您如何使用 Catchpoint 数据源来增强您的监控能力。加入我们的&lt;a href=&#34;https://community.grafana.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;社区论坛&lt;/a&gt;上的对话，分享您的经验、见解和反馈。我们期待您的来信 - 并敬请关注未来的更多更新和增强功能！&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;开始使用我们的企业数据源插件的最简单方法是在 &lt;a href=&#34;/products/cloud/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt; 中。我们拥有慷慨的永久免费套餐，其中包括 3 个活跃用户对企业数据源的访问权限。如果您还没有注册，请&lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;plcmt=body-txt&#34;&gt;立即免费注册！&lt;/a&gt;&lt;/em&gt;&lt;/p &gt;</description>
      <pubDate>Wed, 11 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【Better root cause analysis: Mastering alert insights with the new central history timeline】更好的根本原因分析：通过新的中央历史时间线掌握警报见解</title>
      <link>https://grafana.com/blog/2024/09/09/better-root-cause-analysis-mastering-alert-insights-with-the-new-central-history-timeline/</link>
      <description>【&lt;p&gt;A year ago &lt;a href=&#34;/blog/2023/07/10/how-we-improved-grafanas-alert-state-history-to-provide-better-insights-into-your-alerting-data/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;we rebuilt our alert rule state history&lt;/a&gt;, using Grafana Loki for storage and updating the UI to display a timeline of all state changes of an alert rule. As a result, users can now conduct better root cause analysis by going down to the level of an alert rule and seeing when certain alert instances started or stopped firing.&lt;/p&gt;&#xA;&lt;p&gt;But we aren&amp;rsquo;t stopping there.&lt;/p&gt;&#xA;&lt;p&gt;To ensure system stability and avert outages, you also need one place to see the state history for all the alerts in your system. That&amp;rsquo;s why we&amp;rsquo;re thrilled to announce the new history feature in &lt;a href=&#34;/docs/grafana/latest/alerting/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Alerting&lt;/a&gt;. Available in &lt;a href=&#34;/docs/grafana-cloud/whats-new/centralized-alert-history-page/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana 11.2&lt;/a&gt;, this new &amp;ldquo;History&amp;rdquo; page offers a holistic view by showing all state transitions for every Grafana-managed alert rule.&lt;/p&gt;&#xA;&lt;div&#xA;class=&#34;youtube-lazyload responsive-video&#34;&#xA;data-embed=&#34;0fNtby8ieEw&#34;&#xA;data-url=&#34;https://www.youtube.com/embed/0fNtby8ieEw?autoplay=1&amp;amp;rel=0&#34;&#xA;data-title=&#34;YouTube Video&#34;&#xA;&gt;&#xA;&lt;div class=&#34;play-button&#34;&gt;&lt;/div&gt;&#xA;&lt;/div&gt;&#xA;&lt;p&gt;Did several alert rules fire around the same time? Now you can easily tell which one was first, or what happened just before that. Having a clear and comprehensive view of alert state transitions over time enables you to identify patterns, diagnose issues more quickly, and improve your overall incident response strategy.&lt;/p&gt;&#xA;&lt;p&gt;Whether you&amp;rsquo;re a DevOps engineer, a system administrator, or a member of an SRE team, this feature is designed to provide the insights you need to keep your systems running smoothly.&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-does-the-history-feature-work&#34;&gt;How does the history feature work?&lt;/h2&gt;&#xA;&lt;p&gt;Access the page by clicking on the &amp;ldquo;History&amp;rdquo; item in the Alerting section of the Grafana main menu. The page has three parts — a filters section, an events chart, and an events table.&lt;/p&gt;&#xA;&lt;p&gt;Use the filters at the top of the page to narrow down the displayed history events based on labels or state. You can also click on a label or a state in the table to quickly add it to the filter.&lt;/p&gt;&#xA;&lt;p&gt;To define the time period you are interested in, either use the selector above the events chart or just drag an area on the chart itself to zoom into it.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 791px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/alert-history/history.gif&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/alert-history/history.gif&#34;alt=&#34;Filtering by time range in the UI&#34;&#xA;width=&#34;791&#34;&#xA;height=&#34;623&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/alert-history/history.gif&#34;&#xA;alt=&#34;Filtering by time range in the UI&#34;&#xA;width=&#34;791&#34;&#xA;height=&#34;623&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;The events chart displays how many historical events (an instance that changed its state from one to another) happened over time. This lets you easily spot trends or notice particular periods with a high number of events.&lt;/p&gt;&#xA;&lt;p&gt;The rows in the table represent the individual events. Each row displays:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;A timestamp&lt;/li&gt;&#xA;&lt;li&gt;The start and end state of the transition&lt;/li&gt;&#xA;&lt;li&gt;A link to the alert rule&lt;/li&gt;&#xA;&lt;li&gt;The labels which define the instance&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;Found a particularly interesting alert rule and want to focus on it? Simply click on the alert rule name and you&amp;rsquo;ll be navigated to the History tab of the alert rule’s detail page. There you can continue your investigation without being distracted by other events.&lt;/p&gt;&#xA;&lt;p&gt;You can also expand a table row to reveal additional information — the query values and expressions of the alert rule, along with an additional chart representing the alert instance&amp;rsquo;s state throughout the entire selected time period.&lt;/p&gt;&#xA;&lt;p&gt;For example, consider a scenario like the one below, where the chart reveals that your alert instance is frequently toggling between &amp;ldquo;firing&amp;rdquo; and &amp;ldquo;normal&amp;rdquo; during your selected period. In that case, it might be worth taking a closer look at how the alert rule is configured and then fine-tune the threshold or the pending period.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1999px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/alert-history/alert-firing.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/alert-history/alert-firing.png&#34;data-srcset=&#34;/media/blog/alert-history/alert-firing.png?w=320 320w, /media/blog/alert-history/alert-firing.png?w=550 550w, /media/blog/alert-history/alert-firing.png?w=750 750w, /media/blog/alert-history/alert-firing.png?w=900 900w, /media/blog/alert-history/alert-firing.png?w=1040 1040w, /media/blog/alert-history/alert-firing.png?w=1240 1240w, /media/blog/alert-history/alert-firing.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;History page UI&#34;&#xA;width=&#34;1999&#34;&#xA;height=&#34;1339&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/alert-history/alert-firing.png&#34;&#xA;alt=&#34;History page UI&#34;&#xA;width=&#34;1999&#34;&#xA;height=&#34;1339&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;h2 id=&#34;more-grafana-alerting-resources&#34;&gt;More Grafana Alerting resources&lt;/h2&gt;&#xA;&lt;p&gt;Take the alert management to the next level, and start using Grafana 11.2 today! The feature is also available for all Grafana Cloud users right now.&lt;/p&gt;&#xA;&lt;p&gt;And to learn more about Grafana Alerting, check out our&lt;a href=&#34;/tags/alerting/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt; recent blog posts&lt;/a&gt;, as well as our&lt;a href=&#34;/docs/grafana/latest/alerting/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt; technical documentation&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;The easiest way to get started with our Enterprise data source plugins is in &lt;a href=&#34;/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;. We have a generous forever-free tier that includes access to Enterprise data sources for 3 active users. If you haven’t already, &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;sign up for free today&lt;/a&gt;!&lt;/em&gt;&lt;/p&gt;】&lt;p&gt;一年前 &lt;a href=&#34;/blog/2023/07/10/how-we-improved-grafanas-alert-state-history-to-provide-better-insights-into-your-alerting-data/ ?pg=blog&amp;plcmt=body-txt&#34;&gt;我们重建了警报规则状态历史记录&lt;/a&gt;，使用 Grafana Loki 进行存储并更新 UI 以显示警报规则所有状态更改的时间线。因此，用户现在可以通过深入到警报规则级别并查看某些警报实例何时开始或停止触发来进行更好的根本原因分析。&lt;/p&gt;&#xA;&lt;p&gt;但我们并没有就此止步。&lt;/p&gt;&#xA;&lt;p&gt;为了确保系统稳定性并避免中断，您还需要一个地方来查看系统中所有警报的状态历史记录。这就是为什么我们很高兴地宣布 &lt;a href=&#34;/docs/grafana/latest/alerting/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana Alerting&lt;/a&gt; 中的新历史记录功能。这个新的“历史记录”页面在 &lt;a href=&#34;/docs/grafana-cloud/whats-new/centralized-alert-history-page/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana 11.2&lt;/a&gt; 中提供通过显示每个 Grafana 管理的警报规则的所有状态转换来获得整体视图。&lt;/p&gt;&#xA;&lt;div&#xA;类 =“youtube-lazyload 响应视频”&#xA;数据嵌入=“0fNtby8ieEw”&#xA;data-url=&#34;https://www.youtube.com/embed/0fNtby8ieEw?autoplay=1&amp;rel=0&#34;&#xA;数据标题=“YouTube 视频”&#xA;&gt;&#xA;&lt;div class=&#34;play-button&#34;&gt;&lt;/div&gt;&#xA;&lt;/div&gt;&#xA;&lt;p&gt;是否有多个警报规则同时触发？现在您可以轻松辨别哪个是第一个，或者之前发生了什么。清晰、全面地了解警报状态随时间的转变，使您能够识别模式、更快地诊断问题并改进整体事件响应策略。&lt;/p&gt;&#xA;&lt;p&gt;无论您是 DevOps 工程师、系统管理员还是 SRE 团队成员，此功能都旨在提供保持系统平稳运行所需的见解。&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-does-the-history-feature-work&#34;&gt;历史记录功能如何工作？&lt;/h2&gt;&#xA;&lt;p&gt;通过单击 Grafana 主菜单“警报”部分中的“历史记录”项来访问该页面。该页面包含三个部分 - 过滤器部分、事件图表和事件表。&lt;/p&gt;&#xA;&lt;p&gt;使用页面顶部的过滤器根据标签或状态缩小显示的历史事件范围。您还可以单击表格中的标签或状态将其快速添加到过滤器中。&lt;/p&gt;&#xA;&lt;p&gt;要定义您感兴趣的时间段，请使用事件图表上方的选择器，或者仅拖动图表本身上的区域来放大它。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：791px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/alert-history/history.gif&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src=&#34;/media/blog/alert-history/history.gif&#34;alt=&#34;在用户界面中按时间范围过滤&#34;&#xA;宽度=“791”&#xA;高度=“623”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/alert-history/history.gi”&#xA;alt=&#34;在用户界面中按时间范围过滤&#34;&#xA;宽度=“791”&#xA;高度=“623”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;事件图表显示一段时间内发生的历史事件（将其状态从一个状态更改为另一个状态的实例）的数量。这使您可以轻松发现趋势或注意到事件数量较多的特定时期。&lt;/p&gt;&#xA;&lt;p&gt;表中的行代表各个事件。每行显示：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;时间戳&lt;/li&gt;&#xA;&lt;li&gt;转换的开始和结束状态&lt;/li&gt;&#xA;&lt;li&gt;警报规则的链接&lt;/li&gt;&#xA;&lt;li&gt;定义实例的标签&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;发现一条特别有趣的警报规则并想关注它？只需单击警报规则名称，您就会导航到警报规则详细信息页面的“历史记录”选项卡。在那里您可以继续调查，而不会被其他事件分散注意力。&lt;/p&gt;&#xA;&lt;p&gt;您还可以展开表格行以显示其他信息 - 警报规则的查询值和表达式，以及表示警报实例在整个选定时间段内的状态的其他图表。&lt;/p&gt;&#xA;&lt;p&gt;例如，考虑如下场景，其中图表显示您的警报实例在您选择的时间段内频繁在“触发”和“正常”之间切换。在这种情况下，可能值得仔细查看警报规则的配置方式，然后微调阈值或挂起时间段。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1999px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/alert-history/alert-firing.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src =“/media/blog/alert-history/alert-firing.png”data-srcset =“/media/blog/alert-history/alert-firing.png？w = 320 320w，/media/blog/ Alert-history/alert-firing.png？w=550 550w，/media/blog/alert-history/alert-firing.png？w=750 750w，/media/blog/alert-history/alert-firing.png？ w=900 900w，/media/blog/alert-history/alert-firing.png？w=1040 1040w，/media/blog/alert-history/alert-firing.png？w=1240 1240w，/media/blog/警报历史记录/警报触发.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;历史页面 UI&#34;&#xA;宽度=“1999”&#xA;高度=“1339”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/alert-history/alert-firing.png”&#xA;alt=&#34;历史页面 UI&#34;&#xA;宽度=“1999”&#xA;高度=“1339”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;h2 id=&#34;more-grafana-alerting-resources&#34;&gt;更多 Grafana 警报资源&lt;/h2&gt;&#xA;&lt;p&gt;将警报管理提升到新的水平，立即开始使用 Grafana 11.2！该功能现在也可供所有 Grafana Cloud 用户使用。&lt;/p&gt;&#xA;&lt;p&gt;要了解有关 Grafana Alerting 的更多信息，请查看我们的&lt;a href=&#34;/tags/alerting/?pg=blog&amp;plcmt=body-txt&#34;&gt;最近的博客文章&lt;/a&gt;以及我们的&lt;a href= “/docs/grafana/latest/alerting/?pg=blog&amp;plcmt=body-txt&#34;&gt;技术文档&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;最简单的入门方法我们的企业数据源插件位于 &lt;a href=&#34;/products/cloud/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt; 中。我们拥有慷慨的永久免费套餐，其中包括 3 个活跃用户对企业数据源的访问权限。如果您还没有注册，请&lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;plcmt=body-txt&#34;&gt;立即免费注册&lt;/a&gt;！&lt;/em&gt;&lt;/p &gt;</description>
      <pubDate>Mon, 09 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【Grafana OpenTelemetry distributions: prioritizing simplicity, sticking to OSS values】Grafana OpenTelemetry 发行版：优先考虑简单性，坚持 OSS 价值观</title>
      <link>https://grafana.com/blog/2024/09/19/grafana-opentelemetry-distributions-prioritizing-simplicity-sticking-to-oss-values/</link>
      <description>【&lt;p&gt;The OpenTelemetry (OTel) project offers numerous components and instrumentations that support different languages and telemetry signals.&lt;/p&gt;&#xA;&lt;p&gt;However, this flexibility can be overwhelming, and new users often struggle to choose the right components and configure them properly for their specific use cases. To address this, OpenTelemetry defines the concept of a &lt;a href=&#34;https://opentelemetry.io/docs/concepts/distributions/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;distribution&lt;/a&gt;, a tailored and customized version of OpenTelemetry components.&lt;/p&gt;&#xA;&lt;p&gt;Here at Grafana Labs, we are committed to OpenTelemetry and to making observability more accessible. That’s why we are thrilled to announce the general availability of the Grafana OpenTelemetry distributions for &lt;a href=&#34;https://github.com/grafana/grafana-opentelemetry-java&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Java&lt;/a&gt; and &lt;a href=&#34;https://github.com/grafana/grafana-opentelemetry-dotnet&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;.NET&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;If you just want to get started, you can find the instructions on the &lt;a href=&#34;/docs/grafana-cloud/monitor-applications/application-observability/setup/quickstart/&#34;&gt;Grafana Cloud Application Observability quickstart&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;In this post, we&amp;rsquo;ll share the story behind the Grafana distributions, offering a glimpse into the thought process and technical decisions made. We hope this transparency helps you understand the benefits of our distributions and demonstrates our commitment to being active contributors to the OpenTelemetry project.&lt;/p&gt;&#xA;&lt;h2 id=&#34;the-motivation-behind-grafana-distributions&#34;&gt;The motivation behind Grafana distributions&lt;/h2&gt;&#xA;&lt;p&gt;Our decision to create Grafana OTel distributions was driven by several key factors:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Quick bug fixes&lt;/strong&gt;: We wanted to be able to quickly fix bugs, which is only possible if you control the release cycle.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Ease of use&lt;/strong&gt;: We recognized the challenges in configuring the upstream instrumentation solutions to work seamlessly with Grafana Cloud Application Observability. For example, &lt;code&gt;service.instance.id&lt;/code&gt; is important when distinguishing telemetry from individual instances, but it was missing upstream.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Cost efficiency&lt;/strong&gt;: By allowing users to drop unused metrics, we aimed to provide a more cost-effective solution.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;how-we-overcame-various-development-challenges&#34;&gt;How we overcame various development challenges&lt;/h2&gt;&#xA;&lt;p&gt;We faced an unexpected paradox when building these distributions: By simplifying them and making them more user-friendly, we inadvertently made it harder for users to switch to the upstream versions. This effectively locked them into our distributions, which goes against our open source principles — one of our core values is &amp;ldquo;&lt;a href=&#34;/oss/&#34;&gt;OSS is in our DNA&lt;/a&gt;.&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;As a result, we had to make several decisions to ensure users wouldn&amp;rsquo;t get locked in. One of the key changes was to the OpenTelemetry &lt;a href=&#34;https://github.com/open-telemetry/semantic-conventions/pull/312&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;specification&lt;/a&gt; itself. We identified a gap in the specification when it came to generating &lt;strong&gt;service instance IDs&lt;/strong&gt;, which are used to distinguish individual instances in horizontally scaled services. By contributing to the specification (a discussion that lasted several months) and implementing a generator in &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-java/pull/6226&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Java&lt;/a&gt; to auto-fill this value, we not only enhanced the ease of use for our distributions but also benefited the broader OpenTelemetry community. Without this change upstream, users would have had to manually populate service instance ID to be able to identify telemetry from individual instances.&lt;/p&gt;&#xA;&lt;p&gt;Another area where we focused on was &lt;strong&gt;authentication&lt;/strong&gt;. The authentication process was simplified by having our UI generate upstream headers instead of requiring Grafana-specific environment variables, such as &lt;code&gt;GRAFANA_CLOUD_INSTANCE_ID&lt;/code&gt;. This change made it easier for users to switch between our distributions and the upstream versions, as they no longer had to deal with Grafana-specific configurations. We even found a &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-specification/issues/3832&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;gap in the OTel specification&lt;/a&gt; — it was ambiguous whether &lt;code&gt;OTEL_EXPORTER_OTLP_HEADERS&lt;/code&gt;values needed to be URL encoded. This discovery resulted in PRs to align the behavior of the .NET, Java, PHP, Rust, and C++ OTel SDKs.&lt;/p&gt;&#xA;&lt;p&gt;Finally, we tackled the issue of &lt;strong&gt;metric overload&lt;/strong&gt;. Collecting an excessive amount of metrics could lead to unnecessary costs and complexity for users. To address this, we made the micrometer bridge &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/CHANGELOG.md#%EF%B8%8F%EF%B8%8F-breaking-changes-%EF%B8%8F%EF%B8%8F&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;opt-in upstream&lt;/a&gt; (it was opt-out before, but many users were not aware of this setting), cutting metrics of a typical application more than in half. This change gave users more control over their observability data and helped to ensure only necessary metrics were collected.&lt;/p&gt;&#xA;&lt;p&gt;Through these efforts, we were able to strike a better balance between ease of use and flexibility. Thanks to internal work, and upstream contributions, we’re confident that users can easily switch between our distributions and the upstream OpenTelemetry SDKs.&lt;/p&gt;&#xA;&lt;h2 id=&#34;a-journey-of-innovation-learning-and-community&#34;&gt;A journey of innovation, learning, and community&lt;/h2&gt;&#xA;&lt;p&gt;By prioritizing simplicity and open source values, we&amp;rsquo;re committed to creating solutions that benefit the wider observability community.&lt;/p&gt;&#xA;&lt;p&gt;Creating Grafana distributions for OTel has been a journey of innovation, learning, and community collaboration. By addressing key challenges and focusing on user needs, we&amp;rsquo;ve taken significant steps toward simplifying observability practices. We also feel we&amp;rsquo;re better equipped to address bugs for our users by having greater control over our release cycle. As we move forward, we remain committed to enhancing our solutions, always with the open source community and our users&amp;rsquo; best interests at heart.&lt;/p&gt;&#xA;&lt;p&gt;Start using the &lt;a href=&#34;https://github.com/grafana/grafana-opentelemetry-java&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Java&lt;/a&gt; and &lt;a href=&#34;https://github.com/grafana/grafana-opentelemetry-dotnet&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;.NET&lt;/a&gt; distributions today to help you better understand how your applications are performing. We can&amp;rsquo;t wait to see how the Grafana community puts them to use.&lt;/p&gt;】&lt;p&gt;OpenTelemetry (OTel) 项目提供了大量支持不同语言和遥测信号的组件和仪器。&lt;/p&gt;&#xA;&lt;p&gt;但是，这种灵活性可能令人难以承受，新用户常常难以选择正确的组件并针对其特定用例正确配置它们。为了解决这个问题，OpenTelemetry 定义了&lt;a href=&#34;https://opentelemetry.io/docs/concepts/distributions/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;分布&lt;/a&gt;的概念，一个定制的分布以及 OpenTelemetry 组件的定制版本。&lt;/p&gt;&#xA;&lt;p&gt;在 Grafana Labs，我们致力于 OpenTelemetry 并使可观察性变得更容易获得。这就是为什么我们很高兴地宣布针对 &lt;a href=&#34;https://github.com/grafana/grafana-opentelemetry-java&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Java 的 Grafana OpenTelemetry 发行版全面可用&lt;/a&gt; 和 &lt;a href=&#34;https://github.com/grafana/grafana-opentelemetry-dotnet&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;.NET&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;p&gt;如果您只是想开始使用，可以在 &lt;a href=&#34;/docs/grafana-cloud/monitor-applications/application-observability/setup/quickstart/&#34;&gt;Grafana Cloud 应用程序可观测性快速入门&lt; /a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;在这篇文章中，我们将分享 Grafana 发行版背后的故事，让您一睹思考过程和技术决策。我们希望这种透明度可以帮助您了解我们发行版的优势，并表明我们致力于成为 OpenTelemetry 项目的积极贡献者。&lt;/p&gt;&#xA;&lt;h2 id=&#34;the-motivation-behind-grafana-distributions&#34;&gt;Grafana 发行版背后的动机&lt;/h2&gt;&#xA;&lt;p&gt;我们决定创建 Grafana OTel 发行版是由以下几个关键因素推动的：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;快速修复错误&lt;/strong&gt;：我们希望能够快速修复错误，而这只有在您控制发布周期的情况下才能实现。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;易于使用&lt;/strong&gt;：我们认识到配置上游仪器解决方案以与 Grafana Cloud Application Observability 无缝协作所面临的挑战。例如，&lt;code&gt;service.instance.id&lt;/code&gt; 在区分遥测数据和单个实例时非常重要，但它在上游缺失。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;成本效率&lt;/strong&gt;：通过允许用户放弃未使用的指标，我们旨在提供更具成本效益的解决方案。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;how-we-overcame-various-development-challenges&#34;&gt;我们如何克服各种发展挑战&lt;/h2&gt;&#xA;&lt;p&gt;在构建这些发行版时，我们遇到了一个意想不到的悖论：通过简化它们并使它们更加用户友好，我们无意中使用户更难切换到上游版本。这实际上将它们锁定在我们的发行版中，这违背了我们的开源原则——我们的核心价值观之一是“&lt;a href=&#34;/oss/&#34;&gt;OSS 存在于我们的 DNA&lt;/a&gt; 中。”&lt;/p&gt;&#xA;&lt;p&gt;因此，我们必须做出多项决定，以确保用户不会被锁定。关键问题之一nges 是 OpenTelemetry &lt;a href=&#34;https://github.com/open-telemetry/semantic-conventions/pull/312&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;规范&lt;/a&gt; 本身。我们在生成&lt;strong&gt;服务实例 ID&lt;/strong&gt; 时发现了规范中的一个缺陷，这些 ID 用于区分水平扩展服务中的各个实例。通过为规范做出贡献（持续了几个月的讨论）并在 &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-java/pull/6226&#34; target=&#34;_blank&#34; rel= 中实现生成器“noopener noreferrer&#34;&gt;Java&lt;/a&gt; 自动填充此值，我们不仅增强了发行版的易用性，而且还使更广泛的 OpenTelemetry 社区受益。如果上游没有进行此更改，用户将必须手动填充服务实例 ID 才能识别各个实例的遥测数据。&lt;/p&gt;&#xA;&lt;p&gt;我们关注的另一个领域是&lt;strong&gt;身份验证&lt;/strong&gt;。通过让我们的 UI 生成上游标头，而不需要 Grafana 特定的环境变量（例如 &lt;code&gt;GRAFANA_CLOUD_INSTANCE_ID&lt;/code&gt;），简化了身份验证过程。这一更改使用户可以更轻松地在我们的发行版和上游版本之间切换，因为他们不再需要处理 Grafana 特定的配置。我们甚至发现了&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-specation/issues/3832&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OTel 规范中的差距&lt;/a&gt; - &lt;code&gt;OTEL_EXPORTER_OTLP_HEADERS&lt;/code&gt;值是否需要进行 URL 编码是不明确的。这一发现导致了 PR 来协调 .NET、Java、PHP、Rust 和 C++ OTel SDK 的行为。&lt;/p&gt;&#xA;&lt;p&gt;最后，我们解决了&lt;strong&gt;指标过载&lt;/strong&gt;的问题。收集过多的指标可能会给用户带来不必要的成本和复杂性。为了解决这个问题，我们制作了千分尺桥 &lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/CHANGELOG.md#%EF%B8%8F%EF%B8 %8F-writing-changes-%EF%B8%8F%EF%B8%8F&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;选择加入上游&lt;/a&gt;（以前是选择退出的，但很多用户不知道此设置），将典型应用程序的指标减少一半以上。这一变化使用户能够更好地控制其可观察性数据，并有助于确保只收集必要的指标。&lt;/p&gt;&#xA;&lt;p&gt;通过这些努力，我们能够在易用性和灵活性之间取得更好的平衡。由于内部工作和上游贡献，我们相信用户可以轻松地在我们的发行版和上游 OpenTelemetry SDK 之间切换。&lt;/p&gt;&#xA;&lt;h2 id=&#34;a-journey-of-innovation-learning-and-community&#34;&gt;创新、学习和社区之旅&lt;/h2&gt;&#xA;&lt;p&gt;通过优先考虑简单性和开源价值，我们致力于创建有利于更广泛的可观察性社区的解决方案。&lt;/p&gt;&#xA;&lt;p&gt;为 OTel 创建 Grafana 发行版是一段漫长的旅程创新、学习和社区合作。通过解决关键挑战并关注用户需求，我们在简化可观察性实践方面采取了重大步骤。我们还认为，通过更好地控制我们的发布周期，我们可以更好地为用户解决错误。随着我们的前进，我们仍然致力于增强我们的解决方案，始终将开源社区和用户的最大利益放在心上。&lt;/p&gt;&#xA;&lt;p&gt;开始使用 &lt;a href=&#34;https://github.com/grafana/grafana-opentelemetry-java&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Java&lt;/a&gt; 和 &lt;a href=&#34;今天发布 https://github.com/grafana/grafana-opentelemetry-dotnet&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;.NET&lt;/a&gt; 发行版，帮助您更好地了解应用程序的执行情况。我们迫不及待地想看看 Grafana 社区如何使用它们。&lt;/p&gt;</description>
      <pubDate>Thu, 19 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【How to visualize vehicle CAN bus data with the Amazon Athena data source for Grafana】如何使用 Grafana 的 Amazon Athena 数据源可视化车辆 CAN 总线数据</title>
      <link>https://grafana.com/blog/2024/09/13/how-to-visualize-vehicle-can-bus-data-with-the-amazon-athena-data-source-for-grafana/</link>
      <description>【&lt;p&gt;&lt;em&gt;Martin Falch, co-owner and head of sales and marketing at CSS Electronics, is an expert on &lt;a href=&#34;https://www.csselectronics.com/pages/can-bus-simple-intro-tutorial&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;CAN bus data&lt;/a&gt;. Martin works closely with end users, typically OEM engineers, across diverse industries, including automotive, maritime, and industrial. He is passionate about data visualization and has been spearheading the integration of the CANedge with Grafana telematics dashboards through various data sources.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;At CSS Electronics, we build professional-grade and simple-to-use &lt;a href=&#34;https://www.csselectronics.com/pages/can-bus-hardware-products&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Controller Area Network (CAN) bus data loggers&lt;/a&gt;. In short, &lt;a href=&#34;https://www.csselectronics.com/pages/can-bus-simple-intro-tutorial&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;CAN bus&lt;/a&gt; is a protocol used for communicating sensor data within vehicles and machinery, including &lt;a href=&#34;https://www.csselectronics.com/pages/j1939-data-logger-wifi-telematics-fleet-management&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;trucks&lt;/a&gt;, &lt;a href=&#34;https://www.csselectronics.com/pages/obd2-data-logger-sd-memory-convert&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;cars&lt;/a&gt;, &lt;a href=&#34;https://www.csselectronics.com/pages/marine-telematics-boat-data&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;ships&lt;/a&gt;, and &lt;a href=&#34;https://www.csselectronics.com/pages/canopen-data-logger&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;robots&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;Our end users include engineers at automotive and industrial manufacturers (OEMs) who need to monitor assets in the field for R&amp;amp;D, diagnostics, or &lt;a href=&#34;https://www.csselectronics.com/pages/predictive-maintenance-can-bus-iot&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;predictive maintenance&lt;/a&gt;. A large share of our users also visualize their data via Grafana dashboards. In this blog post, we discuss the workflow involved in achieving this — and how we help our users solve their unique challenges by utilizing the &lt;a href=&#34;/grafana/plugins/grafana-athena-datasource/&#34;&gt;Amazon Athena data source for Grafana&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 800px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/CSS-electronics-athena-data-source/css-electronics-grafana-dashboard-gif2.gif&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/CSS-electronics-athena-data-source/css-electronics-grafana-dashboard-gif2.gif&#34;alt=&#34;A gif showing a Grafana dashboard with the Athena data source.&#34;&#xA;width=&#34;800&#34;&#xA;height=&#34;450&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/CSS-electronics-athena-data-source/css-electronics-grafana-dashboard-gif2.gif&#34;&#xA;alt=&#34;A gif showing a Grafana dashboard with the Athena data source.&#34;&#xA;width=&#34;800&#34;&#xA;height=&#34;450&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;More than 500 users of CSS Electronics’ devices have deployed the Amazon Athena data source for Grafana to visualize CAN bus data. Our users leverage the data source as part of a broader workflow for data visualization — specifically, automatic data processing via AWS Lambda functions to create Parquet data lakes, as well as Glue jobs running in AWS to map those data lakes. We offer &lt;a href=&#34;https://www.csselectronics.com/pages/telematics-dashboard-open-source&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;step-by-step guides&lt;/a&gt; and technical support to help our users deploy this workflow.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;five-integration-challenges-we-wanted-to-solve&#34;&gt;Five integration challenges we wanted to solve&lt;/h2&gt;&#xA;&lt;p&gt;Before choosing the Athena data source for Grafana to help our users visualize their CAN bus data, we were looking to solve five specific challenges.&lt;/p&gt;&#xA;&lt;h3 id=&#34;1-how-to-decode-and-prepare-raw-binary-log-files&#34;&gt;1. How to decode and prepare raw binary log files&lt;/h3&gt;&#xA;&lt;p&gt;Our CANedge data loggers record raw CAN bus data in a binary file format called MDF (*.MF4). This data consists of timestamped “CAN IDs” and “databytes.” In order for our users to make sense of the data, it needs to be “decoded” to human-readable form via software or API tools and a database file (&lt;a href=&#34;https://www.csselectronics.com/pages/can-dbc-file-database-intro&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;DBC&lt;/a&gt;) that contains information on how to interpret data from a specific application, such as those used in a truck or car.&lt;/p&gt;&#xA;&lt;h3 id=&#34;2-how-to-enable-low-cost-dashboard-visualization-across-tbs-of-data&#34;&gt;2. How to enable low-cost dashboard visualization across TBs of data&lt;/h3&gt;&#xA;&lt;p&gt;A single CANedge IoT device connected to, for example, a truck can easily generate 50+ GB of data per month. As a result, users easily need to enable visualization across terabytes of data, which can quickly become expensive if the data is stored suboptimally. At the same time, data queries should be reasonably fast to enable users to effectively work with their data.&lt;/p&gt;&#xA;&lt;h3 id=&#34;3-how-to-retain-the-original-message-timestamps&#34;&gt;3. How to retain the original message timestamps&lt;/h3&gt;&#xA;&lt;p&gt;A typical CAN bus may comprise 10-100 unique CAN messages, each broadcast at separate frequencies. Some messages may be broadcast a few times per second, while others may be broadcast, for example, at 1000+ Hz. We wanted an integration that would allow us to retain these original timestamps, enabling users to both look at data across multiple months and within a single second.&lt;/p&gt;&#xA;&lt;h3 id=&#34;4-how-to-enable-end-users-to-self-deploy-everything&#34;&gt;4. How to enable end users to self-deploy everything&lt;/h3&gt;&#xA;&lt;p&gt;Our business model is special: we do not host servers/services at all. Rather, we help enable our end users to set up everything themselves. This is necessary, as most end users are extremely strict on data sensitivity, but it requires that everything is extremely simple to deploy.&lt;/p&gt;&#xA;&lt;h3 id=&#34;5-how-to-stay-agnostic&#34;&gt;5. How to stay agnostic&lt;/h3&gt;&#xA;&lt;p&gt;Our CANedge devices enable agnostic data collection: users can, for example, use a CANedge1 device to log data to an SD card for offline usage, or a CANedge2/CANedge3 device for data collection via WiFi/LTE to their own Amazon S3 bucket. The latter can be self-hosted via, for example, &lt;a href=&#34;https://min.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;MinIO&lt;/a&gt;, or cloud-hosted. We needed a solution that our users could easily deploy across these backends.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1999px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-devices.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-devices.png&#34;data-srcset=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-devices.png?w=320 320w, /media/blog/CSS-electronics-athena-data-source/canedge-devices.png?w=550 550w, /media/blog/CSS-electronics-athena-data-source/canedge-devices.png?w=750 750w, /media/blog/CSS-electronics-athena-data-source/canedge-devices.png?w=900 900w, /media/blog/CSS-electronics-athena-data-source/canedge-devices.png?w=1040 1040w, /media/blog/CSS-electronics-athena-data-source/canedge-devices.png?w=1240 1240w, /media/blog/CSS-electronics-athena-data-source/canedge-devices.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;An image showing CANedge devices with Grafana dashboards. &#34;&#xA;width=&#34;1999&#34;&#xA;height=&#34;1125&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-devices.png&#34;&#xA;alt=&#34;An image showing CANedge devices with Grafana dashboards. &#34;&#xA;width=&#34;1999&#34;&#xA;height=&#34;1125&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;h2 id=&#34;our-solution-amazon-athena-and-grafana&#34;&gt;Our solution: Amazon Athena and Grafana&lt;/h2&gt;&#xA;&lt;p&gt;To solve the above, many of our users now use Amazon Athena, a serverless and interactive analytics service within the AWS cloud, as a data source in Grafana.&lt;/p&gt;&#xA;&lt;p&gt;The following reflects the typical Grafana-Athena setup for our users:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;A CANedge device uploads raw CAN/LIN data to an Amazon S3 input bucket&lt;/li&gt;&#xA;&lt;li&gt;When a log file is uploaded, it triggers an AWS Lambda function&lt;/li&gt;&#xA;&lt;li&gt;The Lambda function DBC decodes the data to Parquet files&lt;/li&gt;&#xA;&lt;li&gt;The Parquet files are written to an AWS S3 output bucket&lt;/li&gt;&#xA;&lt;li&gt;Grafana visualizes this data lake via the Amazon Athena data source plugin&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;This setup can be auto-deployed in less than 15 minutes — zero coding required.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 800px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png&#34;data-srcset=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=320 320w, /media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=550 550w, /media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=750 750w, /media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=900 900w, /media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=1040 1040w, /media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=1240 1240w, /media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;A diagram showing CSS Electronics&amp;#39; workflow involving the Athena data source for Grafana.&#34;&#xA;width=&#34;800&#34;&#xA;height=&#34;600&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/CSS-electronics-athena-data-source/canedge-athena-grafana-diagram.png&#34;&#xA;alt=&#34;A diagram showing CSS Electronics&amp;#39; workflow involving the Athena data source for Grafana.&#34;&#xA;width=&#34;800&#34;&#xA;height=&#34;600&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;This Grafana-Athena deployment is fully self-deployed by our end users, including users that have never worked with Grafana or AWS. To enable this, we provide plug-and-play AWS CloudFormation stacks that end users can deploy via our simple step-by-step guides.&lt;/p&gt;&#xA;&lt;p&gt;For further details, see our &lt;a href=&#34;https://www.csselectronics.com/pages/telematics-dashboard-open-source&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Grafana-Athena page&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;h3 id=&#34;four-key-benefits-of-the-grafana-athena-solution&#34;&gt;Four key benefits of the Grafana-Athena solution&lt;/h3&gt;&#xA;&lt;p&gt;Our users have seen a number of significant benefits from using the Athena data source for Grafana to visualize and monitor their CAN bus data, including:&lt;/p&gt;&#xA;&lt;h4 id=&#34;1-high-query-performance-at-extremely-low-cost&#34;&gt;1. High query performance at extremely low cost&lt;/h4&gt;&#xA;&lt;p&gt;Using Grafana and Athena, the cost for a single CANedge device with 100 GB of queryable data is approximately ~3 USD/device/month, which is very cost-effective. Part of this is because Athena is a serverless solution that is paid-per-query (5$/TB), making the combination excellent for visualizing large data volumes in a setup where the data is infrequently queried.&lt;/p&gt;&#xA;&lt;h4 id=&#34;2-easy-deployment&#34;&gt;2. Easy deployment&lt;/h4&gt;&#xA;&lt;p&gt;By preparing agnostic Lambda functions and AWS CloudFormation templates, the Grafana-Athena integration enables every individual user to deploy everything in minutes — without writing a single line of code. Further, Grafana’s open source nature enables our team to prepare dashboard templates for common use cases. Most users simply load one of our plug-and-play JSON dashboard templates, which lets them get started in seconds. We use this to enable dynamic dashboards through &lt;a href=&#34;/docs/grafana/latest/dashboards/variables/&#34;&gt;variables&lt;/a&gt;, where users can browse between different devices and parameters via auto-populated drop downs.&lt;/p&gt;&#xA;&lt;h4 id=&#34;3-seamlessly-analyze-data-across-years-or-milliseconds&#34;&gt;3. Seamlessly analyze data across years (or milliseconds)&lt;/h4&gt;&#xA;&lt;p&gt;The upload log files are automatically decoded and written to an Amazon S3 Parquet data lake. The data lake is structured so that every CAN message is contained in a separate folder, which enables users to retain the original timestamps of every message. In Grafana, users can then leverage standard SQL queries to define each dashboard panel — and seamlessly resample data on-the-fly. In practice, this means end users can effectively visualize data across years and GBs of data, and then seconds later zoom in to visualize intra-second observations matching the original timestamps at which the data was recorded on the CAN bus.&lt;/p&gt;&#xA;&lt;h4 id=&#34;4-multi-purpose-data-lake-with-sql-interface&#34;&gt;4. Multi-purpose data lake with SQL interface&lt;/h4&gt;&#xA;&lt;p&gt;Our workflow involving the Athena data source for Grafana quickly opens up other use cases. For example, the S3-based Parquet data lake can be directly queried in &lt;a href=&#34;https://www.csselectronics.com/pages/python-can-bus-api&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Python&lt;/a&gt;/&lt;a href=&#34;https://www.csselectronics.com/pages/matlab-mdf-mf4-can-bus&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;MATLAB&lt;/a&gt;, while the Athena integration can be used in, for example, ODBC-based &lt;a href=&#34;https://www.csselectronics.com/pages/excel-can-bus-parquet-data-lake-s3-athena-duckdb&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Excel reports/dashboards&lt;/a&gt;. In other words, the Parquet data lake becomes a one-stop shop for all data analysis requirements.&lt;/p&gt;&#xA;&lt;h2 id=&#34;learn-more&#34;&gt;Learn more&lt;/h2&gt;&#xA;&lt;p&gt;Overall, our workflow with the Athena data source for Grafana offers a cost-effective and fast way for our users to visualize and analyze their CAN bus data. It also serves as a blueprint for other companies that wish to enable Grafana dashboard visualization at low cost across large volumes of data.&lt;/p&gt;&#xA;&lt;p&gt;You can learn more about how our users leverage Athena and Grafana in our &lt;a href=&#34;https://www.csselectronics.com/pages/telematics-dashboard-open-source&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;intro article&lt;/a&gt;, where you can also find our step-by-step guide and sample data for testing it out yourself. You can also check out our &lt;a href=&#34;https://grafana.csselectronics.stellarhosted.com/d/obd2-gps-car/obd2-gps-car&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;public Grafana-Athena dashboard playground&lt;/a&gt;.&lt;/p&gt;】&lt;p&gt;&lt;em&gt;CSS Electronics 的共同所有者兼销售和营销主管 Martin Falch 是 &lt;a href=&#34;https://www.css electronics.com/pages/can-bus-simple-intro 方面的专家-tutorial&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;CAN 总线数据&lt;/a&gt;。 Martin 与汽车、海事和工业等不同行业的最终用户（通常是 OEM 工程师）密切合作。他对数据可视化充满热情，并一直致力于通过各种数据源将 CANedge 与 Grafana 远程信息处理仪表板集成。&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;在CSS Electronics，我们构建专业级且易于使用的&lt;a href=&#34;https://www.css electronics.com/pages/can-bus-hardware-products&#34; target=&#34;_blank&#34; rel= &#34;noopener noreferrer&#34;&gt;控制器局域网 (CAN) 总线数据记录器&lt;/a&gt;。简而言之，&lt;a href=&#34;https://www.css electronics.com/pages/can-bus-simple-intro-tutorial&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;CAN总线&lt;/a&gt;是一个用于在车辆和机械内传输传感器数据的协议，包括 &lt;a href=&#34;https://www.css electronics.com/pages/j1939-data-logger-wifi-telematics-fleet-management&#34; target=&#34;_blank&#34; rel= &#34;noopener noreferrer&#34;&gt;卡车&lt;/a&gt;，&lt;a href=&#34;https://www.css electronics.com/pages/obd2-data-logger-sd-memory-convert&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer &#34;&gt;汽车&lt;/a&gt;、&lt;a href=&#34;https://www.css electronics.com/pages/marine-telematics-boat-data&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;船舶&lt;/a&gt;和&lt;a href=&#34;https://www.css electronics.com/pages/canopen-data-logger&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;机器人&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;p&gt;我们的最终用户包括汽车和工业制造商 (OEM) 的工程师，他们需要监控现场资产以进行研发、诊断或&lt;a href=&#34;https://www.css electronics.com/pages/predictive-maintenance -can-bus-iot&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;预测性维护&lt;/a&gt;。我们的很大一部分用户还通过 Grafana 仪表板可视化他们的数据。在这篇博文中，我们讨论了实现这一目标所涉及的工作流程，以及我们如何利用 &lt;a href=&#34;/grafana/plugins/grafana-athena-datasource/&#34;&gt;Amazon Athena 数据源来帮助我们的用户解决他们的独特挑战格拉法纳&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：800px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/CSS- electronics-athena-data-source/css- electronics-grafana-dashboard-gif2.gif&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src=&#34;/media/blog/CSS- electronics-athena-data-source/css- electronics-grafana-dashboard-gif2.gif&#34; alt=&#34;显示带有 Athena 数据源的 Grafana 仪表板的 gif。&#34;&#xA;宽度=“800”&#xA;高度=“450”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/媒体/博客/CSS-电子-athena-data-source/css-电子-grafana-dashboard-gif2.gif”&#xA;alt=&#34;显示带有 Athena 数据源的 Grafana 仪表板的 gif。&#34;&#xA;宽度=“800”&#xA;高度=“450”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/fi图&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;strong&gt;注意：&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;CSS Electronics 设备的 500 多名用户已为 Grafana 部署了 Amazon Athena 数据源，以可视化 CAN 总线数据。我们的用户利用数据源作为更广泛的数据可视化工作流程的一部分 - 具体来说，通过 AWS Lambda 函数进行自动数据处理以创建 Parquet 数据湖，以及在 AWS 中运行的 Glue 作业来映射这些数据湖。我们提供&lt;a href=&#34;https://www.css electronics.com/pages/telematics-dashboard-open-source&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;分步指南&lt;/a&gt;和技术支持帮助我们的用户部署此工作流程。&lt;/em&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34; Five-integration-challenges-we-wanted-to-solve&#34;&gt;我们想要解决的五项集成挑战&lt;/h2&gt;&#xA;&lt;p&gt;在为 Grafana 选择 Athena 数据源来帮助我们的用户可视化其 CAN 总线数据之前，我们希望解决五个具体挑战。&lt;/p&gt;&#xA;&lt;h3 id=&#34;1-how-to-decode-and-prepare-raw-binary-log-files&#34;&gt;1.如何解码和准备原始二进制日志文件&lt;/h3&gt;&#xA;&lt;p&gt;我们的 CANedge 数据记录器以称为 MDF (*.MF4) 的二进制文件格式记录原始 CAN 总线数据。该数据由带时间戳的“CAN ID”和“数据字节”组成。为了让我们的用户理解数据，需要通过软件或 API 工具和数据库文件将其“解码”为人类可读的形式 (&lt;a href=&#34;https://www.css electronics.com/pages /can-dbc-file-database-intro&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;DBC&lt;/a&gt;），包含有关如何解释特定应用程序（例如卡车或卡车中使用的数据）的数据的信息汽车。&lt;/p&gt;&#xA;&lt;h3 id=&#34;2-how-to-enable-low-cost-dashboard-visualization-across-tbs-of-data&#34;&gt;2.如何实现跨 TB 数据的低成本仪表板可视化&lt;/h3&gt;&#xA;&lt;p&gt;连接到卡车等设备的单个 CANedge IoT 设备每月可以轻松生成 50+ GB 的数据。因此，用户很容易需要实现跨 TB 数据的可视化，如果数据存储不理想，成本很快就会变得昂贵。同时，数据查询应该相当快，以使用户能够有效地处理他们的数据。&lt;/p&gt;&#xA;&lt;h3 id=&#34;3-how-to-retain-the-original-message-timestamps&#34;&gt;3.如何保留原始消息时间戳&lt;/h3&gt;&#xA;&lt;p&gt;典型的 CAN 总线可能包含 10-100 个独特的 CAN 消息，每个消息以不同的频率广播。某些消息可能每秒广播几次，而其他消息可能以例如 1000+ Hz 的频率广播。我们想要一种集成，使我们能够保留这些原始时间戳，使用户能够查看跨多个月的数据和在一秒钟内的数据。&lt;/p&gt;&#xA;&lt;h3 id=&#34;4-how-to-enable-end-users-to-self-deploy-everything&#34;&gt;4.如何使最终用户能够自行部署所有内容&lt;/h3&gt;&#xA;&lt;p&gt;我们的业务模式很特殊：我们根本不托管服务器/服务。相反，我们帮助最终用户自行设置一切。这是必要的，因为大多数最终用户对数据敏感性极其严格，但它要求一切都是额外的部署非常简单。&lt;/p&gt;&#xA;&lt;h3 id=&#34;5-how-to-stay-agnostic&#34;&gt;5.如何保持不可知论&lt;/h3&gt;&#xA;&lt;p&gt;我们的 CANedge 设备支持不可知的数据收集：例如，用户可以使用 CANedge1 设备将数据记录到 SD 卡以供离线使用，或者使用 CANedge2/CANedge3 设备通过 WiFi/LTE 将数据收集到自己的 Amazon S3桶。后者可以通过例如 &lt;a href=&#34;https://min.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;MinIO&lt;/a&gt; 自托管，也可以通过云托管。我们需要一个用户可以轻松跨这些后端部署的解决方案。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1999px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/CSS- electronics-athena-data-source/canedge-devices.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src=&#34;/media/blog/CSS- electronics-athena-data-source/canedge-devices.png&#34;data-srcset=&#34;/media/blog/CSS- electronics-athena-data-source/canedge-devices.png png?w=320 320w，/media/blog/CSS-电子-athena-data-source/canedge-devices.png?w=550 550w，/media/blog/CSS- electronics-athena-data-source/canedge- devices.png?w=750 750w，/media/blog/CSS- electronics-athena-data-source/canedge-devices.png?w=900 900w，/media/blog/CSS- electronics-athena-data-source/ canedge-devices.png?w=1040 1040w，/media/blog/CSS- electronics-athena-data-source/canedge-devices.png?w=1240 1240w，/media/blog/CSS- electronics-athena-data-源/canedge-devices.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;显示带有 Grafana 仪表板的 CANedge 设备的图像。 &#34;&#xA;宽度=“1999”&#xA;高度=“1125”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/CSS- electronics-athena-data-source/canedge-devices.png&#34;&#xA;alt=&#34;显示带有 Grafana 仪表板的 CANedge 设备的图像。&#34;&#xA;宽度=“1999”&#xA;高度=“1125”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;h2 id=&#34;our-solution-amazon-athena-and-grafana&#34;&gt;我们的解决方案：Amazon Athena 和 Grafana&lt;/h2&gt;&#xA;&lt;p&gt;为了解决上述问题，我们的许多用户现在使用 Amazon Athena（AWS 云中的无服务器交互式分析服务）作为 Grafana 中的数据源。&lt;/p&gt;&#xA;&lt;p&gt;以下内容反映了我们用户的典型 Grafana-Athena 设置：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;CANedge 设备将原始 CAN/LIN 数据上传到 Amazon S3 输入存储桶&lt;/li&gt;&#xA;&lt;li&gt;上传日志文件时，会触发 AWS Lambda 函数&lt;/li&gt;&#xA;&lt;li&gt;Lambda 函数 DBC 将数据解码为 Parquet 文件&lt;/li&gt;&#xA;&lt;li&gt;Parquet 文件写入 AWS S3 输出存储桶&lt;/li&gt;&#xA;&lt;li&gt;Grafana 通过 Amazon Athena 数据源插件可视化此数据湖&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;此设置可以在 15 分钟内自动部署 - 需要零编码。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：800px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/CSS- electronics-athena-data-source/canedge-athena-grafana-diagram.png&#34;&#xA;itemprop=“co”内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;数据-src =“/媒体/博客/CSS-电子-athena-data-source/canedge-athena-grafana-diagram.png”数据-srcset =“/媒体/博客/CSS-电子-athena-data-source/ canedge-athena-grafana-diagram.png?w=320 320w，/media/blog/CSS- electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=550 550w，/media/blog/ CSS-电子-athena-data-source/canedge-athena-grafana-diagram.png？w=750 750w，/media/blog/CSS- electronics-athena-data-source/canedge-athena-grafana-diagram.png？ w=900 900w，/media/blog/CSS- electronics-athena-data-source/canedge-athena-grafana-diagram.png？w=1040 1040w，/media/blog/CSS- electronics-athena-data-source/ canedge-athena-grafana-diagram.png?w=1240 1240w，/media/blog/CSS- electronics-athena-data-source/canedge-athena-grafana-diagram.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;显示 CSS Electronics 涉及 Grafana 的 Athena 数据源的工作流程的图表。&#34;&#xA;宽度=“800”&#xA;高度=“600”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/CSS- electronics-athena-data-source/canedge-athena-grafana-diagram.png&#34;&#xA;alt=&#34;该图显示了 CSS Electronics 涉及 Grafana 的 Athena 数据源的工作流程。&#34;&#xA;宽度=“800”&#xA;高度=“600”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;此 Grafana-Athena 部署完全由我们的最终用户自行部署，包括从未使用过 Grafana 或 AWS 的用户。为了实现这一点，我们提供了即插即用的 AWS CloudFormation 堆栈，最终用户可以通过我们简单的分步指南进行部署。&lt;/p&gt;&#xA;&lt;p&gt;有关更多详细信息，请参阅我们的 &lt;a href=&#34;https://www.css electronics.com/pages/telematics-dashboard-open-source&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Grafana-Athena 页面&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;h3 id=&#34;four-key-benefits-of-the-grafana-athena-solution&#34;&gt;Grafana-Athena 解决方案的四个主要优势&lt;/h3&gt;&#xA;&lt;p&gt;我们的用户已经看到使用 Grafana 的 Athena 数据源来可视化和监控其 CAN 总线数据带来的许多显着好处，包括：&lt;/p&gt;&#xA;&lt;h4 id=&#34;1-high-query-performance-at-extremely-low-cost&#34;&gt;1.以极低的成本获得高查询性能&lt;/h4&gt;&#xA;&lt;p&gt;使用 Grafana 和 Athena，单个具有 100 GB 可查询数据的 CANedge 设备的成本约为 3 美元/设备/月，非常划算。部分原因是 Athena 是一种按查询付费的无服务器解决方案（5 美元/TB），因此该组合非常适合在不经常查询数据的设置中可视化大数据量。&lt;/p&gt;&#xA;&lt;h4 id=&#34;2-easy-deployment&#34;&gt;2.轻松部署&lt;/h4&gt;&#xA;&lt;p&gt;通过准备不可知的 Lambda 函数和 AWS CloudFormation 模板，Grafana-Athena 集成使每个用户都可以在几分钟内部署所有内容，而无需编写任何代码。此外，Grafana 的开源特性使我们的团队能够为常见用例准备仪表板模板。大多数用户只需加载我们的即插即用 JSON 仪表板模板之一，即可在几秒钟内开始使用。我们使用它来通过 &lt;a 启用动态仪表板href=&#34;/docs/grafana/latest/dashboards/variables/&#34;&gt;变量&lt;/a&gt;，用户可以通过自动填充的下拉菜单在不同设备和参数之间浏览。&lt;/p&gt;&#xA;&lt;h4 id=&#34;3-seamless-analyze-data-across-years-or-milliseconds&#34;&gt;3.无缝分析跨年（或毫秒）的数据&lt;/h4&gt;&#xA;&lt;p&gt;上传日志文件会自动解码并写入 Amazon S3 Parquet 数据湖。数据湖的结构使得每条 CAN 消息都包含在一个单独的文件夹中，这使用户能够保留每条消息的原始时间戳。在 Grafana 中，用户可以利用标准 SQL 查询来定义每个仪表板面板，并即时无缝地重新采样数据。实际上，这意味着最终用户可以有效地可视化跨年和 GB 数据的数据，然后几秒钟后放大以可视化与 CAN 总线上记录数据的原始时间戳相匹配的秒内观察结果。&lt;/p&gt;&#xA;&lt;h4 id=&#34;4-multi- Purpose-data-lake-with-sql-interface&#34;&gt;4.具有 SQL 接口的多用途数据湖&lt;/h4&gt;&#xA;&lt;p&gt;我们的工作流程涉及 Grafana 的 Athena 数据源，可以快速打开其他用例。例如基于S3的Parquet数据湖可以直接在 &lt;a href=&#34;https://www.css electronics.com/pages/python-can-bus-api&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer 中查询&#34;&gt;Python&lt;/a&gt;/&lt;a href=&#34;https://www.css electronics.com/pages/matlab-mdf-mf4-can-bus&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;MATLAB&lt;/ a&gt;，而 Athena 集成可用于基于 ODBC 的 &lt;a href=&#34;https://www.css electronics.com/pages/excel-can-bus-parquet-data-lake-s3-athena -duckdb&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Excel 报告/仪表板&lt;/a&gt;。换句话说，Parquet 数据湖成为满足所有数据分析需求的一站式服务。&lt;/p&gt;&#xA;&lt;h2 id=&#34;learn-more&#34;&gt;了解更多&lt;/h2&gt;&#xA;&lt;p&gt;总体而言，我们使用 Grafana 的 Athena 数据源的工作流程为我们的用户提供了一种经济高效且快速的方式来可视化和分析其 CAN 总线数据。它还可以为其他希望以低成本跨大量数据实现 Grafana 仪表板可视化的公司提供蓝图。&lt;/p&gt;&#xA;&lt;p&gt;您可以在我们的 &lt;a href=&#34;https://www.css electronics.com/pages/telematics-dashboard-open-source&#34; target=&#34;_blank&#34; rel=&#34; 中详细了解我们的用户如何利用 Athena 和 Grafana noopener noreferrer&#34;&gt;介绍文章&lt;/a&gt;，您还可以在其中找到我们的分步指南和示例数据以自行测试。您还可以查看我们的&lt;a href=&#34;https://grafana.css electronics.stellarhosted.com/d/obd2-gps-car/obd2-gps-car&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;公共Grafana-Athena 仪表板游乐场&lt;/a&gt;。&lt;/p&gt;</description>
      <pubDate>Fri, 13 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【OpenTelemetry and vendor neutrality: how to build an observability strategy with maximum flexibility】OpenTelemetry 和供应商中立性：如何构建具有最大灵活性的可观测性策略</title>
      <link>https://grafana.com/blog/2024/09/12/opentelemetry-and-vendor-neutrality-how-to-build-an-observability-strategy-with-maximum-flexibility/</link>
      <description>【&lt;p&gt;One of the biggest advantages of the OpenTelemetry project is its vendor neutrality — something that many community members appreciate, especially if they’ve spent huge amounts of time migrating from one commercial vendor to another. Vendor neutrality also happens to be a core element of our big tent philosophy here at Grafana Labs. We realize, however, that this neutrality can have its limits when it comes to real-world use cases.&lt;/p&gt;&#xA;&lt;p&gt;In this post, we’ll explain vendor neutrality in the context of the open source OpenTelemetry project, including where it starts and ends, and how you can take advantage.&lt;/p&gt;&#xA;&lt;h2 id=&#34;three-key-layers-of-telemetry&#34;&gt;Three key layers of telemetry&lt;/h2&gt;&#xA;&lt;p&gt;Before we dive deeper into the concept of vendor neutrality, let’s look at the bigger picture, as it relates to telemetry and the OpenTelemetry project. In general, telemetry approaches usually involve three layers:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;The apps and infrastructure&lt;/strong&gt;: This is the source of the telemetry — meaning, the actual thing we will be observing.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;The telemetry collector&lt;/strong&gt;: This is software that collects, filters, processes, and forwards telemetry signals.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;The telemetry backend&lt;/strong&gt;: This can be broken down into two further layers: storage and exploration, which is how we extract value out of telemetry signals. For example, at the exploration layer, an SRE looks at a dashboard and determines that a particular service needs investigation.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1976px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png&#34;data-srcset=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=320 320w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=550 550w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=750 750w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=900 900w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=1040 1040w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=1240 1240w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;A diagram depicting the layers of telemetry.&#34;&#xA;width=&#34;1976&#34;&#xA;height=&#34;896&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png&#34;&#xA;alt=&#34;A diagram depicting the layers of telemetry.&#34;&#xA;width=&#34;1976&#34;&#xA;height=&#34;896&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;You can get quite complex with all three layers, &lt;a href=&#34;https://opentelemetry.io/blog/2024/otel-collector-anti-patterns/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;particularly the collector layer&lt;/a&gt;, but telemetry solutions usually have something in each category. This is a useful model to help ground what vendor neutrality means in this post, and how you achieve it.&lt;/p&gt;&#xA;&lt;h2 id=&#34;otels-vision-for-vendor-neutrality&#34;&gt;OTel’s vision for vendor neutrality&lt;/h2&gt;&#xA;&lt;p&gt;OTel is very appealing to folks coming from commercial vendors because they&amp;rsquo;ve often been burned by the costs of switching from proprietary instrumentations, agents, and/or collectors. To quote the &lt;a href=&#34;https://opentelemetry.io/community/mission/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OpenTelemetry mission, vision, and values&lt;/a&gt; page (bolded emphasis is ours):&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;em&gt;For decades, &lt;strong&gt;proprietary drop-in agents from monitoring and observability vendors have been the primary source for useful telemetry from across the application stack. Unfortunately, the lack of common standards or APIs across these agents has led to vendor lock-in for customers&lt;/strong&gt;, and inhibited innovation by &lt;strong&gt;tightly coupling telemetry collection with telemetry storage and analysis&lt;/strong&gt;. With OpenTelemetry, we strive to provide a level playing field for all observability providers, avoid lock-in to any vendor, and interoperate with other OSS projects in the telemetry and observability ecosystem.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;There are two key points to draw out of this:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Tight coupling between telemetry collection, storage, and analysis is a bad idea (more on this below).&lt;/li&gt;&#xA;&lt;li&gt;If you use a proprietary drop-in agent that does not conform to standards as a way of gathering telemetry, you will be locked into that vendor. This is because you cannot have a telemetry system without the data, and that vendor is the one way to get that data. That’s vendor lock-in (the opposite of vendor neutrality), in OTel terms.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;Let’s take a deeper look at both of these points.&lt;/p&gt;&#xA;&lt;h3 id=&#34;loose-coupling&#34;&gt;Loose coupling&lt;/h3&gt;&#xA;&lt;p&gt;Tight coupling is something we avoid in all software architecture work, because when system components (such as telemetry collection and exploration) are tightly coupled, your flexibility to choose different options is limited. In other words, tight coupling facilitates lock-in.&lt;/p&gt;&#xA;&lt;p&gt;OpenTelemetry, instead, facilitates “loose coupling,” because the standards and software you use for collection are independent from your backend. That’s a clear win. The way OTel components are built is also loosely coupled; you can use the SDKs without the collector, or a language-specific instrumentation API with a different SDK implementation. You can mix and match the various technical “pieces” of OpenTelemetry (the &lt;a href=&#34;https://opentelemetry.io/docs/languages/php/sdk/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;SDK&lt;/a&gt;, &lt;a href=&#34;https://opentelemetry.io/docs/languages/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;API&lt;/a&gt;, &lt;a href=&#34;https://opentelemetry.io/docs/specs/otel/protocol/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OTLP&lt;/a&gt;, and &lt;a href=&#34;https://opentelemetry.io/docs/collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Collector&lt;/a&gt;) with other implementations.&lt;/p&gt;&#xA;&lt;h3 id=&#34;open-standards&#34;&gt;Open standards&lt;/h3&gt;&#xA;&lt;p&gt;The second point is more complex, but just as important. A “proprietary drop-in agent” is something that represents and transmits telemetry data in a format only one vendor understands. This is where open standards really shine. A community agrees on the &lt;a href=&#34;https://opentelemetry.io/docs/concepts/semantic-conventions/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;semantic conventions&lt;/a&gt; and on the wire representation (&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-proto/blob/main/docs/design-goals.md&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OTLP&lt;/a&gt;). Any open source telemetry collector that supports those things no longer exhibits proprietary lock-in. Two things to note here:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://opensource.org/osd&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Open source means&lt;/a&gt; anyone can contribute, modify, or fork; it cannot be owned by one company.&lt;/li&gt;&#xA;&lt;li&gt;Standards-compliant means the telemetry collector “speaks the agreed upon language” of OpenTelemetry semantics and OTLP.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://opentelemetry.io/docs/collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OTel Collector&lt;/a&gt; is the first and primary telemetry collector that fits this bill, as a reference implementation.&lt;/p&gt;&#xA;&lt;p&gt;Vendor lock-in is the opposite of those two facets: if you can’t fork or modify the collector, and if the collector doesn’t speak an open standard as its language, then you’ll be locked into using that vendor’s tools.&lt;/p&gt;&#xA;&lt;h2 id=&#34;telemetry-backends&#34;&gt;Telemetry backends&lt;/h2&gt;&#xA;&lt;p&gt;So far, we have been talking about sourcing, collecting, and processing telemetry. What about the backend?&lt;/p&gt;&#xA;&lt;p&gt;In any architecture, eventually the data comes out of an OpenTelemetry-compatible collector, and goes into a database somewhere. That database might be &lt;a href=&#34;/oss/loki/&#34;&gt;Grafana Loki&lt;/a&gt; or &lt;a href=&#34;/oss/mimir/&#34;&gt;Mimir&lt;/a&gt;, or it could be Prometheus, Elasticsearch, or something else. This is where vendor neutrality starts to look different.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1270px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png&#34;data-srcset=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=320 320w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=550 550w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=750 750w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=900 900w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=1040 1040w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=1240 1240w, /media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;A diagram depicting how telemetry backends work. &#34;&#xA;width=&#34;1270&#34;&#xA;height=&#34;836&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png&#34;&#xA;alt=&#34;A diagram depicting how telemetry backends work. &#34;&#xA;width=&#34;1270&#34;&#xA;height=&#34;836&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;At this point, it’s no longer about telemetry data being sourced and flowing on the wire — it&amp;rsquo;s about telemetry data at rest in a database. To utilize that telemetry, we’re going to have to pull it out of the database, and slice and dice it with queries. No matter what database you choose, what matters most is the database’s schema and query language. It will likely respect the semantic standards, but you don’t query databases with OTLP.&lt;/p&gt;&#xA;&lt;p&gt;Next, you’ll build some set of dashboards on top of the queries from that database, and you might build alerts and other things, regardless of the vendor you choose. When you do this, you’re out of the OpenTelemetry world, and unavoidably building product-specific resources. If you use &lt;a href=&#34;/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;, even if you’re feeding it with OTel signals, it may not be obvious how to migrate those usage patterns to a different backend, and the same is true for all other observability vendors. This is because there are no industry standards for things like dashboards and telemetry databases to adhere to. And, as stated on the “&lt;a href=&#34;https://opentelemetry.io/docs/what-is-opentelemetry/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;What is OpenTelemetry?&lt;/a&gt;” page, telemetry storage and visualization are beyond the scope of the OTel project (bolded emphasis, again, is ours):&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;strong&gt;OpenTelemetry is not an observability backend&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;like Jaeger, Prometheus, or other commercial vendors. OpenTelemetry is focused on the generation, collection, management, and export of telemetry. A major goal of OpenTelemetry is that you can easily instrument your applications or systems, no matter their language, infrastructure, or runtime environment.&lt;/em&gt; &lt;em&gt;&lt;strong&gt;Crucially, the storage and visualization of telemetry is intentionally left to other tools.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;vendor-neutrality-from-different-angles&#34;&gt;Vendor neutrality from different angles&lt;/h2&gt;&#xA;&lt;p&gt;Implementation effort creates sunk cost, which is a factor in how lock-in happens. In this sense, no technology provides a guarantee you can avoid vendor lock-in completely.&lt;/p&gt;&#xA;&lt;p&gt;OpenTelemetry is about decoupling and providing options in the app/infrastructure layer and collector layer (the first two “layers” of telemetry); the third layer, telemetry backends, is where most teams put in the effort to customize their view. When they do, they have an investment that can be hard to migrate later. It’s like picking a programming language: if you write an app in Go, we wouldn’t say you’re “locked-in” to Go, but in choosing it, you’ve made it harder to decide to rewrite in Rust later.&lt;/p&gt;&#xA;&lt;p&gt;What you get out of telemetry backends comes from your investment: you build visualizations that satisfy your team’s needs. Grafana helps people avoid lock-in by enabling them to build dashboards on top of any database they’d like; you don’t have to use Loki, Mimir, and Tempo. Still, the fundamental remains: implementation effort with any vendor creates customizations, which later limit switching with ease.&lt;/p&gt;&#xA;&lt;p&gt;This is why OpenTelemetry cannot create vendor neutrality at the backend layer, which is a common source of confusion for enterprises implementing it. OpenTelemetry is great, but if you’re architecting a solution, it’s important to understand these nuances around vendor neutrality.&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-maximize-your-options&#34;&gt;How to maximize your options&lt;/h2&gt;&#xA;&lt;h3 id=&#34;start-with-apps-and-traces&#34;&gt;Start with apps and traces&lt;/h3&gt;&#xA;&lt;p&gt;OpenTelemetry comes from roots in tracing and applications, so it is strongest in cases where you’re instrumenting apps that need traces.&lt;/p&gt;&#xA;&lt;p&gt;Using an OpenTelemetry SDK and OpenTelemetry-compatible collectors will decouple telemetry collection from storage and exploration. This can help future-proof your architecture and leave you free to have maximum options at the backend layer.&lt;/p&gt;&#xA;&lt;h3 id=&#34;adopt-in-layers&#34;&gt;Adopt in layers&lt;/h3&gt;&#xA;&lt;p&gt;We previously mentioned that OpenTelemetry components (SDKs, APIs, OTLP) are all loosely coupled, which means that you can pick and choose and adopt “layers” of OpenTelemetry as you go. There is simply no need to jump in all at once; layered adoption builds familiarity and mitigates risk. Standardizing at the protocol level of OTLP, though, might be a good first move, which can be done with an open source telemetry collector that supports OTLP.&lt;/p&gt;&#xA;&lt;p&gt;This will let you pick and choose which language-specific APIs and SDKs make the most sense for your team. As long as they can write OTLP to a remote destination, you are in good shape. The world can be messy, though, and even if you can’t write OTLP directly from the source, often you can get your collector to emit OTLP, regardless of how the telemetry was gathered from the app. Within the app, if you choose to use non-OTel APIs for instrumentation, give preference to those that adhere to the semantic conventions, so you can benefit from tooling built elsewhere in the ecosystem, such as &lt;a href=&#34;/docs/grafana-cloud/monitor-applications/application-observability/&#34;&gt;Grafana Cloud Application Observability&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;h3 id=&#34;ensure-reusable-instrumentation&#34;&gt;Ensure reusable instrumentation&lt;/h3&gt;&#xA;&lt;p&gt;If you’re evaluating different backends, you can use the same instrumentation setup to push telemetry signals to two or more backends. This way, you can do a “bake-off” and evaluate which one is a better fit.&lt;/p&gt;&#xA;&lt;p&gt;Even though you will invest effort to build the solution you need, you still get an extra point of flexibility: upgrades, maintenance, and changes in the telemetry layers are still decoupled, so you can change your collection approach and your backend approach freely without having to rebuild the entire system.&lt;/p&gt;&#xA;&lt;h2 id=&#34;learn-more&#34;&gt;Learn more&lt;/h2&gt;&#xA;&lt;p&gt;OpenTelemetry’s original vision was to break out of the tight coupling found in older observability architectures. It also aimed to provide alternatives to proprietary drop-in agents that made switching telemetry backends difficult. The open source project has delivered on both points, and in this post, our goal was to provide some common-sense guidelines on how you can take advantage of that.&lt;/p&gt;&#xA;&lt;p&gt;To learn more, check out our &lt;a href=&#34;/blog/2023/12/18/opentelemetry-best-practices-a-users-guide-to-getting-started-with-opentelemetry/&#34;&gt;OpenTelemetry best practices&lt;/a&gt; post, as well as our post about &lt;a href=&#34;/blog/2024/01/31/opentelemetry-and-grafana-labs-whats-new-and-whats-next/&#34;&gt;recent milestones in the OpenTelemetry project and community&lt;/a&gt;.&lt;/p&gt;】&lt;p&gt;OpenTelemetry 项目的最大优势之一是其供应商中立性，这是许多社区成员所赞赏的，特别是如果他们花费了大量时间从一个商业供应商迁移到另一个商业供应商的话。供应商中立也恰好是 Grafana Labs 大帐篷理念的核心要素。然而，我们意识到，当涉及到现实世界的用例时，这种中立性可能有其局限性。&lt;/p&gt;&#xA;&lt;p&gt;在这篇文章中，我们将在开源 OpenTelemetry 项目的背景下解释供应商中立性，包括它的开始和结束位置，以及如何利用。&lt;/p&gt;&#xA;&lt;h2 id=&#34;third-key-layers-of-telemetry&#34;&gt;遥测的三个关键层&lt;/h2&gt;&#xA;&lt;p&gt;在我们深入探讨供应商中立性的概念之前，让我们先看一下更大的图景，因为它与遥测和 OpenTelemetry 项目相关。一般来说，遥测方法通常涉及三层：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;应用程序和基础设施&lt;/strong&gt;：这是遥测数据的来源，即我们将观察到的实际事物。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;遥测收集器&lt;/strong&gt;：这是收集、过滤、处理和转发遥测信号的软件。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;遥测后端&lt;/strong&gt;：这可以进一步分为两个层：存储和探索，这是我们从遥测信号中提取价值的方式。例如，在探索层，SRE 查看仪表板并确定特定服务需要调查。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1976px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png&#34;data-srcset=&#34;/media/blog/otel-vendor-neutrality/otel-vendor- Neutrality-telemetry-layers-new.png?w=320 320w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=550 550w，/media/blog/ otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=750 750w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png？ w=900 900w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=1040 1040w，/media/blog/otel-vendor-neutrality/otel-vendor- neutrity-telemetry-layers-new.png?w=1240 1240w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;描绘遥测各层的图表。&#34;&#xA;宽度=“1976”&#xA;高度=“896”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-layers-new.png&#34;&#xA;alt=&#34;描绘遥测层的图表。&#34;&#xA;宽度=“1976”&#xA;高度=“896”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;你可以所有三层都变得相当复杂，&lt;a href=&#34;https://opentelemetry.io/blog/2024/otel-collector-anti-patterns/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;尤其是收集器层&lt;/a&gt;，但遥测解决方案通常在每个类别中都有一些内容。这是一个有用的模型，可以帮助理解本文中供应商中立的含义以及如何实现它。&lt;/p&gt;&#xA;&lt;h2 id=&#34;otels-vision-for-vendor-neutrality&#34;&gt;OTel 的供应商中立愿景&lt;/h2&gt;&#xA;&lt;p&gt;OTel 对于来自商业供应商的人们非常有吸引力，因为他们经常因从专有仪器、代理和/或收集器转换的成本而苦恼。引用 &lt;a href=&#34;https://opentelemetry.io/community/mission/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OpenTelemetry 使命、愿景和价值观&lt;/a&gt;页面（粗体强调是我们的）：&lt;/p&gt;&#xA;&lt;块引用&gt;&#xA;几十年来，来自监控和可观测性供应商的专有嵌入式代理一直是整个应用程序堆栈中有用遥测的主要来源。不幸的是，这些代理缺乏通用标准或 API，导致客户被供应商锁定&lt;/strong&gt;，并通过&lt;strong&gt;将遥测收集与遥测存储和分析紧密耦合来抑制创新。通过 OpenTelemetry，我们努力为所有可观测性提供商提供公平的竞争环境，避免锁定任何供应商，并与遥测和可观测性生态系统中的其他 OSS 项目进行互操作。&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;p&gt;从中可以得出两个关键点：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;遥测收集、存储和分析之间的紧密耦合不是一个好主意（下文将详细介绍）。&lt;/li&gt;&#xA;&lt;li&gt;如果您使用不符合标准的专有嵌入式代理作为收集遥测数据的方式，您将被该供应商锁定。这是因为没有数据就无法拥有遥测系统，而供应商是获取该数据的一种方法。用 OTel 的术语来说，这就是供应商锁定（与供应商中立相反）。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;让我们更深入地研究这两点。&lt;/p&gt;&#xA;&lt;h3 id=&#34;loose-coupling&#34;&gt;松耦合&lt;/h3&gt;&#xA;&lt;p&gt;紧耦合是我们在所有软件架构工作中避免的事情，因为当系统组件（例如遥测收集和探索）紧密耦合时，您选择不同选项的灵活性就会受到限制。换句话说，紧密耦合有利于锁定。&lt;/p&gt;&#xA;&lt;p&gt;相反，OpenTelemetry 促进了“松散耦合”，因为您用于收集的标准和软件独立于后端。这是一场明显的胜利。 OTel 组件的构建方式也是松散耦合的；您可以使用不带收集器的 SDK，或者使用具有不同 SDK 实现的特定于语言的检测 API。您可以混合搭配 OpenTelemetry 的各种技术“部分”（&lt;a href=&#34;https://opentelemetry.io/docs/languages/php/sdk/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;SDK &lt;/a&gt;，&lt;a href=&#34;https://opentelemetry.io/docs/languages/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;API&lt;/a&gt;，&lt;a href=&#34;https://opentelemetry.io/docs/specs/otel/protocol/&#34; 目标=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OTLP&lt;/a&gt; 和&lt;a href=&#34;https://opentelemetry.io/docs/collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;收集器&lt; /a&gt;) 与其他实现。&lt;/p&gt;&#xA;&lt;h3 id=&#34;open-standards&#34;&gt;开放标准&lt;/h3&gt;&#xA;&lt;p&gt;第二点更复杂，但同样重要。 “专有的直接代理”是以只有一个供应商理解的格式表示和传输遥测数据的东西。这就是开放标准真正发挥作用的地方。社区就&lt;a href=&#34;https://opentelemetry.io/docs/concepts/semantic-conventions/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;语义约定&lt;/a&gt;和线路表示达成一致(&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-proto/blob/main/docs/design-goals.md&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OTLP&lt;/a &gt;）。任何支持这些功能的开源遥测收集器都不再表现出专有锁定。这里需要注意两点：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://opensource.org/osd&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;开源意味着&lt;/a&gt;任何人都可以贡献、修改或分叉；它不能归一家公司所有。&lt;/li&gt;&#xA;&lt;li&gt;符合标准意味着遥测收集器“使用 OpenTelemetry 语义和 OTLP 的商定语言”。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://opentelemetry.io/docs/collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;OTel Collector&lt;/a&gt; 是第一个也是主要的符合此要求的遥测收集器，作为参考实现。&lt;/p&gt;&#xA;&lt;p&gt;供应商锁定与这两个方面相反：如果您无法分叉或修改收集器，并且收集器不使用开放标准作为其语言，那么您将被锁定使用该收集器供应商的工具。&lt;/p&gt;&#xA;&lt;h2 id=&#34;telemetry-backends&#34;&gt;遥测后端&lt;/h2&gt;&#xA;&lt;p&gt;到目前为止，我们一直在讨论获取、收集和处理遥测数据。后端怎么样？&lt;/p&gt;&#xA;&lt;p&gt;在任何架构中，最终数据都会从 OpenTelemetry 兼容的收集器中出来，并进入某个数据库。该数据库可能是 &lt;a href=&#34;/oss/loki/&#34;&gt;Grafana Loki&lt;/a&gt; 或 &lt;a href=&#34;/oss/mimir/&#34;&gt;Mimir&lt;/a&gt;，也可能是 Prometheus、Elasticsearch 或其他的东西。这就是供应商中立性开始显得不同的地方。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1270px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png&#34;data-srcset=&#34;/media/blog/otel-vendor-neutrality/otel-vendor- Neutrality-telemetry-backends-new.png?w=320 320w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=550 550w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=750 750w ，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=900 900w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry- backends-new.png?w=1040 1040w，/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png?w=1240 1240w，/media/blog/otel-vendor-中立性/otel-vendor-neutrality-telemetry-backends-new.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;描述遥测后端如何工作的图表。&#34;&#xA;宽度=“1270”&#xA;高度=“836”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/otel-vendor-neutrality/otel-vendor-neutrality-telemetry-backends-new.png&#34;&#xA;alt=&#34;描述遥测后端如何工作的图表。&#34;&#xA;宽度=“1270”&#xA;高度=“836”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;此时，它不再涉及遥测数据的来源和在线路上的流动，而是涉及数据库中静态的遥测数据。为了利用该遥测数据，我们必须将其从数据库中取出，并通过查询对其进行切片和切块。无论您选择什么数据库，最重要的是数据库的架构和查询语言。它可能会尊重语义标准，但您不会使用 OTLP 查询数据库。&lt;/p&gt;&#xA;&lt;p&gt;接下来，您将在该数据库的查询之上构建一些仪表板，并且无论您选择哪个供应商，您都可以构建警报和其他内容。当您这样做时，您就脱离了 OpenTelemetry 世界，并且不可避免地构建特定于产品的资源。如果您使用 &lt;a href=&#34;/products/cloud/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;，即使您向其提供 OTel 信号，如何迁移这些信号也可能并不明显不同后端的使用模式，对于所有其他可观察性供应商来说也是如此。这是因为仪表板和遥测数据库等内容没有可以遵守的行业标准。并且，如“&lt;a href=&#34;https://opentelemetry.io/docs/what-is-opentelemetry/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;什么是 OpenTelemetry？&lt;/a&gt;”中所述页面，遥测存储和可视化超出了 OTel 项目的范围（粗体强调，再次，是我们的）：&lt;/p&gt;&#xA;&lt;块引用&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;strong&gt;OpenTelemetry 不是像 Jaeger、Prometheus 或其他商业供应商那样的可观察性后端&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;。 OpenTelemetry 专注于遥测数据的生成、收集、管理和导出。 OpenTelemetry 的一个主要目标是您可以轻松地检测您的应用程序或系统，无论其语言、基础设施或运行时环境如何。&lt;/em&gt; &lt;em&gt;&lt;strong&gt;至关重要的是，遥测的存储和可视化有意留给其他人工具。&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;h2 id=&#34;vendor-neutrality-from- Different-angles&#34;&gt;不同角度的供应商中立性&lt;/h2&gt;&#xA;&lt;p&gt;实施工作会产生沉没成本，这是影响成功的一个因素w 锁定发生。从这个意义上说，没有任何技术可以保证您可以完全避免供应商锁定。&lt;/p&gt;&#xA;&lt;p&gt;OpenTelemetry 旨在解耦并在应用程序/基础设施层和收集器层（遥测的前两个“层”）中提供选项；第三层，遥测后端，是大多数团队努力定制视图的地方。当他们这样做时，他们的投资以后可能很难迁移。这就像选择一种编程语言：如果你用 Go 编写一个应用程序，我们不会说你“锁定”了 Go，但在选择它时，你就更难决定以后用 Rust 重写。 &lt;/p&gt;&#xA;&lt;p&gt;您从遥测后端获得的收益来自于您的投资：您构建的可视化效果可以满足团队的需求。 Grafana 使人们能够在他们想要的任何数据库之上构建仪表板，从而帮助人们避免锁定；你不必使用 Loki、Mimir 和 Tempo。尽管如此，基本原理仍然是：与任何供应商的实施工作都会创建自定义，这会在以后轻松限制切换。&lt;/p&gt;&#xA;&lt;p&gt;这就是 OpenTelemetry 无法在后端层创建供应商中立性的原因，这是实施它的企业常见的困惑来源。 OpenTelemetry 很棒，但如果您正在构建解决方案，了解供应商中立性的这些细微差别非常重要。&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-maximize-your-options&#34;&gt;如何最大化您的选择&lt;/h2&gt;&#xA;&lt;h3 id=&#34;start-with-apps-and-traces&#34;&gt;从应用和跟踪开始&lt;/h3&gt;&#xA;&lt;p&gt;OpenTelemetry 源于跟踪和应用程序，因此在您检测需要跟踪的应用程序时它是最强大的。&lt;/p&gt;&#xA;&lt;p&gt;使用 OpenTelemetry SDK 和兼容 OpenTelemetry 的收集器会将遥测收集与存储和探索分离。这可以帮助您的架构面向未来，并让您可以在后端层自由地拥有最多的选项。&lt;/p&gt;&#xA;&lt;h3 id=&#34;adopt-in-layers&#34;&gt;分层采用&lt;/h3&gt;&#xA;&lt;p&gt;我们之前提到过 OpenTelemetry 组件（SDK、API、OTLP）都是松散耦合的，这意味着您可以随时挑选和采用 OpenTelemetry 的“层”。根本没有必要一下子全部投入；分层采用可以增强熟悉度并降低风险。不过，在 OTLP 协议级别进行标准化可能是一个不错的第一步，这可以通过支持 OTLP 的开源遥测收集器来完成。&lt;/p&gt;&#xA;&lt;p&gt;这将让您挑选对您的团队最有意义的特定于语言的 API 和 SDK。只要他们可以将 OTLP 写入远程目标，您就处于良好状态。不过，世界可能很混乱，即使您无法直接从源编写 OTLP，通常您也可以让收集器发出 OTLP，无论遥测数据是如何从应用程序收集的。在应用程序中，如果您选择使用非 OTel API 进行检测，请优先选择那些遵守语义约定的 API，这样您就可以从生态系统中其他地方构建的工具中受益，例如ch 为 &lt;a href=&#34;/docs/grafana-cloud/monitor-applications/application-observability/&#34;&gt;Grafana Cloud 应用程序可观察性&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;h3 id=&#34;ensure-reusable-instrumentation&#34;&gt;确保可重复使用的工具&lt;/h3&gt;&#xA;&lt;p&gt;如果您正在评估不同的后端，则可以使用相同的仪器设置将遥测信号推送到两个或更多后端。这样，您就可以进行“烘烤”并评估哪一个更适合。&lt;/p&gt;&#xA;&lt;p&gt;即使您将投入精力来构建所需的解决方案，您仍然可以获得额外的灵活性：遥测层的升级、维护和更改仍然是解耦的，因此您可以更改收集方法和后端方法无需重建整个系统即可自由使用。&lt;/p&gt;&#xA;&lt;h2 id=&#34;learn-more&#34;&gt;了解更多&lt;/h2&gt;&#xA;&lt;p&gt;OpenTelemetry 的最初愿景是打破旧的可观测性架构中的紧密耦合。它还旨在为专有的嵌入式代理提供替代方案，这些代理使切换遥测后端变得困难。该开源项目已经实现了这两点，在这篇文章中，我们的目标是提供一些关于如何利用这一点的常识性指南。&lt;/p&gt;&#xA;&lt;p&gt;要了解更多信息，请查看我们的 &lt;a href=&#34;/blog/2023/12/18/opentelemetry-best-practices-a-users-guide-to-getting-started-with-opentelemetry/&#34;&gt;OpenTelemetry 最佳实践实践&lt;/a&gt;帖子，以及我们关于&lt;a href=&#34;/blog/2024/01/31/opentelemetry-and-grafana-labs-whats-new-and-whats-next/&#34;&gt;近期里程碑的帖子OpenTelemetry 项目和社区&lt;/a&gt;。&lt;/p&gt;</description>
      <pubDate>Thu, 12 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【DDoS protection: Observability, automation, and curiosity】DDoS 防护：可观察性、自动化和好奇心</title>
      <link>https://grafana.com/blog/2024/09/20/ddos-protection-observability-automation-and-curiosity/</link>
      <description>【&lt;p&gt;DDoS (distributed denial of service) attacks have been launched by sophisticated state actors, teenage hackers, and even malicious people with little technical know-how. Their criteria for success is simple: If your service ends up being denied, it&amp;rsquo;s a win.&lt;/p&gt;&#xA;&lt;p&gt;Even if engineers work 24/7 to monitor for attacks, they may only have minutes to respond — and it still may be too late. DDoS mitigation requires an understanding of internet engineering and a lot of forward-thinking.&lt;/p&gt;&#xA;&lt;p&gt;Fortunately, there are ways to use observability and automation as tools to detect and mitigate DDoS attacks. In the latest episode of “Grafana’s Big Tent” podcast, host Matt Toback, Grafana Labs VP of Culture, discusses the topic with Dee Kitchen, Grafana Labs VP of Engineering for Databases (Loki, Mimir, Tempo, Pyroscope), and Alex Forster, an engineering manager at &lt;a href=&#34;https://www.cloudflare.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Cloudflare&lt;/a&gt;, a company whose services include cloud cybersecurity and DDoS mitigation.&lt;/p&gt;&#xA;&lt;p&gt;Forster works on the customer-facing parts of Cloudflare&amp;rsquo;s DDoS mitigation, such as educating the community on how mitigations work and providing visibility into what the mitigations are doing. Fun fact: Kitchen was the engineering manager for the DDoS feature team at Cloudflare before coming to Grafana Labs.&lt;/p&gt;&#xA;&lt;p&gt;You can read some of the show&amp;rsquo;s highlights below, but listen to the full episode to find out more about DDoS and the history of attacks (the first one might be more recent than you think), hear about the big Rapid Reset attack in 2023, and learn about whether it&amp;rsquo;s smart to automate based on third-party data. (&lt;a href=&#34;https://github.com/thechangelog/transcripts/blob/master/bigtent/big-tent-14.md&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;You can also find the full transcript here&lt;/a&gt;.)&lt;/p&gt;&#xA;&lt;iframe width=&#34;100%&#34; height=&#34;180&#34; frameborder=&#34;no&#34; scrolling=&#34;no&#34; seamless=&#34;&#34; src=&#34;https://share.transistor.fm/e/fbe04ac5&#34;&gt;&lt;/iframe&gt;&#xA;&lt;p&gt;&lt;em&gt;Note: The following are highlights from episode 3, season 2 of “Grafana’s Big Tent” podcast. The transcript below has been edited for length and clarity.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;coupling-control-and-observability&#34;&gt;Coupling control and observability&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt Toback:&lt;/strong&gt; Dee, how would you describe what we&amp;rsquo;re talking about today?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee Kitchen:&lt;/strong&gt; I came up with this topic, and it was mainly because it&amp;rsquo;s one that&amp;rsquo;s been lingering for more than a decade. I was thinking of Fail2Ban, a Python program that looks at your logs files and the failed authentication attempts for your SSH logs, web application, or whatever, and then it does some action. Like if it spots three failures from a given IP in a 50 minute window, it will drop in an IP tables rule maybe for 45 minutes. The attacker goes away and it slows everything down.&lt;/p&gt;&#xA;&lt;p&gt;It led me to realize that Fail2Ban is really interesting because it&amp;rsquo;s an observability signal that is directly coupled to a control mechanism in action. It doesn&amp;rsquo;t provide you a dashboard, it doesn&amp;rsquo;t provide you an alert so much — it might send you an email for notifications — but it&amp;rsquo;s just tightly coupling control to observability. I found that interesting because we&amp;rsquo;re in observability, where you go beyond monitoring into having a look at everything and being able to answer any question.&lt;/p&gt;&#xA;&lt;p&gt;But I think there&amp;rsquo;s more beyond that, which is: What do you &lt;em&gt;do&lt;/em&gt; when you can ask any question?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; Do you think that there&amp;rsquo;s a component of observability that, because it came from monitoring, it was less owned by a different group or is less tactical?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; I do think there&amp;rsquo;s this myth that we would go and sit and look at a dashboard all day. We kind of wanna avoid that. You shouldn&amp;rsquo;t need to go to the dashboard — and that&amp;rsquo;s what we&amp;rsquo;ve been saying at Grafana for a while, right? You alert on it; act on it; trigger the actual workflow. But when you&amp;rsquo;re doing ops and you&amp;rsquo;re on-call, when you receive the same critical alert or warning alert and you take the same action, you should automate it away and never look at that dashboard again.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; So if denial of service is self-evident, shouldn&amp;rsquo;t there be this deep fear about making automated observability tools? You could end up blocking traffic yourself as a result of an ill-put tool.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; There&amp;rsquo;s definitely a risk and fear there, but I think the benefits are great because you can sleep at night and not do the ops.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex Forster:&lt;/strong&gt; To frame this in specific terms of DDoS detection and mitigation, we often have other teams inside Cloudflare, or even maybe customers or press, come to us and say, &amp;ldquo;Have you been tracking this attack campaign?&amp;rdquo; or &amp;ldquo;Have you seen some nation state doing this?&amp;rdquo; And the answer is always, &amp;ldquo;Well, we haven&amp;rsquo;t been looking, so we&amp;rsquo;re going to have to go look.&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;We would consider it a failure on our part if we had teams staring at graphs 24/7 in order to pilot our DDoS mitigation systems. That would mean they are not reliable enough to work on their own without a human needing to babysit them. It&amp;rsquo;s not an easy task to get to a place where you can trust your systems to react correctly without human intervention. But you &lt;em&gt;can&lt;/em&gt; get there — and when you do, it is a great place to be.&lt;/p&gt;&#xA;&lt;h2 id=&#34;automation--human-reactions&#34;&gt;Automation &amp;gt; human reactions&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; Observability equals control. Alex, this idea of leveraging automation and not being afraid of what automation can do as it relates to that — is it advisable?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; It&amp;rsquo;s definitely advisable if you can pull it off. It is tricky to get right. For instance, you can automate the take-down of the majority of your capacity, then cause yourself an outage. There&amp;rsquo;s a lot of guardrails that need to be put in place if you&amp;rsquo;re going to automate based on real-time information. That being said, it&amp;rsquo;s the only way to get to really high availability and go from three or four 9s to five and beyond 9s. You need to be able to react faster than a human could, and the only way to do that is with automation.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; In order to do that, you have to have a serious span of control as far as where you can make changes. Does that become challenging from an organization standpoint?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; Absolutely. It depends on the types of systems you run, but the larger you are, the larger a unified control plane gets.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; Three 9s is 43 minutes or thereabouts. When your manager turns around and goes, &amp;ldquo;Three 9s is not good enough, we need four 9s,&amp;rdquo; what that means is that you only get four minutes of downtime per month. Now, most on-call can&amp;rsquo;t answer the actual page. It takes 30 to 60 seconds to actually be enacted, then you have to notice that you have to answer, and you have to keep your laptop out or turn on your computer or quickly rush over. You can&amp;rsquo;t respond in the four minutes that you&amp;rsquo;ve got. You&amp;rsquo;ve gotta remove humans from that decision-making response process, which means you have to automate the hell out of this.&lt;/p&gt;&#xA;&lt;p&gt;All of these observability signals are now available not for a human to understand, but for a human to automate such that a computer can understand that. Because you really want a machine to do this for you, even with the risk.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; I think DDoS is, again, a great example of this. We try to kick in within seconds, not minutes. And of course, you want your DDoS mitigation to kick in quickly, but imagine how you would achieve that if you had to have humans triaging DDoS attacks. SOC analysts wouldn&amp;rsquo;t have enough time to respond in order to keep a really high aggressive SLA.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; The more we automate, the calmer your life is as an ops person. We should be seeking out where to automate continuously everywhere. There are signs of this all over the place, but a lot of engineers don&amp;rsquo;t realize. AWS Auto Scaling is just automation based on those signals, Fail2Ban is an automation based on a signal. Whatever these are, they&amp;rsquo;re all protecting us, protecting our sleep — an important thing.&lt;/p&gt;&#xA;&lt;p&gt;I run my own website, and when I was on holiday, I got a DDoS attack. It was 130,000 HTTP requests in about a five-second window. It knocked me straight offline. It took me ages to figure out that the commonality of all the traffic was this HTTP header that I wasn&amp;rsquo;t logging. Not only wasn&amp;rsquo;t I logging it, but I also didn&amp;rsquo;t have a simple, programmable endpoint that I could block it. I had to write code to block it.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; Alex, pretend Dee doesn&amp;rsquo;t have deep knowledge. How would you help?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; This would be where observability is key. Oftentimes, you need to research these things historically. For instance, if the attack is intermittent and you&amp;rsquo;re not able to catch it in real time, you need to be recording what you need to know ahead of time — even before you see what the attack is doing.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; Or… time travel.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; Yeah, that&amp;rsquo;s the other way out. But this is why I think these things are observability, because observability is a record enough that you can answer all questions, and not just monitor some things that you already know you&amp;rsquo;re gonna ask about.&lt;/p&gt;&#xA;&lt;h2 id=&#34;managing-mitigations-and-planning-for-the-future&#34;&gt;Managing mitigations and planning for the future&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; When you put observability in place, or you start to have automatic mitigations in place, is there a long tail of people trying these things anywhere or everywhere all the time? Or does it feel like a whack-a-mole, where one thing is popular for a bit and then it disappears, and then there&amp;rsquo;s a new thing that&amp;rsquo;s popular?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; It&amp;rsquo;s both. At the cutting edge of this industry, there is a whack-a-mole game going on, but the vast majority of DDoS mitigations are pretty standard methods that are well understood.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; There are tools that someone smart once wrote to launch a certain type of attack — but a lot of other people don&amp;rsquo;t really know how to write such a thing, so they package it. A lot of attacks come from package generators, which means once you&amp;rsquo;ve figured them out and blocked them, you&amp;rsquo;re blocking everything that all of those various tools are using. But there&amp;rsquo;s always more that can be done.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; Alex, when you go to the protocols team and say, &amp;ldquo;We need to instrument this,&amp;rdquo; or &amp;ldquo;We need to start watching this,&amp;rdquo; do you also follow up and say, &amp;ldquo;Now that this has happened, can you think of five more things that we should observing that we&amp;rsquo;re not?&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; Yes! Very much. When we&amp;rsquo;re caught in a situation where we don&amp;rsquo;t have observability of something that we didn&amp;rsquo;t think we needed but actually did, it always makes us step back and say, &amp;ldquo;Where else are our blind spots? Where else could we be collecting data that may come in handy in the future?&amp;rdquo; You don&amp;rsquo;t want to collect data that you are confident that you won&amp;rsquo;t need, but then how can you really ever be confident that you won&amp;rsquo;t need that data? It&amp;rsquo;s usually a gut check.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; I&amp;rsquo;ve heard people talk about putting developers on a &amp;ldquo;data diet,&amp;rdquo; or that they can&amp;rsquo;t log everything because it&amp;rsquo;s far too expensive. This is like that on steroids, isn&amp;rsquo;t it? How do you think about the value of what&amp;rsquo;s worthwhile and what&amp;rsquo;s not, when you have no idea what&amp;rsquo;s worthwhile and what&amp;rsquo;s not . . . until you do?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; There are compromises to be made there. In Cloudflare&amp;rsquo;s case, DDoS protection is core value prop. So for us, it isn&amp;rsquo;t too hard to get resources if we need them, but we still need to justify why we need to record things.&lt;/p&gt;&#xA;&lt;p&gt;One example: Our DDoS mitigation systems act entirely on traffic inbound to our network. It&amp;rsquo;s very hard for us to justify recording information — from a DDoS perspective — &lt;em&gt;leaving&lt;/em&gt; our network. It&amp;rsquo;s not something we need, even though in some cases, maybe for research purposes, it would be interesting. Even when your service is a core part of your business, those sorts of considerations do come into play.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; Dee, how do we think about it here at Grafana Labs?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; Tensions, trade-offs. On one hand you want to observe everything. And then at some point in time, we ask, &amp;ldquo;How much does the Loki team logging cost us?&amp;rdquo; You&amp;rsquo;ve gotta make judgment calls, and sometimes you turn around and see something you &lt;em&gt;are&lt;/em&gt; logging and go, maybe I will never, ever need that.&lt;/p&gt;&#xA;&lt;p&gt;The question about control is an interesting one because it gives you a context to ask, &amp;ldquo;Is this valuable? Are you ever gonna use this to drive something? Would you use it to scale something out? Does it tell you some signal?&amp;rdquo; If it doesn&amp;rsquo;t, perhaps you don&amp;rsquo;t need it.&lt;/p&gt;&#xA;&lt;h2 id=&#34;what-individuals-should-be-logging-and-observing&#34;&gt;What individuals should be logging and observing&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; In terms of observability, if someone is running their own network or endpoints service, where is a practical place to start?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; Cover your basics. Your most important systems should be logging. If they&amp;rsquo;re network gear, you should be collecting SNMP counters. If they are Linux services, you should be collecting CPU and memory usage data, and you should be storing it. Even in giant distributed systems, those are some of the most common places we go to troubleshoot.&lt;/p&gt;&#xA;&lt;p&gt;If you are specifically developing software and you have control over what sorts of metrics a system is outputting, you are going to want to put some thought into observing any place where you could imagine something spinning out or taking too long, and adding instrumentation there. It will make your life as a developer much easier. But if you are a systems administrator or network engineer working on third-party or other software you do not control, make sure you have the basics there.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; Ability to get PCAPs, ability to get logs off of absolutely every machine will help. But let&amp;rsquo;s go for the most common ones. I would argue for being able to have a gateway ahead — sort of internet-facing to your website stuff, where you can log every single aspect of a HTTP request and everything that&amp;rsquo;s going on, and that provides a control point there as well. You need the observability and the control plane basically in one, ahead of your service. Decoupling them is gonna put you at risk.&lt;/p&gt;&#xA;&lt;h2 id=&#34;rate-limits-as-the-gateway-into-automating&#34;&gt;Rate limits as the gateway into automating&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; How do you start automating?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; Well, a simple way is a rate limit. It takes a signal and counts it, just like the Failed2Ban one at the very beginning of the conversation. Figure out what your threshold is for &amp;ldquo;normal&amp;rdquo; and set the rate limit above, and that&amp;rsquo;s your first automated defense. And if that never fires, great. That five minutes costs you nothing. But it will fire.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; I would fully endorse that, and having a positive security model, which includes rate limiting and includes firewalling off things that shouldn&amp;rsquo;t be accessible. Understanding what &amp;ldquo;normal&amp;rdquo; is so you won&amp;rsquo;t allow your systems to go out of the range is the most significant and probably easiest thing you can do to harden yourself up. You also want to implement them in a way that won&amp;rsquo;t infect your good traffic.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; We need to explain what a positive security model is. The default model on the internet — which presumes trust and everything is good and was &lt;em&gt;not&lt;/em&gt; built for security — is allow everything unless someone is explicitly denied. That&amp;rsquo;s crazy. You need to switch this more towards &lt;em&gt;deny everything unless it is explicitly allowed&lt;/em&gt;. Most people can understand that a single web server is not doing more than 20,000 requests per second, so you can immediately go, &amp;ldquo;If it&amp;rsquo;s above a few &lt;em&gt;hundred&lt;/em&gt; requests per second on a single server and I am not a huge website, that&amp;rsquo;s a good, safe rate limit.&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; Sure. But I take that and say use the observability you already have, or the metrics you&amp;rsquo;ve already been collecting, as a stepped approach to informing what&amp;rsquo;s normal and how you should make decisions around that. Of course there&amp;rsquo;s gonna be outliers, but those could be the first places where you start.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; I had a manager once, the CTO, and he would come up to me and ask, &amp;ldquo;Is everything good at the moment?&amp;rdquo; It&amp;rsquo;s a terrifying question &amp;lsquo;cause you can&amp;rsquo;t possibly answer &amp;ldquo;yes&amp;rdquo; to it, because what if he knows something that you don&amp;rsquo;t know? Writing dashboards that show you how to answer yes is a really good way of highlighting most of the observability of a system to the point where you can confidently say, &amp;ldquo;Nothing is wrong. We know what normal is.&amp;rdquo; It&amp;rsquo;s a good way to lay a foundation to being able to spot bad.&lt;/p&gt;&#xA;&lt;h2 id=&#34;the-power-of-curiosity&#34;&gt;The power of curiosity&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt:&lt;/strong&gt; How do you remain informed and how do you continue to get smarter about this subject as time goes on?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee:&lt;/strong&gt; I think curiosity is everything — asking, &amp;ldquo;How did that happen?&amp;rdquo; And this is the same with any incident on-call, right? It&amp;rsquo;s not enough to go, &amp;ldquo;When we scale up, it solves the problem.&amp;rdquo; Do you understand what happened and why? And if you go down that rabbit hole, we become better engineers.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; I agree with that completely. There are two forcing functions that are going to make you get observability into your systems. One of them is pride and curiosity in yourself as an engineer. The other is angry customers yelling at you and telling you to fix what you run. I would suggest being the former so that when the latter happens, you&amp;rsquo;re prepared.&lt;/p&gt;&#xA;&lt;p&gt;I don&amp;rsquo;t think the work is as much as people think it is, and it will pay off in the long run, even if you don&amp;rsquo;t know exactly when. Having a curious mind into these observability spaces is really an all-around positive for you as an engineer.&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;“Grafana’s Big Tent” podcast wants to hear from you. If you have a great story to share, want to join the conversation, or have any feedback, please contact the Big Tent team at &lt;a href=&#34;/blog/2024/08/23/grafanas-big-tent-podcast-season-2-is-here/bigtent@grafana.com&#34;&gt;bigtent@grafana.com&lt;/a&gt;. You can also catch up on the first and second season of “Grafana’s Big Tent” on &lt;a href=&#34;https://podcasts.apple.com/us/podcast/grafanas-big-tent/id1616725129&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Apple Podcasts&lt;/a&gt; and &lt;a href=&#34;https://open.spotify.com/show/3beQvS8to0rYs1gxOnPrfD?si=bf046f54fe214615&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Spotify&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;】&lt;p&gt;DDoS（分布式拒绝服务）攻击是由经验丰富的国家行为者、青少年黑客，甚至缺乏技术知识的恶意人员发起的。他们的成功标准很简单：如果您的服务最终被拒绝，那就是胜利。&lt;/p&gt;&#xA;&lt;p&gt;即使工程师全天候 (24/7) 监控攻击，他们也可能只有几分钟的时间做出响应，而且可能仍然为时已晚。缓解 DDoS 需要了解互联网工程和大量的前瞻性思维。&lt;/p&gt;&#xA;&lt;p&gt;幸运的是，有一些方法可以使用可观察性和自动化作为检测和缓解 DDoS 攻击的工具。在最新一集的“Grafana&#39;s Big Tent”播客中，主持人 Grafana Labs 文化副总裁 Matt Toback 与 Grafana Labs 数据库工程副总裁 Dee Kitchen（Loki、Mimir、Tempo、Pyrscope）和 Alex Forster 讨论了该主题， &lt;a href=&#34;https://www.cloudflare.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Cloudflare&lt;/a&gt; 的工程经理，该公司的服务包括云网络安全和 DDoS 缓解。&lt; /p&gt;&#xA;&lt;p&gt;Forster 致力于 Cloudflare DDoS 缓解措施中面向客户的部分，例如向社区宣传缓解措施的工作原理以及提供缓解措施正在执行的操作的可见性。有趣的事实：Kitchen 在加入 Grafana Labs 之前曾担任 Cloudflare DDoS 功能团队的工程经理。&lt;/p&gt;&#xA;&lt;p&gt;您可以阅读下面的一些节目亮点，但请收听完整剧集，了解有关 DDoS 和攻击历史的更多信息（第一个可能比您想象的更新），了解大型快速重置攻击2023 年，了解基于第三方数据的自动化是否明智。 (&lt;a href=&#34;https://github.com/thechangelog/transcripts/blob/master/bigtent/big-tent-14.md&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;您还可以找到完整的文字记录在此&lt;/a&gt;。）&lt;/p&gt;&#xA;&lt;iframe width =“100％”height =“180”frameborder =“no”滚动=“no”无缝=“”src =“https://share.transistor.fm/e/fbe04ac5”&gt; &lt;/ iframe&gt;&#xA;&lt;p&gt;&lt;em&gt;注意：以下是“Grafana’s Big Tent”播客第二季第 3 集的精彩片段。为了长度和清晰度，下面的文字记录已经过编辑。&lt;/em&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;coupling-control-and-observability&#34;&gt;耦合控制和可观察性&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt Toback：&lt;/strong&gt;Dee，你会如何描述我们今天谈论的内容？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee Kitchen：&lt;/strong&gt;我提出这个话题，主要是因为这个话题已经持续了十多年了。我想到了 Fail2Ban，这是一个 Python 程序，它会查看您的日志文件以及 SSH 日志、Web 应用程序或其他内容的失败身份验证尝试，然后执行一些操作。就像如果它在 50 分钟内发现给定 IP 的三个故障，它可能会在 IP 表规则中删除 45 分钟。攻击者消失，一切都会变慢。&lt;/p&gt;&#xA;&lt;p&gt;这让我意识到 Fail2Ban 真的很有趣，因为它是一个观察者直接耦合到运行中的控制机制的可用性信号。它不会为您提供仪表板，也不会为您提供太多警报 - 它可能会向您发送一封电子邮件以进行通知 - 但它只是将控制与可观察性紧密耦合。我发现这很有趣，因为我们处于可观察性状态，您不仅可以监视，还可以查看所有内容并能够回答任何问题。&lt;/p&gt;&#xA;&lt;p&gt;但我认为除此之外还有更多内容，那就是：当你可以提出任何问题时，你会做什么？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;您是否认为可观察性的一个组成部分，因为它来自监控，所以较少由不同的团体拥有或较少具有战术性？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;我确实认为有这样一种神话，即我们会整天坐着看仪表板。我们有点想避免这种情况。你不应该需要去仪表板——这就是我们在 Grafana 一段时间以来一直在说的，对吧？你对此发出警报；采取行动；触发实际的工作流程。但是，当您进行操作并待命时，当您收到相同的严重警报或警告警报并采取相同的操作时，您应该将其自动化，并且永远不要再查看该仪表板。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;因此，如果拒绝服务是不言而喻的，那么难道不应该对制作自动化可观测工具产生深深的恐惧吗？由于使用不当的工具，您最终可能会自己阻塞流量。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;这肯定存在风险和恐惧，但我认为好处很大，因为你可以在晚上睡觉而不做手术。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex Forster：&lt;/strong&gt;为了从 DDoS 检测和缓解的具体角度来阐述这一点，我们经常在 Cloudflare 内部有其他团队，甚至可能是客户或媒体，来找我们说：“您有没有追踪这次攻击活动？”或“你见过某个民族国家这样做吗？”答案总是，“好吧，我们还没找过，所以我们必须去看看。”&lt;/p&gt;&#xA;&lt;p&gt;如果我们的团队每天 24/7 盯着图表来试验我们的 DDoS 缓解系统，我们会认为这是我们的失败。这意味着它们不够可靠，无法在没有人类照顾的情况下自行工作。要达到一个可以相信您的系统无需人工干预即可正确反应的位置并不是一件容易的事。但你&lt;em&gt;可以&lt;/em&gt;到达那里 - 当你到达那里时，这是一个很棒的地方。&lt;/p&gt;&#xA;&lt;h2 id=&#34;automation-- human-reactions&#34;&gt;自动化 &gt; 人类反应&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;可观察性等于控制力。亚历克斯，这种利用自动化的想法，而不是害怕自动化可以做什么，因为它与此相关 - 这是可取的吗？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;如果你能成功的话，这绝对是明智的选择。要做到正确是很困难的。例如，您可以自动化 take-down 了您的大部分容量，然后导致停机。如果您要基于实时信息实现自动化，则需要设置很多防护栏。话虽这么说，这是获得真正高可用性并从三个或四个 9 增加到五个甚至更多 9 的唯一方法。您需要能够比人类更快地做出反应，而实现这一点的唯一方法就是自动化。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;为了做到这一点，您必须严格控制可以进行更改的范围。从组织的角度来看，这会变得具有挑战性吗？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;亚历克斯：&lt;/strong&gt;当然。这取决于您运行的系统类型，但系统规模越大，统一控制平面就越大。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;三个 9 大约是 43 分钟。当你的经理转身说“三个 9 还不够，我们需要四个 9”时，这意味着你每个月只有四分钟的停机时间。现在，大多数待命人员无法接听实际的寻呼。真正颁布需要30到60秒，然后你必须注意到你必须回答，你必须把你的笔记本电脑放在外面或打开你的电脑或快速冲过去。您无法在四分钟内做出回应。你必须将人类从决策响应过程中剔除，这意味着你必须实现自动化。&lt;/p&gt;&#xA;&lt;p&gt;所有这些可观察性信号现在都不是可供人类理解的，而是可供人类自动化以便计算机可以理解的。因为你确实希望有一台机器为你做这件事，即使有风险。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;我认为 DDoS 再次是一个很好的例子。我们尝试在几秒钟内启动，而不是几分钟。当然，您希望 DDoS 缓解措施能够快速发挥作用，但想象一下，如果必须让人对 DDoS 攻击进行分类，您将如何实现这一目标。 SOC 分析师没有足够的时间做出响应，以保持非常高的积极性 SLA。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;我们的自动化程度越高，作为运维人员的生活就越平静。我们应该寻找在各地持续实现自动化的地方。到处都有这种迹象，但很多工程师没有意识到。 AWS Auto Scaling 只是基于这些信号的自动化，Fail2Ban 是基于信号的自动化。无论这些是什么，它们都在保护我们，保护我们的睡眠——这是一件很重要的事情。&lt;/p&gt;&#xA;&lt;p&gt;我经营自己的网站，当我度假时，我遭到了 DDoS 攻击。大约 5 秒的窗口内有 130,000 个 HTTP 请求。这让我直接掉线了。我花了很长时间才发现所有流量的共同点就是我没有记录的 HTTP 标头。我不仅没有记录它，而且我也没有一个简单的、可编程的端点来阻止它。我必须编写代码来阻止它。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;马特：&lt;/strong&gt;啤酒x，假装迪伊没有深厚的知识。你会如何帮忙？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;这就是可观察性的关键所在。很多时候，你需要对这些事情进行历史研究。例如，如果攻击是间歇性的，并且您无法实时捕获它，则您需要提前记录您需要了解的内容 - 甚至在您看到攻击正在做什么之前。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;马特：&lt;/strong&gt;或者……时间旅行。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;是的，那是另一种出路。但这就是为什么我认为这些东西是可观察性的，因为可观察性是一个足够的记录，你可以回答所有问题，而不仅仅是监控一些你已经知道你要问的事情。&lt;/p&gt;&#xA;&lt;h2 id=&#34;managing-mitigations-and-planning-for-the-future&#34;&gt;管理缓解措施并规划未来&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;当你设置可观察性，或者开始设置自动缓解措施时，是否会有大量的人随时随地尝试这些事情？还是感觉就像打地鼠一样，一种东西流行了一段时间，然后就消失了，然后又流行了一种新东西？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;亚历克斯：&lt;/strong&gt;两者都是。在这个行业的最前沿，正在进行一场打地鼠游戏，但绝大多数 DDoS 缓解措施都是非常容易理解的标准方法。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;聪明的人曾经编写过一些工具来发起某种类型的攻击 - 但很多其他人并不真正知道如何编写这样的东西，所以他们将其打包。许多攻击来自包生成器，这意味着一旦您找出并阻止它们，您就阻止了所有这些不同工具正在使用的所有内容。但总有更多事情可以做。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt; Alex，当你去协议团队说“我们需要对此进行检测”或“我们需要开始观察这个”时，你是否也会跟进并说， “既然这件事已经发生了，你能想到还有五件我们应该观察但我们没有观察到的事情吗？”&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;亚历克斯：&lt;/strong&gt;是的！非常。当我们陷入一种无法观察到我们认为不需要但实际上需要的东西的情况时，它总是让我们退后一步说：“我们的盲点还在哪里？我们还能在哪里收集未来可能派上用场的数据呢？”您不想收集您确信自己不需要的数据，但是您如何才能真正确信自己不需要这些数据呢？这通常是一次肠道检查。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;我听说人们谈论让开发人员进行“数据节食”，或者说他们无法记录所有内容，因为这太昂贵了。这就像类固醇一样，不是吗？t？当你不知道什么是值得的、什么是不值得的时，你如何看待什么是值得的、什么是不值得的。 。 。直到你这样做？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;这方面需要做出一些妥协。就 Cloudflare 而言，DDoS 防护是核心价值支柱。所以对于我们来说，如果我们需要的话，获得资源并不是太难，但我们仍然需要证明为什么我们需要记录东西。&lt;/p&gt;&#xA;&lt;p&gt;一个示例：我们的 DDoS 缓解系统完全针对传入我们网络的流量起作用。从 DDoS 的角度来看，我们很难证明记录信息离开我们的网络是合理的。这不是我们需要的东西，尽管在某些情况下，也许出于研究目的，它会很有趣。即使您的服务是您业务的核心部分，这些考虑因素也会发挥作用。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;Dee，Grafana Labs 对此有何看法？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;紧张、权衡。一方面你想观察一切。然后在某个时间点，我们会问：“Loki 团队的日志记录花费了我们多少钱？”你必须做出判断，有时你转身看到你正在记录的东西然后走开，也许我永远不会需要它。&lt;/p&gt;&#xA;&lt;p&gt;关于控制的问题是一个有趣的问题，因为它为你提供了一个背景来问：“这有价值吗？你会用它来驱动东西吗？你会用它来扩展一些东西吗？它会告诉你一些信号吗？”如果没有，也许您不需要它。&lt;/p&gt;&#xA;&lt;h2 id=&#34;what-individuals-should-be-logging-and-observing&#34;&gt;个人应该记录和观察哪些内容&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;就可观察性而言，如果有人运行自己的网络或端点服务，那么实用的起点是什么？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;介绍您的基础知识。您最重要的系统应该是日志记录。如果它们是网络设备，您应该收集 SNMP 计数器。如果它们是 Linux 服务，您应该收集 CPU 和内存使用数据，并且应该存储它。即使在巨大的分布式系统中，这些也是我们最常进行故障排除的地方。&lt;/p&gt;&#xA;&lt;p&gt;如果您专门开发软件并且可以控制系统输出的指标类型，那么您将需要花一些心思来观察任何您可能想象到的东西会旋转或花费太长时间的地方，并添加那里有仪器仪表。它将使您作为开发人员的生活变得更加轻松。但是，如果您是系统管理员或网络工程师，正在开发第三方或您无法控制的其他软件，请确保您具备相关基础知识。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;能够获得 PCAP，能够从每台机器上获取日志都会有所帮助。但让我们来看看最常见的。我主张能够提前拥有一个网关——有点像面向互联网的网络站点内容，您可以在其中记录 HTTP 请求的每个方面以及正在发生的所有事情，并且还提供了一个控制点。在提供服务之前，您需要将可观察性和控制平面基本上合二为一。将它们脱钩会让你面临风险。&lt;/p&gt;&#xA;&lt;h2 id=&#34;rate-limits-as-the-gateway-into-automating&#34;&gt;速率限制作为自动化的门户&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;您如何开始自动化？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;嗯，一个简单的方法是速率限制。它接收一个信号并对其进行计数，就像对话一开始时的 Failed2Ban 信号一样。找出“正常”的阈值并设置上述速率限制，这就是您的第一个自动防御。如果那永远不会发生，那就太好了。这五分钟对你来说没有任何花费。但它会火。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;我完全赞同这一点，并拥有积极的安全模型，其中包括速率限制和防火墙阻止不应访问的内容。了解什么是“正常”，这样你就不会允许你的系统超出范围，这是你可以做的最重要也是最简单的事情来强化自己。您还希望以不会影响良好流量的方式实施它们。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;我们需要解释什么是积极的安全模型。互联网上的默认模型（假设信任并且一切都很好，并且不是为了安全而构建的）是允许一切，除非有人明确拒绝。这太疯狂了。您需要将其更多地转向&lt;em&gt;拒绝一切，除非明确允许&lt;/em&gt;。大多数人都可以理解，单个 Web 服务器每秒处理的请求不会超过 20,000 个，因此您可以立即说：“如果单个服务器上每秒处理的请求超过几百个，而我不会一个巨大的网站，这是一个很好、安全的速率限制。”&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;马特：&lt;/strong&gt;当然。但我认为，使用你已经拥有的可观察性，或者你已经收集的指标，作为一种逐步的方法来告知什么是正常的以及你应该如何围绕它做出决策。当然会有异常值，但这些可能是你首先开始的地方。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;我曾经有一位经理，即首席技术官，他会走过来问我：“目前一切都好吗？”这是一个可怕的问题，因为你不可能回答“是”，因为如果他知道你不知道的事情怎么办？编写向您展示如何回答“是”的仪表板是一种非常好的方法，可以突出系统的大部分可观察性，使您可以自信地说：“没有任何问题。我们知道什么是正常。”这是为发现不良情况奠定基础的好方法。&lt;/p&gt;&#xA;&lt;h2 id=&#34;the-power-of-curiosity&#34;&gt;好奇心的力量&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Matt：&lt;/strong&gt;随着时间的推移，您如何保持信息灵通以及如何在这个主题上继续变得更加聪明？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Dee：&lt;/strong&gt;我认为好奇心就是一切——问“这是怎么发生的？”这与任何待命事件都是一样的，对吗？仅仅“当我们扩大规模时，就能解决问题”是不够的。你明白发生了什么以及为什么吗？如果你深入那个兔子洞，我们就会成为更好的工程师。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;亚历克斯：&lt;/strong&gt;我完全同意这一点。有两个强制功能将使您的系统具有可观察性。其中之一是对自己作为一名工程师的自豪感和好奇心。另一种是愤怒的客户对你大喊大叫并告诉你要解决你所运行的问题。我建议是前者，这样当后者发生时，你就做好了准备。&lt;/p&gt;&#xA;&lt;p&gt;我认为这项工作并不像人们想象的那么多，而且从长远来看它会得到回报，即使你不知道确切的时间。作为一名工程师，对这些可观察空间保持好奇心确实是一个全面的积极因素。&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;“Grafana 的大帐篷”播客希望收到您的来信。如果您有精彩的故事要分享、想要加入对话或有任何反馈，请联系 Big Tent 团队：&lt;a href=&#34;/blog/2024/08/23/grafanas-big-tent-podcast-season -2-is-here/bigtent@grafana.com&#34;&gt;bigtent@grafana.com&lt;/a&gt;。您还可以在 &lt;a href=&#34;https://podcasts.apple.com/us/podcast/grafanas-big-tent/id1616725129&#34; target=&#34;_blank&#34; 上观看《Grafana&#39;s Big Tent》第一季和第二季rel=&#34;noopener noreferrer&#34;&gt;Apple 播客&lt;/a&gt; 和 &lt;a href=&#34;https://open.spotify.com/show/3beQvS8to0rYs1gxOnP​​rfD?si=bf046f54fe214615&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Spotify &lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;</description>
      <pubDate>Fri, 20 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【Incident management that actually makes sense: SLOs, error budgets, and blameless reviews】真正有意义的事件管理：SLO、错误预算和无过失的审查</title>
      <link>https://grafana.com/blog/2024/09/06/incident-management-that-actually-makes-sense-slos-error-budgets-and-blameless-reviews/</link>
      <description>【&lt;p&gt;Incident response is about more than just putting out fires. Yes, there are definitely those all-hands-on-deck moments when an incident arises. But you also need a structure in place ahead of time to provide the right information to the right people when they need it — while still avoiding alert fatigue. Plus, you need a culture that actually encourages people to continually improve what&amp;rsquo;s in place without just pointing fingers.&lt;/p&gt;&#xA;&lt;p&gt;That&amp;rsquo;s the focus of the latest episode of &amp;ldquo;Grafana&amp;rsquo;s Big Tent&amp;rdquo; podcast, hosted by Tom Wilkie, Grafana Labs CTO, and Mat Ryer, Grafana Labs Engineering Director. The pair is joined by Devin Cheevers, Grafana Labs Product Director, and Alexander Koehler, Senior SRE at &lt;a href=&#34;https://prezi.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Prezi&lt;/a&gt;, a video and visual communications software company.&lt;/p&gt;&#xA;&lt;p&gt;Alex&amp;rsquo;s team is responsible for platform provisioning and on-call coverage, and it turns out the way they operate has a lot in common with how we handle incident response and management at Grafana Labs. You can read some of the highlights below, but listen to the full episode to hear the quartet discuss things in more detail. Plus, you&amp;rsquo;ll get to hear each of them describe the worst incident they ever caused, and you&amp;rsquo;ll get random musings about who is actually an AI bot (Devin: definitely not; Tom: maybe?), the perils of gravity, and why this podcast is the &lt;a href=&#34;https://en.wikipedia.org/wiki/Marvel_Cinematic_Universe&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;MCU&lt;/a&gt; of observability.&lt;/p&gt;&#xA;&lt;iframe width=&#34;100%&#34; height=&#34;180&#34; frameborder=&#34;no&#34; scrolling=&#34;no&#34; seamless=&#34;&#34; src=&#34;https://share.transistor.fm/e/58352b7c&#34;&gt;&lt;/iframe&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;em&gt;Note: The following are highlights from episode 2, season 2 of “Grafana’s Big Tent” podcast. The transcript below has been edited for length and clarity.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;common-ground-on-centralization&#34;&gt;Common ground on centralization&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex Koehler:&lt;/strong&gt; We are big believers of &amp;ldquo;you build it, you run it.&amp;rdquo; Every team has its own on-call rotation and maintains the services they write. There&amp;rsquo;s also an additional group, which we call SRE that&amp;rsquo;s more like an infrastructure or platform team, and we are also available 24 hours a day, seven days a week to manage AWS issues or to help the developers debug stuff.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Devin Cheevers:&lt;/strong&gt; What has the history of that team been at Prezi?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; They started in the past to provide a platform for the developers as a golden path to production, so to say. They provide unique resources and deploy in the same way, so that every service looks at least 80% the same. And the platform team is there to manage the underlying infrastructure, to make sure that the deployment engine is working and to look at cost control. And we provide central tooling like logging, an alerting stack, and a monitoring stack, and access management to our developers.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom Wilkie:&lt;/strong&gt; This sounds very familiar to Grafana Labs. We have a central platform team doing very similar sets of responsibilities — looking after our infrastructure, and our costs, and our observability stack as well. So it&amp;rsquo;s good to meet someone else who follows the same pattern.&lt;/p&gt;&#xA;&lt;h2 id=&#34;slos-error-budgets-and-flexibility-for-failure&#34;&gt;SLOs, error budgets, and flexibility for failure&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat Ryer:&lt;/strong&gt; What&amp;rsquo;s the appetite for risk then at Prezi?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; Every team has an error budget and is allowed to act inside this budget, and deploy small batches, and deploy fast and early. But when it comes to bigger changes on an infrastructure level, we are a little bit conservative.&lt;/p&gt;&#xA;&lt;p&gt;For example, if you update a Kubernetes cluster on AWS, there is only one way, and it&amp;rsquo;s: Update the version and be happy or not. But on the application level, we are quite flexible and fast. So it&amp;rsquo;s a mixed approach.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat:&lt;/strong&gt; For some things you do need to be more careful, but it is nice as an engineer to innovate and do things. And error budgets are great; we do have an &lt;a href=&#34;/blog/2022/04/18/service-level-objectives-how-slos-have-changed-the-business-of-observability/&#34;&gt;episode on SLOs in season one&lt;/a&gt;, for anyone interested. We dig into what error budgets are, and how to use them. It&amp;rsquo;s great.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Do you think engineers think about the error budgets on a day-to-day basis? Or do you think it&amp;rsquo;s more of a release management or engineering leadership thing?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; It&amp;rsquo;s a fail-safe mechanism. I don&amp;rsquo;t think the application developers think about error budgets the whole day. But it brings them back to reality when they mess up.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat:&lt;/strong&gt; Just knowing that there&amp;rsquo;s an error budget, being in a culture where there is an error budget I think is enough, because it tells you, &amp;ldquo;Look, it&amp;rsquo;s OK. Do things.&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Failure is tolerated.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat:&lt;/strong&gt; Yeah, exactly.&lt;/p&gt;&#xA;&lt;h2 id=&#34;alert-fatigue-and-a-lack-of-proper-context&#34;&gt;Alert fatigue and a lack of proper context&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; We have error alerts on fast burn rate for error budget. So imagine you have one hour of error budget left, and you will burn it within half an hour. You get an alert, and I think that&amp;rsquo;s also part of the fast feedback cycle for developers, to just make them aware that when they do something, it has consequences.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Would you say that&amp;rsquo;s the primary source of your paging alerts at Prezi?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; I don&amp;rsquo;t have any statistics, but we get a lot of alerts about error-budget burn rate.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; One of the things I really love about SLOs is they&amp;rsquo;ve got a really good signal-to-noise ratio. If they do alert, something&amp;rsquo;s really wrong, and you really do have to go and look at it.&lt;/p&gt;&#xA;&lt;p&gt;The downside of these kinds of alerts though is they really lack context. They&amp;rsquo;re gonna tell you &amp;ldquo;You&amp;rsquo;re about to break your SLO on this service,&amp;rdquo; but they&amp;rsquo;re not going to tell you why. So how do you tackle that problem?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; That&amp;rsquo;s an issue for us as well. The current SLO setup was done by infrastructure engineers, and they are pretty service-focused. So we have alerts on every microservice we run, and that&amp;rsquo;s not user-facing. So we get an alert, for example, that an authentication service is broken, but what does this mean for the customer? And is there an effect on our paying customers as well, or not?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; We make this distinction internally between critical alerts that will page someone and warning alerts that basically just go to Slack. And I&amp;rsquo;m sure, like every company, you&amp;rsquo;ve got a Slack channel somewhere with thousands of warning level alerts going off, that you&amp;rsquo;ve trained all your engineers to ignore, basically. Often I find the context for that critical alert is going off somewhere in that warning Slack channel. But unfortunately, it&amp;rsquo;s very, very hard to find.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; The Prezi culture is &amp;ldquo;all hands on deck&amp;rdquo; when a certain criticality is reached. So we distinguish between SSH warning alerts, and critical alerts. And that brings different parts of the company together, and looking at the things, and that&amp;rsquo;s better than being alone and trying to decide, &amp;ldquo;Is this now a critical incident or not?&amp;rdquo;&lt;/p&gt;&#xA;&lt;h2 id=&#34;understanding-the-value-of-blameless-post-incident-reviews&#34;&gt;Understanding the value of blameless post-incident reviews&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; With incidents and outages, the main thing is how you handle it afterwards: how you get the team together, how you honestly discuss what the problem was, and how you make sure you victimize and blame the person that caused it and fire them immediately. That&amp;rsquo;s really what the culture should be. Sorry, I guess the British sarcasm doesn&amp;rsquo;t come across on a podcast.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; I was at an enterprise company earlier in my career, and I actually did that exact thing you described. They had operations meetings every morning at 9, and then the vice president was there, and you had to explain what happened during the night. And that was so frustrating because every time someone or something went wrong you had to go up there and explain yourself. And that was not blameless, that&amp;rsquo;s for sure.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; It&amp;rsquo;s so important to have that blameless post-mortem culture. Otherwise you&amp;rsquo;re never actually going to discover what went wrong, and you won&amp;rsquo;t discover it quickly, and you won&amp;rsquo;t be able to have that kind of open conversation about preventing it in the future. If you&amp;rsquo;re just pointing fingers, it&amp;rsquo;s horrible.&lt;/p&gt;&#xA;&lt;p&gt;We have this enviable problem in some teams now in Grafana Labs, where it&amp;rsquo;s a bit like that scene from &amp;ldquo;Life of Brian&amp;rdquo; where everyone goes &amp;ldquo;I&amp;rsquo;m Brian. No, I&amp;rsquo;m Brian. I&amp;rsquo;m Brian, and so is my wife.&amp;rdquo; Everyone wants to take responsibility for the incident, because there&amp;rsquo;s this culture of like &amp;ldquo;No, this is how I did wrong, and how we can make it better in the future&amp;rdquo;, and it&amp;rsquo;s so healthy.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; It also encourages people to actually change things and not wait for someone else to change things, or wait for a longer period. Right now you have to be quick and adapt to changing market situations, and release new features, and so on. If you have a culture of fear, then you will lose track pretty soon.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Yes, exactly. A culture of fear is just discouraging people from making changes. And in today&amp;rsquo;s world, your ability to move quickly, change quickly, and accept change is really what means you survive. So I guess it goes without saying, you have a similar blame-free post-mortem culture at Prezi.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; Yeah. After every incident we have, we just come together and collect all the necessary information, the useful information, and conduct a post-mortem. We try to be blameless, and record what went well, where we have been lucky, where we could improve, and so on.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Mat, so you actually started the Grafana Incident tool internally at Grafana Labs, and what we&amp;rsquo;re talking about here was one of your motivations, wasn&amp;rsquo;t it?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat:&lt;/strong&gt; Yeah, exactly. If you look at the tool today, you&amp;rsquo;ll see that we really sort of celebrate the people that are dealing with the incident. Forget blameless, we&amp;rsquo;re almost like celebrating the people that are getting stuck in and doing things, and finding the places where we can break it. And then if you have good post-incident reviews, you&amp;rsquo;re getting in there and following up.&lt;/p&gt;&#xA;&lt;h2 id=&#34;spreading-the-pain&#34;&gt;Spreading the pain&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Devin:&lt;/strong&gt; So the blameless thing is great. I&amp;rsquo;ve been part of a number of companies that have that. But what about the kind of natural phase or rhythm that I&amp;rsquo;ve seen happen, which is: You release the project or product, you go a couple of quarters focused on feature work, and then you get to a place where you&amp;rsquo;re like &amp;ldquo;Listen, we need to focus on reliability a little bit more this month, or the next few months.&amp;rdquo; But how do you go back and represent that to the business? How do you go to the business and say, &amp;ldquo;Listen, we want to focus on reliability. Here&amp;rsquo;s the value.&amp;rdquo;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; I can represent the business in this situation, right? Tell me why you need to go in and focus on or give a higher focus to reliability? Do you have data that shows your SLO performance has been poor? Do you have data that shows your latencies are high, or high customer churn because experience with the product due to reliability is low? We were talking about error budgets earlier. Are you seeing that you&amp;rsquo;re routinely breaching your error budget? How many incidents a day, a week, a month are you having? All of this kind of data can really help motivate these problems…&lt;/p&gt;&#xA;&lt;p&gt;I feel very deeply about a bottom-up DevOps culture where it should be up to the individual product teams, the individual engineering teams to decide what the most important priority is. And if they come to me and say &amp;ldquo;I want to focus on reliability,&amp;rdquo; of course I&amp;rsquo;m going to try and accommodate that.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; As an engineer it&amp;rsquo;s not only about reliability, it&amp;rsquo;s also about maintenance. You have to update your libraries, you have to make sure you&amp;rsquo;re using the latest OpenSSL library, or any other tool you use. So maybe it goes hand in hand, working on reliability and working on maintenance. And in my mind, it comes down to this: 20% for every week or month or quarter, just work on foundational things before they hit you in the back. Because when you don&amp;rsquo;t do that, they will come after you at some point.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Well, hopefully no one&amp;rsquo;s gonna come after you…&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat:&lt;/strong&gt; Consequences will.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; You can also look at the amount of time you&amp;rsquo;re having to spend on toil. If it&amp;rsquo;s updating dependencies, or it&amp;rsquo;s manually adjusting the scaling on your service — the kind of manual labor that could be automated.. And literally, go and measure the tag tickets, or PRs into your repo as toil or not toil, and present the ratio of those.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; One thing which is cool in managed Kubernetes, they force you to update. When you run vanilla Kubernetes, you just install it and you&amp;rsquo;re good to go, and it runs basically forever. But with managed Kubernetes, they force you — for example for AWS, every three months — to just update. And when you don&amp;rsquo;t do that, at a point in time they update it for you, and then stuff breaks. So that basically drives you to do it.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Yeah. And there&amp;rsquo;s other cool things you can do in those situations. We put a limit on the age of the binaries that are allowed into production. So you can&amp;rsquo;t run a binary that&amp;rsquo;s like three months old. You&amp;rsquo;re just not allowed to. The system stops you. And this forces you to have a recent build.&lt;/p&gt;&#xA;&lt;p&gt;And given that you know you&amp;rsquo;re gonna have to do this very frequently, why not have a CI system building it for you, why not have a CD system doing the automatic deployment for you, and why not have to worry about all of this? And use something like Dependabot, or Renovate Bot to make sure your dependency is always up to date.&lt;/p&gt;&#xA;&lt;p&gt;I would say these kinds of things should be relatively easy to justify with data. It&amp;rsquo;s just a case of gathering that data can sometimes be quite painful… But yeah, knowing the right data to gather, like number of issues that are tagged with toil, number of incidents, SLO performance, or error budget, these kinds of things.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat:&lt;/strong&gt; Yeah, I like that approach where you put the tooling in place, and you sort of put these gates in place. And the earlier you do that, the better. You make it completely everyday normal stuff. And then it becomes easy. It&amp;rsquo;s very difficult if you try to do all this stuff manually.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Especially with dependency updates, right? &lt;a href=&#34;https://github.com/dependabot&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Dependabot&lt;/a&gt; has really changed the game here, because if I was only updating my dependencies when there was a major CVE, I wouldn&amp;rsquo;t be doing it that frequently, which means I&amp;rsquo;d have to learn how to do it each time&amp;hellip; And if I&amp;rsquo;m on some old major version, and I&amp;rsquo;m having to move to a new major version, that might actually involve rewriting some of my code. That might actually be painful. Whereas if I&amp;rsquo;ve taken that pain and I&amp;rsquo;ve spread it out over lots of small increments, every day or every week for the past six months, and got the team used to doing it, got everyone comfortable with the idea that we&amp;rsquo;re just always going to be on the latest version, then hopefully we&amp;rsquo;ve made it more predictable, we&amp;rsquo;ve made it less stressful, we&amp;rsquo;ve kind of taken the edge off of it.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat:&lt;/strong&gt; I like that also, for just releasing main. I love projects where you can just release main. You can only really do it if you&amp;rsquo;ve got amazing test coverage, basically; that&amp;rsquo;s the trick to do it. But if you do have that, and if you trust your tests that much, the freedom you have is just great. And of course, it&amp;rsquo;s a trade-off. There&amp;rsquo;ll be times when you wish &amp;ndash; you know, &amp;ldquo;This is a bad idea. This feels like a bad idea.&amp;rdquo; But yeah, I agree. Spread the pain out, I love that point. Spread the pain out. It&amp;rsquo;s necessary anyway.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; That&amp;rsquo;s my motto for life.&lt;/p&gt;&#xA;&lt;h2 id=&#34;migrating-to-grafana-oncall-and-the-importance-of-simplicity&#34;&gt;Migrating to Grafana OnCall, and the importance of simplicity&lt;/h2&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;em&gt;Note: Read &lt;a href=&#34;/blog/2023/09/15/inside-prezis-cost-saving-switch-to-grafana-alerting-grafana-oncall-and-grafana-incident-from-pagerduty/&#34;&gt;Alex&amp;rsquo;s blog post&lt;/a&gt; for more details about Prezi&amp;rsquo;s switch from PagerDuty to Grafana IRM, which includes Grafana Incident and Grafana OnCall.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; We started using Grafana Cloud for ingesting logs in 2022, and in that process we discovered that we could have the same features we used in PagerDuty in &lt;a href=&#34;/products/cloud/oncall/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana OnCall&lt;/a&gt;, without additional costs, which is a huge saving for us.&lt;/p&gt;&#xA;&lt;p&gt;And we&amp;rsquo;re quite happy with that, because it just works. And I think our engineers love it, because it gives them the same features. And as I mentioned earlier, we gave them the responsibility for planning their on-call shifts. Before they had to do it in Terraform and get approval from an SRE, and then they had to run Terraform. And that&amp;rsquo;s hard to keep the transparency in Terraform, or what the shifts are looking like.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; Very cool. And how&amp;rsquo;s the experience with the tool been so far? Have you enjoyed it?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; We really like it. Also, it gives us one UI to go into and have a look at our logs. And then, if something is wrong, have a look at our alerts and get the escalation there. So it&amp;rsquo;s basically one tool for more features. We even increased our usage with the Grafana Incident recently.&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom:&lt;/strong&gt; So I think one of the things we&amp;rsquo;re always keen to talk about, one of the things we&amp;rsquo;re always keen to understand with users is where do you want to go with this tool?&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex:&lt;/strong&gt; The more time I see Grafana OnCall and &lt;a href=&#34;/products/cloud/irm/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana IRM&lt;/a&gt;, the more stressful it is. And that&amp;rsquo;s not because the product is bad, because you only look there to just be paged when you have been paged. What my wish is just that the tool stays simple, in terms of just usable, and not be over complex, and be friendly for our engineers that are not quite often doing on-call work.&lt;/p&gt;&#xA;&lt;p&gt;I spoke about the different teams having responsibility for their tools, and there are actually teams that are quite often Grafana OnCall users because their services are producing errors and are quite important. But there are other teams there that are not in there quite as often. So if the product stays usable for them as well, that is a big, big plus.&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;“Grafana’s Big Tent” podcast wants to hear from you. If you have a great story to share, want to join the conversation, or have any feedback, please contact the Big Tent team at&lt;a href=&#34;/blog/2024/08/23/grafanas-big-tent-podcast-season-2-is-here/bigtent@grafana.com&#34;&gt; bigtent@grafana.com&lt;/a&gt;. You can also catch up on the first and second season of “Grafana’s Big Tent” on &lt;a href=&#34;https://podcasts.apple.com/us/podcast/grafanas-big-tent/id1616725129&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Apple Podcasts&lt;/a&gt; and &lt;a href=&#34;https://open.spotify.com/show/3beQvS8to0rYs1gxOnPrfD?si=bf046f54fe214615&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Spotify&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;】&lt;p&gt;事件响应不仅仅是扑灭火灾。是的，当事件发生时，肯定会有所有人齐心协力的时刻。但您还需要提前建立一个结构，以便在正确的人员需要时向他们提供正确的信息，同时仍然避免警报疲劳。另外，您需要一种真正鼓励人们不断改进现有内容而不仅仅是指责的文化。&lt;/p&gt;&#xA;&lt;p&gt;这是最新一集“Grafana’s Big Tent”播客的焦点，由 Grafana Labs 首席技术官 Tom Wilkie 和 Grafana Labs 工程总监 Mat Ryer 主持。 Grafana Labs 产品总监 Devin Cheevers 和 &lt;a href=&#34;https://prezi.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Prezi&lt;/a 的高级 SRE Alexander Koehler 也加入了这对团队&gt;，一家视频和视觉通信软件公司。&lt;/p&gt;&#xA;&lt;p&gt;Alex 的团队负责平台配置和随叫随到的覆盖范围，事实证明他们的运作方式与我们在 Grafana Labs 处理事件响应和管理的方式有很多共同点。您可以阅读下面的一些重点内容，但也可以收听整集，以听到四人组更详细地讨论事情。另外，你会听到他们每个人描述他们所造成的最严重的事件，你会随机思考谁实际上是人工智能机器人（德文：绝对不是；汤姆：也许？），重力的危险，以及为什么这个播客是可观察性的&lt;a href=&#34;https://en.wikipedia.org/wiki/Marvel_Cinematic_Universe&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;MCU&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;iframe width =“100％”height =“180”frameborder =“否”滚动=“否”无缝=“”src =“https://share.transistor.fm/e/58352b7c”&gt; &lt;/ iframe&gt;&#xA;&lt;块引用&gt;&#xA;&lt;p&gt;&lt;em&gt;注意：以下是“Grafana’s Big Tent”播客第二季第二集的精彩片段。为了长度和清晰度，下面的文字记录已经过编辑。&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;h2 id=&#34;common-ground-on-centralization&#34;&gt;集中化的共同点&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex Koehler：&lt;/strong&gt;我们坚信“你构建它，你运行它”。每个团队都有自己的待命轮换并维护他们编写的服务。还有一个额外的小组，我们称之为 SRE，它更像是基础设施或平台团队，我们还每周 7 天、每天 24 小时为您服务，以管理 AWS 问题或帮助开发人员调试内容。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Devin Cheevers：&lt;/strong&gt;这支球队在 Prezi 的历史是什么？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;他们从过去开始为开发人员提供一个平台，可以说是生产的黄金途径。它们提供独特的资源并以相同的方式部署，因此每个服务看起来至少 80% 相同。平台团队负责管理底层基础设施，确保部署引擎正常运行并关注成本控制。我们提供中央工具，如日志记录、警报堆栈和监控工具粘性，以及对我们开发人员的访问管理。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom Wilkie&lt;/strong&gt;：这对 Grafana Labs 来说听起来非常熟悉。我们有一个中央平台团队，承担着非常相似的职责——照顾我们的基础设施、我们的成本以及我们的可观察性堆栈。因此，很高兴遇到遵循相同模式的人。&lt;/p&gt;&#xA;&lt;h2 id=&#34;slos-error-budgets-and-flexibility-for-failure&#34;&gt;SLO、错误预算和故障灵活性&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat Ryer：&lt;/strong&gt;Prezi 的风险偏好是什么？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;每个团队都有一个错误预算，并且可以在这个预算范围内采取行动，小批量部署，并快速、尽早地部署。但当涉及到基础设施层面的更大变化时，我们有点保守。&lt;/p&gt;&#xA;&lt;p&gt;例如，如果你更新AWS上的Kubernetes集群，只有一种方法，那就是：更新版本，高兴不高兴。但在应用层面，我们是相当灵活和快速的。所以这是一种混合方法。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat：&lt;/strong&gt;对于某些事情，你需要更加小心，但作为一名工程师，创新和做事是很好的。而且错误预算也很大；我们确实有&lt;a href=&#34;/blog/2022/04/18/service-level-objectives-how-slos-have-changed-the-business-of-observability/&#34;&gt;第一季中有关于 SLO 的一集&lt;/ a&gt;，对于任何有兴趣的人。我们深入研究什么是错误预算以及如何使用它们。太棒了。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;您认为工程师每天都会考虑错误预算吗？或者您认为这更多的是发布管理或工程领导力的事情？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;这是一种故障安全机制。我认为应用程序开发人员不会整天考虑错误预算。但当他们陷入困境时，它会让他们回到现实。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat：&lt;/strong&gt;只要知道存在错误预算，生活在存在错误预算的文化中，我认为就足够了，因为它告诉你，“看，没关系。做事。”&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;失败是可以容忍的。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat：&lt;/strong&gt;是的，完全正确。&lt;/p&gt;&#xA;&lt;h2 id=&#34;alert-fatigue-and-a-lack-of-proper-context&#34;&gt;警报疲劳且缺乏适当的上下文&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;我们针对错误预算的快速消耗率提供了错误警报。因此，假设您还剩下一小时的错误预算，您将在半小时内将其烧毁。你会收到警报，我认为这也是开发人员快速反馈周期的一部分，让他们意识到当他们做某事时，就会产生后果。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;您认为这是 Prezi 寻呼警报的主要来源吗？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;我没有任何统计数据，但我们收到了很多关于错误预算消耗率的警报。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;我真正喜欢 SLO 的原因之一是它们具有非常好的信噪比。如果他们确实警觉了，那么事情确实不对劲，你真的必须去看看。&lt;/p&gt;&#xA;&lt;p&gt;此类警报的缺点是它们确实缺乏上下文。他们会告诉你“你即将打破这项服务的 SLO”，但他们不会告诉你原因。那么如何解决这个问题呢？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;这对我们来说也是一个问题。当前的 SLO 设置是由基础设施工程师完成的，他们非常注重服务。因此，我们对运行的每个微服务都有警报，但这不是面向用户的。例如，我们收到一个警报，身份验证服务已损坏，但这对客户意味着什么？对我们的付费客户是否也会产生影响？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;我们在内部对寻呼某人的严重警报和基本上只发送到 Slack 的警告警报进行了区分。我确信，像每家公司一样，你在某处有一个 Slack 通道，其中有数千个警告级别的警报，你已经训练所有工程师基本上忽略这些警报。我经常发现该严重警报的上下文在警告 Slack 通道中的某个地方消失了。但不幸的是，它非常非常难找到。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;当达到一定的临界点时，Prezi 文化就是“全力以赴”。因此，我们区分 SSH 警告警报和严重警报。这将公司的不同部门聚集在一起，审视问题，这比独自一人试图决定“这是否是一个重大事件？”要好。&lt;/p&gt;&#xA;&lt;h2 id=&#34;understanding-the-value-of-blameless-post-incident-reviews&#34;&gt;了解无可指责的事件后评论的价值&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;对于事故和中断，最重要的是事后如何处理：如何让团队团结起来，如何诚实地讨论问题所在，以及如何确保自己成为受害者并责怪造成此事的人并立即解雇他们。这确实是文化应该有的样子。抱歉，我想英国人的讽刺不会出现在播客上。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;我在职业生涯的早期曾在一家企业公司工作，实际上我确实做了你所描述的事情。他们每天早上 9 点召开运营会议，然后副总裁也在场，你必须解释晚上发生的事情。这太令人沮丧了，因为每次有人或某事出错时，你都必须站出来解释自己。这并不是无可指责的，这是肯定的。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;拥有一种无可指责的事后文化非常重要。否则，你永远不会真正发现出了什么问题，也不会很快发现它，而且你将来也无法进行那种关于预防问题的公开对话。如果你只是指点手指发麻，太可怕了。&lt;/p&gt;&#xA;&lt;p&gt;我们现在在 Grafana Labs 的一些团队中遇到了这个令人羡慕的问题，这有点像《布莱恩的一生》中的场景，每个人都说“我是布莱恩。不，我是布莱恩。我是布莱恩，我的妻子也是。”每个人都想对这一事件承担责任，因为有一种文化，比如“不，这就是我做错的事情，以及我们将来如何做得更好”，这是非常健康的。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;它还鼓励人们真正改变事情，而不是等待别人改变事情，或者等待更长的时间。现在你必须快速适应不断变化的市场情况，并发布新功能等等。如果你有恐惧文化，那么你很快就会迷失方向。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;是的，完全正确。恐惧文化只会阻碍人们做出改变。在当今世界，快速行动、快速改变和接受改变的能力才是你生存的真正意义。所以我想不言而喻，Prezi 也有类似的无责备事后文化。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;亚历克斯：&lt;/strong&gt;是的。每次发生事件后，我们都会聚集在一起，收集所有必要的信息、有用的信息，并进行事后分析。我们努力做到无可指责，并记录哪些进展顺利，哪些地方幸运，哪些地方可以改进，等等。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;Mat，所以您实际上是在 Grafana Labs 内部启动了 Grafana Incident 工具，我们在这里讨论的是您的动机之一，不是吗？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat：&lt;/strong&gt;是的，完全正确。如果您今天查看该工具，您会发现我们确实对处理该事件的人员表示庆祝。忘记无可指责，我们几乎就像庆祝那些陷入困境并做事的人，并找到我们可以打破它的地方。然后，如果您在事件发生后获得良好的评价，您就会参与其中并进行跟进。&lt;/p&gt;&#xA;&lt;h2 id=&#34;spreading-the-pain&#34;&gt;传播痛苦&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Devin：&lt;/strong&gt;所以无可指责的事情是伟大的。我曾加入过许多拥有此功能的公司。但是我所看到的那种自然阶段或节奏呢？即：你发布项目或产品，你用几个季度专注于功能工作，然后你就到达了你喜欢的地方“听着，我们这个月或接下来的几个月需要更多地关注可靠性。”但你如何回去向企业展示这一点呢？你如何走进企业并说：“听着，我们希望关注可靠性。这就是价值。”&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;在这种情况下我可以代表企业，对吧？告诉我为什么您需要关注或更加关注可靠性？您是否有数据表明您的 SLO 性能已达到恩穷吗？您是否有数据表明您的延迟很高，或者客户流失率很高，因为产品的可靠性较低，导致用户体验不佳？我们之前讨论过错误预算。您是否发现自己经常超出错误预算？您每天、每周、每月发生多少次事件？所有此类数据确实可以帮助激发这些问题......&lt;/p&gt;&#xA;&lt;p&gt;我对自下而上的 DevOps 文化感触很深，在这种文化中，应该由各个产品团队、各个工程团队来决定最重要的优先事项是什么。如果他们来找我说“我想专注于可靠性”，我当然会尝试适应这一点。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;作为一名工程师，这不仅涉及可靠性，还涉及维护。您必须更新您的库，必须确保您使用的是最新的 OpenSSL 库或您使用的任何其他工具。所以也许它是齐头并进的，致力于可靠性和维护。在我看来，归结为：每周、每月或每季度 20%，只做基础性的事情，以免它们对你造成打击。因为如果你不这样做，他们就会在某个时候来追杀你。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;好吧，希望没有人会追随你......&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat：&lt;/strong&gt;后果将会。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;您还可以查看您必须花费在辛苦工作上的时间。如果它正在更新依赖项，或者它正在手动调整服务的扩展 - 一种可以自动化的体力劳动。从字面上看，去测量标签票证，或者将 PR 放入您的存储库中，作为辛苦或不辛苦的工作，并呈现其比例。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;托管 Kubernetes 中很酷的一件事是，它们强制您进行更新。当你运行普通 Kubernetes 时，你只需安装它就可以了，它基本上会永远运行。但对于托管 Kubernetes，它们会迫使您（例如对于 AWS，每三个月）进行更新。当你不这样做时，他们会在某个时间点为你更新它，然后就会出现问题。所以这基本上会驱使你去做这件事。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;是的。在这些情况下，您还可以做其他很酷的事情。我们对允许投入生产的二进制文件的寿命进行了限制。所以你不能运行三个月前的二进制文件。你只是不被允许这样做。系统阻止你。这迫使您拥有最近的版本。&lt;/p&gt;&#xA;&lt;p&gt;鉴于您知道您必须经常执行此操作，为什么不让 CI 系统为您构建它，为什么不让 CD 系统为您自动部署，为什么不用担心所有这一切？并使用 Dependabot 或 Renovate Bot 等工具来确保您的依赖项始终是最新的。&lt;/p&gt;&#xA;&lt;p&gt;我想说这类事情应该是比较e的易于用数据来证明。只是收集数据有时会非常痛苦……但是，是的，知道要收集的正确数据，例如标记为辛苦的问题数量、事件数量、SLO 性能或错误预算，诸如此类。 &lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat：&lt;/strong&gt;是的，我喜欢这种方法，将工具放置到位，然后将这些门放置到位。越早这样做越好。你让它变得完全日常正常的东西。然后就变得容易了。如果您尝试手动完成所有这些工作，这是非常困难的。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;尤其是依赖项更新，对吧？ &lt;a href=&#34;https://github.com/dependabot&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Dependabot&lt;/a&gt; 确实改变了这里的游戏，因为如果我只在存在时更新我的​​依赖项一个主要的 CVE，我不会那么频繁地这样做，这意味着我每次都必须学习如何做……如果我使用的是某个旧的主要版本，并且我必须迁移到新的版本主要版本，这实际上可能涉及重写我的一些代码。这实际上可能很痛苦。然而，如果我承受了这种痛苦，并且在过去的六个月里每天或每周，将其分散到很多小的增量中，并且让团队习惯这样做，那么每个人都会对我们的想法感到满意。我们总是会使用最新版本，那么希望我们已经让它变得更加可预测，我们已经减轻了压力，我们已经减轻了它的优势。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Mat：&lt;/strong&gt;我也喜欢这样，因为刚刚发布了 main.c 文件。我喜欢那些你可以直接发布 main 的项目。基本上，只有当你有惊人的测试覆盖率时，你才能真正做到这一点；这就是做到这一点的技巧。但如果你确实有这样的能力，并且你非常相信你的测试，那么你所拥有的自由就是巨大的。当然，这是一种权衡。有时你会希望——你知道，“这是一个坏主意。这感觉是个坏主意。”但是，是的，我同意。分散痛苦，我喜欢这一点。分散痛苦。反正是有必要的。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;这是我的人生座右铭。&lt;/p&gt;&#xA;&lt;h2 id=&#34;migration-to-grafana-oncall-and-the-importance-of-simplicity&#34;&gt;迁移到 Grafana OnCall 以及简单性的重要性&lt;/h2&gt;&#xA;&lt;块引用&gt;&#xA;&lt;p&gt;&lt;em&gt;注意：阅读&lt;a href=&#34;/blog/2023/09/15/inside-prezis-cost- saving-switch-to-grafana-alerting-grafana-oncall-and-grafana-incident-from -pagerduty/&#34;&gt;Alex 的博客文章&lt;/a&gt;，了解有关 Prezi 从 PagerDuty 切换到 Grafana IRM（包括 Grafana Incident 和 Grafana OnCall）的更多详细信息。&lt;/em&gt;&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;我们从 2022 年开始使用 Grafana Cloud 来提取日志，在此过程中我们发现我们可以在 &lt;a href=&#34;/products/cloud 中使用 PagerDuty 中使用的相同功能/oncall/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana OnCall&lt;/a&gt;，无广告额外的成本，这对我们来说是一笔巨大的节省。&lt;/p&gt;&#xA;&lt;p&gt;我们对此非常满意，因为它确实有效。我认为我们的工程师喜欢它，因为它为他们提供了相同的功能。正如我之前提到的，我们让他们负责计划值班轮班。之前他们必须在 Terraform 中进行操作并获得 SRE 的批准，然后他们必须运行 Terraform。而且很难保持 Terraform 的透明度，或者变化的样子。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;汤姆：&lt;/strong&gt;非常酷。到目前为止，该工具的使用体验如何？你喜欢它吗？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;亚历克斯：&lt;/strong&gt;我们真的很喜欢它。此外，它还为我们提供了一个用户界面来进入并查看我们的日志。然后，如果出现问题，请查看我们的警报并在那里升级。所以它基本上是一种具有更多功能的工具。最近，我们甚至因 Grafana 事件而增加了使用量。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Tom：&lt;/strong&gt;所以我认为我们一直热衷于谈论的事情之一，我们一直热衷于与用户了解的事情之一就是您想将其发展到哪里工具？&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Alex：&lt;/strong&gt;我看到 Grafana OnCall 和 &lt;a href=&#34;/products/cloud/irm/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana IRM&lt;/a&gt; 的时间越多，压力更大。这并不是因为产品不好，而是因为当你被寻呼时，你才去看那里，只是为了被寻呼。我的愿望只是该工具保持简单，就可用而言，而不是过于复杂，并对我们不经常进行待命工作的工程师友好。&lt;/p&gt;&#xA;&lt;p&gt;我谈到了不同的团队对其工具负责，实际上有些团队经常是 Grafana OnCall 用户，因为他们的服务会产生错误并且非常重要。但还有其他球队不那么频繁地参加比赛。因此，如果产品对他们来说也仍然可用，那就是一个很大的优势。&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;“Grafana 的大帐篷”播客希望收到您的来信。如果您有精彩的故事要分享、想要加入对话或有任何反馈，请联系 Big Tent 团队：&lt;a href=&#34;/blog/2024/08/23/grafanas-big-tent-podcast-season -2-is-here/bigtent@grafana.com&#34;&gt;bigtent@grafana.com&lt;/a&gt;。您还可以在 &lt;a href=&#34;https://podcasts.apple.com/us/podcast/grafanas-big-tent/id1616725129&#34; target=&#34;_blank&#34; 上观看《Grafana&#39;s Big Tent》第一季和第二季rel=&#34;noopener noreferrer&#34;&gt;Apple 播客&lt;/a&gt; 和 &lt;a href=&#34;https://open.spotify.com/show/3beQvS8to0rYs1gxOnP​​rfD?si=bf046f54fe214615&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Spotify &lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;</description>
      <pubDate>Fri, 06 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【Grafana access management: How to use teams for seamless user and permission management】Grafana 访问管理：如何使用团队进行无缝用户和权限管理</title>
      <link>https://grafana.com/blog/2024/09/10/grafana-access-management-how-to-use-teams-for-seamless-user-and-permission-management/</link>
      <description>【&lt;p&gt;If you&amp;rsquo;re looking to simplify user access and permissions in your Grafana instance, then this blog post is for you.That&amp;rsquo;s because we&amp;rsquo;re going to walk through how to set up a streamlined system for managing user permissions with Grafana teams.&lt;/p&gt;&#xA;&lt;p&gt;We’ll focus on &lt;a href=&#34;https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-id&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Entra ID&lt;/a&gt; (formerly Azure Active Directory) as our user repository and identity provider, but these steps can be adapted to other identity providers as well, including Okta and Keycloak.&lt;/p&gt;&#xA;&lt;p&gt;The features discussed in this post are available in every Grafana Cloud plan (including our &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;forever-free tier&lt;/a&gt;) and Grafana Enterprise. And ultimately, our goal will be to default to isolation while maintaining the ability to add optional sharing. We&amp;rsquo;ll cover how to:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;Establish a direct link:&lt;/strong&gt; Synchronize your existing user directory with Grafana, automatically populating teams within the platform.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Map teams to resources:&lt;/strong&gt; Effortlessly map Grafana teams to dedicated folders, ensuring each team has a workspace for their dashboards and resources.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;why-we-recommend-teams-over-organizations-and-custom-roles&#34;&gt;Why we recommend teams over organizations and custom roles&lt;/h2&gt;&#xA;&lt;p&gt;While Grafana offers various organizational structures (e.g. teams, organizations, custom roles), at Grafana Labs we advocate for using teams for multiple reasons.&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Organizations&lt;/strong&gt; offer rigid isolation, which can often lead to data silos and hinder collaboration and transparency, especially in environments with overlapping projects and team structures.&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Custom roles&lt;/strong&gt;, while flexible in defining permissions, can become complex to manage and may still fall short in fostering the level of collaboration needed in dynamic environments. They are best used for creating highly privileged users that do not have a shared domain with other users.&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Teams&lt;/strong&gt;, on the other hand, offer the right balance:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Transparency and collaboration.&lt;/strong&gt; Easily share dashboards and data between teams working on related projects.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Controlled isolation.&lt;/strong&gt; Restrict access to sensitive information, ensuring data security.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Data source and other resource permissions&lt;/strong&gt;. Allow teams to manage access to specific data sources, enhancing control without sacrificing collaboration.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Label-based access control&lt;/strong&gt;: Simplify and streamline permission management using labels, making it easier to maintain a secure and efficient environment.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;To learn more about this topic, check out our blog post on using &lt;a href=&#34;/blog/2022/03/14/how-to-best-organize-your-teams-and-resources-in-grafana/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;teams or organizations&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;h2 id=&#34;configure-your-instance&#34;&gt;Configure your instance&lt;/h2&gt;&#xA;&lt;p&gt;Now that we&amp;rsquo;ve walked through why we think you should use this approach, let&amp;rsquo;s walk through how to actually implement it.&lt;/p&gt;&#xA;&lt;h3 id=&#34;map-your-users-to-none-role&#34;&gt;Map your users to &amp;lsquo;None&amp;rsquo; role&lt;/h3&gt;&#xA;&lt;p&gt;When using Entra ID, assign all users to a “None” role. This will remove default access to every new dashboard and folder, so you can build users’ permissions from the ground up.&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; When using other identity providers you can set the role attribute path to &amp;ldquo;None&amp;rdquo; to map every user to role None. Make sure to set up some extra rules for your admin users. For example, when using GitLab, follow the &lt;a href=&#34;/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/gitlab/?pg=blog&amp;amp;plcmt=body-txt#role-mapping-examples&#34;&gt;provided documentation&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h3 id=&#34;ensure-external-group-synchronization-is-correctly-configured&#34;&gt;Ensure external group synchronization is correctly configured&lt;/h3&gt;&#xA;&lt;p&gt;When using Entra ID, external group synchronization should work as is, without needing extra configuration.&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; When using other identity providers, the &lt;a href=&#34;/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;single sign on documentation&lt;/a&gt; will help ensure group claims are present when logging in.&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;Check out our recent blog post about &lt;a href=&#34;/blog/2024/07/31/an-overview-of-grafana-sso-benefits-recent-updates-and-best-practices-to-get-started/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;how to set up your SSO configuration&lt;/a&gt;&lt;a href=&#34;/blog/2024/07/31/an-overview-of-grafana-sso-benefits-recent-updates-and-best-practices-to-get-started&#34;&gt;&lt;/a&gt; for more information.&lt;/p&gt;&#xA;&lt;h2 id=&#34;create-teams&#34;&gt;Create teams&lt;/h2&gt;&#xA;&lt;p&gt;Begin by creating your teams in Grafana. You can do this through the Grafana UI, the public API, or Terraform.&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; We recommend using Terraform, as it enables easy state management and scalability for your setup. However, this represents a more advanced use case, so we&amp;rsquo;ll explore this option more at the end of this post.&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1872px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/access-management-teams/teams.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/access-management-teams/teams.png&#34;data-srcset=&#34;/media/blog/access-management-teams/teams.png?w=320 320w, /media/blog/access-management-teams/teams.png?w=550 550w, /media/blog/access-management-teams/teams.png?w=750 750w, /media/blog/access-management-teams/teams.png?w=900 900w, /media/blog/access-management-teams/teams.png?w=1040 1040w, /media/blog/access-management-teams/teams.png?w=1240 1240w, /media/blog/access-management-teams/teams.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Team selector menu&#34;&#xA;width=&#34;1872&#34;&#xA;height=&#34;946&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/access-management-teams/teams.png&#34;&#xA;alt=&#34;Team selector menu&#34;&#xA;width=&#34;1872&#34;&#xA;height=&#34;946&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Under &lt;strong&gt;Administration&lt;/strong&gt; &amp;gt; &lt;strong&gt;Users and access&lt;/strong&gt; &amp;gt; &lt;strong&gt;Teams&lt;/strong&gt;, you can select the &lt;strong&gt;New team&lt;/strong&gt; button, there you will be presented with the Team’s name choice and role picker. The name you choose is used solely for display, so be as descriptive as possible.&lt;/p&gt;&#xA;&lt;p&gt;Through the role picker you can assign your team some basic functionality in the form of roles, such as the Datasource Explorer role, allowing team members to access the Explore menu to iterate on their queries.&lt;/p&gt;&#xA;&lt;h2 id=&#34;synchronize-team-members&#34;&gt;Synchronize team members&lt;/h2&gt;&#xA;&lt;p&gt;External group synchronization is a feature that maps an identity provider group to a Grafana team.&lt;/p&gt;&#xA;&lt;p&gt;Upon login, a user gets assigned to the teams they belong to based on their identity provider group memberships. At the same time, users will be removed from the teams no longer mapped to them.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1888px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/access-management-teams/external-group-sync.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/access-management-teams/external-group-sync.png&#34;data-srcset=&#34;/media/blog/access-management-teams/external-group-sync.png?w=320 320w, /media/blog/access-management-teams/external-group-sync.png?w=550 550w, /media/blog/access-management-teams/external-group-sync.png?w=750 750w, /media/blog/access-management-teams/external-group-sync.png?w=900 900w, /media/blog/access-management-teams/external-group-sync.png?w=1040 1040w, /media/blog/access-management-teams/external-group-sync.png?w=1240 1240w, /media/blog/access-management-teams/external-group-sync.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;External group sync menu&#34;&#xA;width=&#34;1888&#34;&#xA;height=&#34;918&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/access-management-teams/external-group-sync.png&#34;&#xA;alt=&#34;External group sync menu&#34;&#xA;width=&#34;1888&#34;&#xA;height=&#34;918&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;The “External group sync” tab in every team’s detail page allows you to add and remove new mappings for that specific team.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1999px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/access-management-teams/entra-id-ui.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/access-management-teams/entra-id-ui.png&#34;data-srcset=&#34;/media/blog/access-management-teams/entra-id-ui.png?w=320 320w, /media/blog/access-management-teams/entra-id-ui.png?w=550 550w, /media/blog/access-management-teams/entra-id-ui.png?w=750 750w, /media/blog/access-management-teams/entra-id-ui.png?w=900 900w, /media/blog/access-management-teams/entra-id-ui.png?w=1040 1040w, /media/blog/access-management-teams/entra-id-ui.png?w=1240 1240w, /media/blog/access-management-teams/entra-id-ui.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Entra ID UI&#34;&#xA;width=&#34;1999&#34;&#xA;height=&#34;893&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/access-management-teams/entra-id-ui.png&#34;&#xA;alt=&#34;Entra ID UI&#34;&#xA;width=&#34;1999&#34;&#xA;height=&#34;893&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;In the case of Entra ID, the team’s External Group ID must match the Object ID in the Entra interface.&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Team members are only automatically assigned and removed from their mapped groups on login. Syncing will not happen if the user does not log in.&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;Folders allow a team to have a place to store their projects and collaborate while being able to optionally share other content with the rest of the organization.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1918px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/access-management-teams/new-folder.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/access-management-teams/new-folder.png&#34;data-srcset=&#34;/media/blog/access-management-teams/new-folder.png?w=320 320w, /media/blog/access-management-teams/new-folder.png?w=550 550w, /media/blog/access-management-teams/new-folder.png?w=750 750w, /media/blog/access-management-teams/new-folder.png?w=900 900w, /media/blog/access-management-teams/new-folder.png?w=1040 1040w, /media/blog/access-management-teams/new-folder.png?w=1240 1240w, /media/blog/access-management-teams/new-folder.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;New folder selection&#34;&#xA;width=&#34;1918&#34;&#xA;height=&#34;902&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/access-management-teams/new-folder.png&#34;&#xA;alt=&#34;New folder selection&#34;&#xA;width=&#34;1918&#34;&#xA;height=&#34;902&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;To create a team folder, create a folder in the dashboards view, then head on over to the permissions tab of your newly created folder. There you can add a new “Admin” permission to your team and, optionally, remove existing permissions. &lt;br /&gt;&#xA;&lt;br /&gt;&#xA;Adding Admin permissions will allow your team, with users whose basic role is None, to create new dashboards and resources in the folder, while not exposing them to all of the organization’s folders and dashboards.&lt;/p&gt;&#xA;&lt;p&gt;Removing the existing permissions will make this folder only accessible to your team instead of the original folder creator and anyone with basic Viewer and Editor roles. It is not possible to remove Admin access from folders, so you should be mindful when assigning this basic role.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1902px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/access-management-teams/manage-permissions.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/access-management-teams/manage-permissions.png&#34;data-srcset=&#34;/media/blog/access-management-teams/manage-permissions.png?w=320 320w, /media/blog/access-management-teams/manage-permissions.png?w=550 550w, /media/blog/access-management-teams/manage-permissions.png?w=750 750w, /media/blog/access-management-teams/manage-permissions.png?w=900 900w, /media/blog/access-management-teams/manage-permissions.png?w=1040 1040w, /media/blog/access-management-teams/manage-permissions.png?w=1240 1240w, /media/blog/access-management-teams/manage-permissions.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Manage permissions menu&#34;&#xA;width=&#34;1902&#34;&#xA;height=&#34;1580&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/access-management-teams/manage-permissions.png&#34;&#xA;alt=&#34;Manage permissions menu&#34;&#xA;width=&#34;1902&#34;&#xA;height=&#34;1580&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;h2 id=&#34;connect-your-team-to-data-sources&#34;&gt;Connect your team to data sources&lt;/h2&gt;&#xA;&lt;p&gt;Don’t forget to give teams access to the data sources they will be using; go to the permissions tab of your data source and add the “Query” permission to the team. You can also remove existing permissions from Editors and Viewers to make this a team-exclusive data source.&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1908px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/access-management-teams/permissions.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/access-management-teams/permissions.png&#34;data-srcset=&#34;/media/blog/access-management-teams/permissions.png?w=320 320w, /media/blog/access-management-teams/permissions.png?w=550 550w, /media/blog/access-management-teams/permissions.png?w=750 750w, /media/blog/access-management-teams/permissions.png?w=900 900w, /media/blog/access-management-teams/permissions.png?w=1040 1040w, /media/blog/access-management-teams/permissions.png?w=1240 1240w, /media/blog/access-management-teams/permissions.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Prometheus permissions UI in Grafana Alerting&#34;&#xA;width=&#34;1908&#34;&#xA;height=&#34;1652&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/access-management-teams/permissions.png&#34;&#xA;alt=&#34;Prometheus permissions UI in Grafana Alerting&#34;&#xA;width=&#34;1908&#34;&#xA;height=&#34;1652&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;h2 id=&#34;how-to-conquer-access-management-at-scale&#34;&gt;How to conquer access management at scale&lt;/h2&gt;&#xA;&lt;p&gt;By leveraging Terraform for Grafana configuration, you can ensure consistent, version-controlled, and easily reproducible setups across different environments. This approach significantly reduces manual configuration errors and streamlines the management of your Grafana resources.&lt;/p&gt;&#xA;&lt;p&gt;A sample setup for a team would look something like this:&lt;/p&gt;&#xA;&lt;div class=&#34;code-snippet code-snippet__mini&#34;&gt;&lt;div class=&#34;lang-toolbar__mini&#34;&gt;&#xA;&lt;span class=&#34;code-clipboard&#34;&gt;&#xA;&lt;button x-data=&#34;app_code_snippet()&#34; x-init=&#34;init()&#34; @click=&#34;copy()&#34;&gt;&#xA;&lt;img class=&#34;code-clipboard__icon&#34; src=&#34;/media/images/icons/icon-copy-small-2.svg&#34; alt=&#34;Copy code to clipboard&#34; width=&#34;14&#34; height=&#34;13&#34;&gt;&#xA;&lt;span&gt;Copy&lt;/span&gt;&#xA;&lt;/button&gt;&#xA;&lt;/span&gt;&#xA;&lt;/div&gt;&lt;div class=&#34;code-snippet code-snippet__border&#34;&gt;&#xA;&lt;pre data-expanded=&#34;false&#34;&gt;&lt;code class=&#34;language-none&#34;&gt;# Provider Configuration&#xA;terraform {&#xA;required_providers {&#xA;grafana = {&#xA;source = &amp;#34;grafana/grafana&amp;#34;&#xA;version = &amp;#34;~&amp;gt; 3.4.0&amp;#34; # Use the latest version available&#xA;}&#xA;}&#xA;}&#xA;provider &amp;#34;grafana&amp;#34; {&#xA;url = &amp;#34;http://grafana.example.com&amp;#34; # Replace with your Grafana URL&#xA;auth = &amp;#34;your-grafana-service-account-token&amp;#34; # Insecure: prefer using a terraform variable&#xA;}&#xA;# Grafana Team&#xA;resource &amp;#34;grafana_team&amp;#34; &amp;#34;my_team&amp;#34; {&#xA;name = &amp;#34;My Team&amp;#34;&#xA;}&#xA;# External Group Mapping&#xA;resource &amp;#34;grafana_team_external_group&amp;#34; &amp;#34;my_team_group&amp;#34; {&#xA;team_id = grafana_team.my_team.id&#xA;groups = [&amp;#34;input-your-group-here&amp;#34;]&#xA;}&#xA;# Folder&#xA;resource &amp;#34;grafana_folder&amp;#34; &amp;#34;my_folder&amp;#34; {&#xA;title = &amp;#34;My Folder&amp;#34;&#xA;}&#xA;# Folder Permissions&#xA;resource &amp;#34;grafana_folder_permission&amp;#34; &amp;#34;my_folder_permission&amp;#34; {&#xA;folder_uid = grafana_folder.my_folder.uid&#xA;permissions {&#xA;team_id = grafana_team.my_team.id&#xA;permission = &amp;#34;Admin&amp;#34;&#xA;}&#xA;}&#xA;# Prometheus Data Source&#xA;resource &amp;#34;grafana_data_source&amp;#34; &amp;#34;prometheus&amp;#34; {&#xA;type = &amp;#34;prometheus&amp;#34;&#xA;name = &amp;#34;Prometheus&amp;#34;&#xA;# Add any necessary configuration for your Prometheus data source&#xA;json_data_encoded = jsonencode({&#xA;httpMethod = &amp;#34;POST&amp;#34;&#xA;# Add other necessary configurations&#xA;})&#xA;}&#xA;# Data Source Permissions&#xA;resource &amp;#34;grafana_data_source_permission&amp;#34; &amp;#34;prometheus_permissions&amp;#34; {&#xA;datasource_uid = grafana_data_source.prometheus.uid&#xA;permissions {&#xA;team_id = grafana_team.my_team.id&#xA;permission = &amp;#34;Query&amp;#34;&#xA;}&#xA;}&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;h3 id=&#34;what-does-this-configuration-do&#34;&gt;What does this configuration do?&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;Provider setup&lt;/strong&gt;: Configures the Grafana provider with the necessary URL and authentication.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Team creation&lt;/strong&gt;: Creates a new team in Grafana.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;External group mapping&lt;/strong&gt;: Maps an external group to the created team, which is useful for syncing with external authentication systems.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Folder management&lt;/strong&gt;: Creates a new folder and sets admin permissions for the team.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Data source configuration&lt;/strong&gt;: Sets up a Prometheus data source and grants query permissions to the team. Part of the configuration was reduced for sample purposes, so check out the &lt;a href=&#34;https://registry.terraform.io/providers/grafana/grafana/latest/docs/resources/data_source&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;resource documentation&lt;/a&gt; for more information.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;key-points-and-warnings&#34;&gt;Key points and warnings&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;Authentication header security&lt;/strong&gt;: The configuration uses a service account token for authentication. Never hardcode this key in your Terraform files. Use variables and store sensitive information securely.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Version control&lt;/strong&gt;: While it&amp;rsquo;s great to version control your Terraform configs, be cautious about committing files with sensitive information to your repository.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;State file management&lt;/strong&gt;: Terraform state files contain sensitive information. Use remote state storage with proper access controls.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Testing&lt;/strong&gt;: Always test your Terraform configurations in a non-production environment first.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Grafana version compatibility&lt;/strong&gt;: Ensure that the Grafana provider version is compatible with your Grafana instance.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Resource Naming&lt;/strong&gt;: Use a consistent naming convention for your resources to maintain clarity as your configuration grows.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;best-practices&#34;&gt;Best practices&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Use variables for customizable values like team names, folder names, and external group identifiers.&lt;/li&gt;&#xA;&lt;li&gt;Implement a modular structure for more complex setups, separating concerns into different Terraform modules.&lt;/li&gt;&#xA;&lt;li&gt;Use data sources to reference existing Grafana resources when necessary, rather than always creating new ones.&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;going-further-with-terraform&#34;&gt;Going further with Terraform&lt;/h3&gt;&#xA;&lt;p&gt;To give you a quick start on this and give you a more step-by-step approach, we’ve created a Terraform working directory generator that sets up a Terraform working directory, mapping all of your Entra ID groups to Grafana teams, with team folders and team synchronization pre-configured.&lt;/p&gt;&#xA;&lt;p&gt;Visit the &lt;a href=&#34;https://github.com/grafana/grafana-team-terraform-generator&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;GitHub repo&lt;/a&gt; for more detail on how to use this tool to automate your setup:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1096px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link&#34;&#xA;href=&#34;/media/blog/access-management-teams/dashboard-search.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload &#34;&#xA;data-src=&#34;/media/blog/access-management-teams/dashboard-search.png&#34;data-srcset=&#34;/media/blog/access-management-teams/dashboard-search.png?w=320 320w, /media/blog/access-management-teams/dashboard-search.png?w=550 550w, /media/blog/access-management-teams/dashboard-search.png?w=750 750w, /media/blog/access-management-teams/dashboard-search.png?w=900 900w, /media/blog/access-management-teams/dashboard-search.png?w=1040 1040w, /media/blog/access-management-teams/dashboard-search.png?w=1240 1240w, /media/blog/access-management-teams/dashboard-search.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;dashboard selector UI&#34;&#xA;width=&#34;1096&#34;&#xA;height=&#34;1016&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/access-management-teams/dashboard-search.png&#34;&#xA;alt=&#34;dashboard selector UI&#34;&#xA;width=&#34;1096&#34;&#xA;height=&#34;1016&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;h2 id=&#34;looking-ahead-a-future-of-fine-grained-resource-management&#34;&gt;Looking ahead: A future of fine-grained resource management&lt;/h2&gt;&#xA;&lt;p&gt;We are committed to constantly improving the way users organize and manage resources in Grafana. Expect to see advancements like:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;More resources in folders:&lt;/strong&gt; Expanding folder capabilities to accommodate a wider range of resources beyond dashboards and alerts.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Advanced team permissions:&lt;/strong&gt; Providing granular permission controls for teams, giving administrators greater flexibility in managing access.&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Streamlined IdP integration:&lt;/strong&gt; Further simplifying the synchronization process between your SSO provider and Grafana teams with features such as SCIM.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;We are incredibly excited about the future of access control in Grafana and how these improvements will empower teams to collaborate effectively while maintaining a secure and well-structured data environment. And if you have any feedback, please feel free to share it in our &lt;a href=&#34;https://github.com/grafana/grafana/issues&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;issue tracker&lt;/a&gt; in GitHub.&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;a href=&#34;/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud &lt;/a&gt;is the easiest way to get started with metrics, logs, traces, dashboards, and more. We have a generous forever-free tier and plans for every use case. &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Sign up for free now!&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;】&lt;p&gt;如果您希望简化 Grafana 实例中的用户访问和权限，那么这篇博文适合您。这是因为我们将逐步介绍如何与 Grafana 团队一起建立一个简化的系统来管理用户权限.&lt;/p&gt;&#xA;&lt;p&gt;我们将重点关注&lt;a href=&#34;https://www.microsoft.com/en-us/security/business/identity-access/microsoft-entra-id&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Entra ID&lt;/a&gt;（以前称为 Azure Active Directory）作为我们的用户存储库和身份提供商，但这些步骤也可以适用于其他身份提供商，包括 Okta 和 Keycloak。&lt;/p&gt;&#xA;&lt;p&gt;本文中讨论的功能适用于每个 Grafana Cloud 计划（包括我们的&lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;plcmt=body-txt&#34;&gt;永久免费套餐&lt; /a&gt;) 和 Grafana Enterprise。最终，我们的目标是默认隔离，同时保持添加可选共享的能力。我们将介绍如何：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;建立直接链接&lt;/strong&gt;：将您现有的用户目录与 Grafana 同步，自动填充平台内的团队。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;将团队映射到资源&lt;/strong&gt;：轻松将 Grafana 团队映射到专用文件夹，确保每个团队都有一个用于存放仪表板和资源的工作区。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;why-we-recommend-teams-over-organizations-and-custom-roles&#34;&gt;为什么我们推荐团队而不是组织和自定义角色&lt;/h2&gt;&#xA;&lt;p&gt;虽然 Grafana 提供各种组织结构（例如团队、组织、自定义角色），但在 Grafana Labs，我们出于多种原因提倡使用团队。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;组织&lt;/strong&gt;提供严格的隔离，这通常会导致数据孤岛并阻碍协作和透明度，特别是在项目和团队结构重叠的环境中。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;自定义角色&lt;/strong&gt;虽然可以灵活地定义权限，但管理起来可能会变得复杂，并且可能仍然无法提高动态环境中所需的协作级别。它们最适合创建不与其他用户共享域的高权限用户。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;团队&lt;/strong&gt;，另一方面，提供适当的平衡：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;透明度和协作。&lt;/strong&gt;在处理相关项目的团队之间轻松共享仪表板和数据。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;受控隔离。&lt;/strong&gt;限制对敏感信息的访问，确保数据安全。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据源和其他资源权限&lt;/strong&gt;。允许团队管理对特定数据源的访问，从而在不牺牲协作的情况下增强控制。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;基于标签的访问控制&lt;/strong&gt;：使用标签简化权限管理，从而更轻松地维护安全高效的环境。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;要了解有关此主题的更多信息，请查看我们关于使用 &lt;a href=&#34;/blog/2022/03/14/how-to-best-organize-your-teams-a 的博客文章nd-resources-in-grafana/?pg=blog&amp;plcmt=body-txt&#34;&gt;团队或组织&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;h2 id=&#34;configure-your-instance&#34;&gt;配置您的实例&lt;/h2&gt;&#xA;&lt;p&gt;既然我们已经了解了为什么我们认为您应该使用这种方法，那么让我们来了解一下如何实际实现它。&lt;/p&gt;&#xA;&lt;h3 id=&#34;map-your-users-to-none-role&#34;&gt;将您的用户映射到“无”角色&lt;/h3&gt;&#xA;&lt;p&gt;使用 Entra ID 时，将所有用户分配给“无”角色。这将删除对每个新仪表板和文件夹的默认访问权限，以便您可以从头开始构建用户的权限。&lt;/p&gt;&#xA;&lt;块引用&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;使用其他身份提供商时，您可以将角色属性路径设置为“None”，以将每个用户映射到角色 None。确保为您的管理员用户设置一些额外的规则。例如，使用 GitLab 时，请遵循 &lt;a href=&#34;/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/gitlab/?pg=blog&amp;plcmt=body-txt#role-mapping-examples&#34; &gt;提供的文档&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;h3 id=&#34;ensure-external-group-synchronization-is- Correctly-configured&#34;&gt;确保外部组同步配置正确&lt;/h3&gt;&#xA;&lt;p&gt;使用 Entra ID 时，外部组同步应按原样工作，无需额外配置。&lt;/p&gt;&#xA;&lt;块引用&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;使用其他身份提供商时，&lt;a href=&#34;/docs/grafana/latest/setup-grafana/configure-security/configure-authentication/?pg=blog&amp;plcmt=body- txt&#34;&gt;单点登录文档&lt;/a&gt;将有助于确保登录时存在组声明。&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;p&gt;查看我们最近关于&lt;a href=&#34;/blog/2024/07/31/an-overview-of-grafana-sso-benefits-recent-updates-and-best-practices-to-get-的博客文章已开始/?pg=blog&amp;plcmt=body-txt&#34;&gt;如何设置 SSO 配置&lt;/a&gt;&lt;a href=&#34;/blog/2024/07/31/an-overview-of-grafana-sso-benefits-recent -updates-and-best-practices-to-get-started&#34;&gt;&lt;/a&gt; 了解更多信息。&lt;/p&gt;&#xA;&lt;h2 id=&#34;create-teams&#34;&gt;创建团队&lt;/h2&gt;&#xA;&lt;p&gt;首先在 Grafana 中创建您的团队。您可以通过 Grafana UI、公共 API 或 Terraform 来执行此操作。&lt;/p&gt;&#xA;&lt;块引用&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;我们建议使用 Terraform，因为它可以为您的设置提供轻松的状态管理和可扩展性。但是，这代表了更高级的用例，因此我们将在本文末尾更多地探讨此选项。&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1872px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/access-management-teams/teams.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src =“/media/blog/access-management-teams/teams.png”data-srcset =“/media/blog/access-management-teams/teams.png？w = 320 320w，/media/blog/访问管理团队/teams.png？w=550 550w，/media/blog/access-management-teams/teams.png？w=750 750w，/media/blog/access-management-teams/teams.png?w=900 900w，/media/blog/access-management-teams/teams.png?w=1040 1040w，/media/blog/access-management-teams/teams.png?w=1240 1240w，/media/博客/访问管理团队/teams.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;团队选择器菜单&#34;&#xA;宽度=“1872”&#xA;高度=“946”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/access-management-teams/teams.png”&#xA;alt=&#34;团队选择菜单&#34;&#xA;宽度=“1872”&#xA;高度=“946”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;在&lt;strong&gt;管理&lt;/strong&gt; &gt; &lt;strong&gt;用户和访问&lt;/strong&gt; &gt; &lt;strong&gt;团队&lt;/strong&gt;下，您可以选择&lt;strong&gt;新团队&lt;/strong&gt;按钮，然后您可以在将看到团队的名称选择和角色选择器。您选择的名称仅用于显示，因此请尽可能具有描述性。&lt;/p&gt;&#xA;&lt;p&gt;通过角色选择器，您可以以角色的形式为您的团队分配一些基本功能，例如数据源浏览器角色，从而允许团队成员访问“浏览”菜单以迭代其查询。&lt;/p&gt;&#xA;&lt;h2 id=&#34;synchronize-team-members&#34;&gt;同步团队成员&lt;/h2&gt;&#xA;&lt;p&gt;外部组同步是一项将身份提供商组映射到 Grafana 团队的功能。&lt;/p&gt;&#xA;&lt;p&gt;登录后，用户会根据其身份提供商组成员身份分配到其所属的团队。同时，用户将从不再映射到他们的团队中删除。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1888px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/access-management-teams/external-group-sync.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src=&#34;/media/blog/access-management-teams/external-group-sync.png&#34;data-srcset=&#34;/media/blog/access-management-teams/external-group-sync.png?w= 320 320w、/media/blog/access-management-teams/external-group-sync.png?w=550 550w、/media/blog/access-management-teams/external-group-sync.png?w=750 750w , /media/blog/access-management-teams/external-group-sync.png?w=900 900w, /media/blog/access-management-teams/external-group-sync.png?w=1040 1040w, /媒体/博客/访问管理团队/外部组同步.png？w = 1240 1240w，/媒体/博客/访问管理团队/外部组同步.png？w = 1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;外部组同步菜单&#34;&#xA;宽度=“1888”&#xA;高度=“918”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/access-management-teams/external-group-sync.png”&#xA;alt=&#34;外部组同步菜单&#34;&#xA;宽度=“1888”&#xA;高度=“918”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;每个团队详细信息页面中的“外部组同步”选项卡允许您添加和删除该特定团队的新映射。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1999px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/access-management-teams/entra-id-ui.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“懒加载”&#xA;data-src=&#34;/media/blog/access-management-teams/entra-id-ui.png&#34;data-srcset=&#34;/media/blog/access-management-teams/entra-id-ui.png?w= 320 320w，/media/blog/access-management-teams/entra-id-ui.png?w=550 550w，/media/blog/access-management-teams/entra-id-ui.png?w=750 750w , /media/blog/access-management-teams/entra-id-ui.png?w=900 900w, /media/blog/access-management-teams/entra-id-ui.png?w=1040 1040w, /媒体/博客/access-management-teams/entra-id-ui.png?w=1240 1240w，/media/blog/access-management-teams/entra-id-ui.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;Entra ID UI&#34;&#xA;宽度=“1999”&#xA;高度=“893”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/access-management-teams/entra-id-ui.png”&#xA;alt=&#34;Entra ID 用户界面&#34;&#xA;宽度=“1999”&#xA;高度=“893”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;对于 Entra ID，团队的外部组 ID 必须与 Entra 界面中的对象 ID 匹配。&lt;/p&gt;&#xA;&lt;块引用&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;团队成员只会在登录时自动分配到其映射的组中或从其映射的组中删除。如果用户未登录，则不会进行同步。&lt;/p&gt;&#xA;&lt;/块引用&gt;&#xA;&lt;p&gt;文件夹允许团队有一个地方来存储他们的项目和协作，同时可以选择与组织的其他成员共享其他内容。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1918px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/access-management-teams/new-folder.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src =“/media/blog/access-management-teams/new-folder.png”data-srcset =“/media/blog/access-management-teams/new-folder.png？w = 320 320w，/媒体/博客/访问管理团队/新文件夹.png？w = 550 550w，/媒体/博客/访问管理团队/新文件夹.png？w = 750 750w，/媒体/博客/访问-管理团队/new-folder.png?w=900 900w，/media/blog/access-management-teams/new-folder.png?w=1040 1040w，/media/blog/access-management-teams/new-文件夹.png?w=1240 1240w，/media/blog/access-management-teams/new-folder.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;新文件夹选择&#34;&#xA;宽度=“1918”&#xA;高度=“902”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/access-management-teams/new-folder.png”&#xA;alt=&#34;新文件夹选择&#34;&#xA;宽度=“1918”&#xA;高度=“902”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;要创建团队文件夹，请在仪表板视图中创建一个文件夹，然后转到新创建的文件夹的权限选项卡。您可以在此处向您的团队添加新的“管理员”权限，也可以选择删除现有权限。 &lt;br/&gt;&#xA;&lt;br/&gt;&#xA;添加管理员权限将允许您的团队（其基本角色为“无”的用户）在文件夹中创建新的仪表板和资源，而不会将它们暴露给组织的所有文件夹和仪表板。&lt;/p&gt;&#xA;&lt;p&gt;删除现有权限将使该文件夹只能由您的团队访问，而原始文件夹创建者以及具有基本查看者和编辑者角色的任何人都无法访问。它我无法从文件夹中删除管理员访问权限，因此在分配此基本角色时应小心。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1902px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/access-management-teams/manage-permissions.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src =“/media/blog/access-management-teams/manage-permissions.png”data-srcset =“/media/blog/access-management-teams/manage-permissions.png？w = 320 320w，/媒体/博客/访问管理团队/管理权限.png？w = 550 550w，/媒体/博客/访问管理团队/管理权限.png？w = 750 750w，/媒体/博客/访问-管理团队/管理权限.png?w=900 900w，/media/blog/access-management-teams/manage-permissions.png?w=1040 1040w，/media/blog/access-management-teams/manage-权限.png?w=1240 1240w，/media/blog/access-management-teams/manage-permissions.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;管理权限菜单&#34;&#xA;宽度=“1902”&#xA;高度=“1580”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/access-management-teams/manage-permissions.png”&#xA;alt=&#34;管理权限菜单&#34;&#xA;宽度=“1902”&#xA;高度=“1580”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;h2 id=&#34;connect-your-team-to-data-sources&#34;&gt;将您的团队连接到数据源&lt;/h2&gt;&#xA;&lt;p&gt;不要忘记让团队访问他们将使用的数据源；转到数据源的权限选项卡并向团队添加“查询”权限。您还可以删除编辑者和查看者的现有权限，使其成为团队专有的数据源。&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1908px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/access-management-teams/permissions.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src =“/media/blog/access-management-teams/permissions.png”data-srcset =“/media/blog/access-management-teams/permissions.png？w = 320 320w，/media/blog/访问管理团队/permissions.png？w=550 550w，/media/blog/access-management-teams/permissions.png？w=750 750w，/media/blog/access-management-teams/permissions.png？ w=900 900w，/media/blog/access-management-teams/permissions.png？w=1040 1040w，/media/blog/access-management-teams/permissions.png？w=1240 1240w，/media/blog/访问管理团队/permissions.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;Grafana 警报中的 Prometheus 权限 UI&#34;&#xA;宽度=“1908”&#xA;高度=“1652”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/access-management-teams/permissions.png”&#xA;alt=&#34;Grafana 警报中的 Prometheus 权限 UI&#34;&#xA;宽度=“1908”&#xA;高度=“1652”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;h2 id=&#34;how-to-conquer-access-management-at-scale&#34;&gt;如何大规模征服访问管理&lt;/h2&gt;&#xA;&lt;p&gt;通过利用 Terraform for Grafana 配置，您可以确保缺点跨不同环境的、版本控制且易于复制的设置。这种方法显着减少了手动配置错误并简化了 Grafana 资源的管理。&lt;/p&gt;&#xA;&lt;p&gt;团队的示例设置如下所示：&lt;/p&gt;&#xA;&lt;div class=&#34;code-snippet code-snippet__mini&#34;&gt;&lt;div class=&#34;lang-toolbar__mini&#34;&gt;&#xA;&lt;span class=&#34;code-clipboard&#34;&gt;&#xA;&lt;按钮 x-data=&#34;app_code_snippet()&#34; x-init=&#34;init()&#34; @click=&#34;copy()&#34;&gt;&#xA;&lt;img class=&#34;code-clipboard__icon&#34; src=&#34;/media/images/icons/icon-copy-small-2.svg&#34; alt=&#34;将代码复制到剪贴板&#34; width=&#34;14&#34; height=&#34;13&#34;&gt;&#xA;&lt;span&gt;复制&lt;/span&gt;&#xA;&lt;/按钮&gt;&#xA;&lt;/span&gt;&#xA;&lt;/div&gt;&lt;div class=&#34;code-snippet code-snippet__border&#34;&gt;&#xA;&lt;pre data-expanded=&#34;false&#34;&gt;&lt;code class=&#34;language-none&#34;&gt;# 提供商配置&#xA;地形{&#xA;必需的提供者{&#xA;格拉法纳 = {&#xA;来源 =“grafana/grafana”&#xA;version = &#34;~&gt; 3.4.0&#34; # 使用可用的最新版本&#xA;}&#xA;}&#xA;}&#xA;提供商“grafana”{&#xA;url = &#34;http://grafana.example.com&#34; # 替换为您的 Grafana URL&#xA;auth = &#34;your-grafana-service-account-token&#34; # 不安全：更喜欢使用 terraform 变量&#xA;}&#xA;# Grafana 团队&#xA;资源“grafana_team”“my_team”{&#xA;名称=“我的团队”&#xA;}&#xA;# 外部组映射&#xA;资源“grafana_team_external_group”“my_team_group”{&#xA;team_id = grafana_team.my_team.id&#xA;groups = [“在此输入您的组”]&#xA;}&#xA;＃ 文件夹&#xA;资源“grafana_folder”“my_folder”{&#xA;标题=“我的文件夹”&#xA;}&#xA;# 文件夹权限&#xA;资源“grafana_folder_permission”“my_folder_permission”{&#xA;folder_uid = grafana_folder.my_folder.uid&#xA;权限{&#xA;team_id = grafana_team.my_team.id&#xA;权限=“管理员”&#xA;}&#xA;}&#xA;# 普罗米修斯数据源&#xA;资源“grafana_data_source”“普罗米修斯”{&#xA;类型=“普罗米修斯”&#xA;名称=“普罗米修斯”&#xA;# 为 Prometheus 数据源添加任何必要的配置&#xA;json_data_encoded = jsonencode({&#xA;http方法 =“POST”&#xA;# 添加其他必要的配置&#xA;})&#xA;}&#xA;# 数据源权限&#xA;资源“grafana_data_source_permission”“prometheus_permissions”{&#xA;datasource_uid = grafana_data_source.prometheus.uid&#xA;权限{&#xA;team_id = grafana_team.my_team.id&#xA;权限=“查询”&#xA;}&#xA;}&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;h3 id=&#34;what-does-this-configuration-do&#34;&gt;此配置的作用是什么？&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;提供商设置&lt;/strong&gt;：使用必要的 URL 和身份验证配置 Grafana 提供商。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;团队创建&lt;/strong&gt;：在 Grafana 中创建一个新团队。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;外部群组映射&lt;/strong&gt;：将外部群组映射到创建的团队，这对于与外部身份验证系统同步非常有用。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;文件夹管理&lt;/strong&gt;：创建新文件夹并为团队设置管理员权限。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据源配置&lt;/strong&gt;：设置 Prometheus 数据源并授予团队查询权限。为示例减少了部分配置为此，请查看&lt;a href=&#34;https://registry.terraform.io/providers/grafana/grafana/latest/docs/resources/data_source&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;资源文档&lt;/a&gt;了解更多信息。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;key-points-and-warnings&#34;&gt;要点和警告&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;身份验证标头安全性&lt;/strong&gt;：配置使用服务帐户令牌进行身份验证。切勿在 Terraform 文件中硬编码此密钥。使用变量并安全地存储敏感信息。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;版本控制&lt;/strong&gt;：虽然对 Terraform 配置进行版本控制很好，但在将包含敏感信息的文件提交到存储库时要小心。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;状态文件管理&lt;/strong&gt;：Terraform 状态文件包含敏感信息。使用具有适当访问控制的远程状态存储。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;测试&lt;/strong&gt;：始终首先在非生产环境中测试您的 Terraform 配置。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Grafana 版本兼容性&lt;/strong&gt;：确保 Grafana 提供程序版本与您的 Grafana 实例兼容。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;资源命名&lt;/strong&gt;：对资源使用一致的命名约定，以便随着配置的增长保持清晰度。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;best-practices&#34;&gt;最佳实践&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;使用变量来自定义值，例如团队名称、文件夹名称和外部组标识符。&lt;/li&gt;&#xA;&lt;li&gt;为更复杂的设置实现模块化结构，将关注点分离到不同的 Terraform 模块中。&lt;/li&gt;&#xA;&lt;li&gt;在必要时使用数据源引用现有 Grafana 资源，而不是总是创建新资源。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;going-further-with-terraform&#34;&gt;利用 Terraform 走得更远&lt;/h3&gt;&#xA;&lt;p&gt;为了让您快速入门并提供更分步的方法，我们创建了一个 Terraform 工作目录生成器，用于设置 Terraform 工作目录，将所有 Entra ID 组映射到 Grafana 团队，预先配置了团队文件夹和团队同步。&lt;/p&gt;&#xA;&lt;p&gt;访问 &lt;a href=&#34;https://github.com/grafana/grafana-team-terraform-generator&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;GitHub 存储库&lt;/a&gt;了解更多详细信息如何使用此工具来自动化设置：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1096px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接”&#xA;href=&#34;/media/blog/access-management-teams/dashboard-search.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“延迟加载”&#xA;data-src =“/media/blog/access-management-teams/dashboard-search.png”data-srcset =“/media/blog/access-management-teams/dashboard-search.png？w = 320 320w，/媒体/博客/访问管理团队/仪表板-搜索.png？w = 550 550w，/媒体/博客/访问管理团队/仪表板-搜索.png？w = 750 750w，/媒体/博客/访问-管理团队/dashboard-search.png?w=900 900w，/media/blog/access-management-teams/dashboard-search.png?w=1040 1040w，/media/blog/access-management-teams/dashboard-search.png?w=1240 1240w，/media/blog/access-management-teams/dashboard-search。 png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;仪表板选择器 UI&#34;&#xA;宽度=“1096”&#xA;高度=“1016”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/access-management-teams/dashboard-search.png”&#xA;alt=&#34;仪表板选择器 UI&#34;&#xA;宽度=“1096”&#xA;高度=“1016”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;h2 id=&#34;looking-ahead-a-future-of-fine-grained-resource-management&#34;&gt;展望未来：细粒度资源管理的未来&lt;/h2&gt;&#xA;&lt;p&gt;我们致力于不断改进用户在 Grafana 中组织和管理资源的方式。期望看到如下进步：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;文件夹中的更多资源&lt;/strong&gt;：扩展文件夹功能以容纳仪表板和警报之外的更广泛的资源。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;高级团队权限&lt;/strong&gt;：为团队提供精细的权限控制，使管理员能够更灵活地管理访问权限。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;简化 IdP 集成&lt;/strong&gt;：利用 SCIM 等功能进一步简化 SSO 提供商与 Grafana 团队之间的同步流程。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;我们对 Grafana 访问控制的未来以及这些改进将如何使团队能够有效协作，同时维护安全且结构良好的数据环境感到非常兴奋。如果您有任何反馈，请随时在我们的&lt;a href=&#34;https://github.com/grafana/grafana/issues&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;问题跟踪器&lt;/ a&gt; 在 GitHub 中。&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;a href=&#34;/products/cloud/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;是开始使用指标、日志、跟踪、仪表板等的最简单方法。我们为每个用例提供慷慨的永久免费套餐和计划。 &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;plcmt=body-txt&#34;&gt;立即免费注册！&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;</description>
      <pubDate>Tue, 10 Sep 2024 00:00:00 +0000</pubDate>
    </item>
    <item>
      <title>【How to monitor metrics and logs from Altinity.Cloud in Grafana Cloud】如何在 Grafana Cloud 中监控 Altinity.Cloud 的指标和日志</title>
      <link>https://grafana.com/blog/2024/09/19/how-to-monitor-metrics-and-logs-from-altinity.cloud-in-grafana-cloud/</link>
      <description>【&lt;p&gt;&lt;em&gt;Doug Tidwell is the Director of Content at Altinity, responsible for creating useful content for ClickHouse® users in general and Altinity customers in particular. He has more than 30 years of experience in databases, CI/CD systems, development tools, and middleware.&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;When it comes to visualizing, monitoring, and logging ClickHouse® clusters, there&amp;rsquo;s no easier way to accomplish all three than with Grafana Cloud, the open and composable observability stack powered by open source.&lt;/p&gt;&#xA;&lt;p&gt;Altinity.Cloud is a platform that makes it easy to create, manage, and maintain ClickHouse clusters in public or private clouds. Altinity.Cloud comes with built-in monitoring that is completely compatible with Grafana hosted services like Prometheus and Loki. That makes it easy to use Grafana Cloud to visualize your ClickHouse data through Prometheus metrics and Loki logs.&lt;/p&gt;&#xA;&lt;p&gt;In this blog post, we&amp;rsquo;ll go through the steps for how to:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Set up a remote Prometheus service in Grafana Cloud&lt;/li&gt;&#xA;&lt;li&gt;Use the Altinity Cloud Manager (ACM) to connect ClickHouse clusters to the remote Prometheus service&lt;/li&gt;&#xA;&lt;li&gt;Use Grafana Cloud to visualize the data ClickHouse is sending to Prometheus&lt;/li&gt;&#xA;&lt;li&gt;Set up a remote Loki service in Grafana Cloud&lt;/li&gt;&#xA;&lt;li&gt;Use the ACM to connect ClickHouse clusters to the remote Loki service&lt;/li&gt;&#xA;&lt;li&gt;Use Grafana Cloud to see the data ClickHouse is sending to Loki&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;how-to-set-up-a-remote-prometheus-service-in-grafana-cloud&#34;&gt;How to set up a remote Prometheus service in Grafana Cloud&lt;/h2&gt;&#xA;&lt;p&gt;Setting up a Prometheus service in Grafana Cloud is easy. Log in to your Grafana Cloud account. (If you don’t have one already, &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;create a free one&lt;/a&gt;. Seriously.) Click the &lt;strong&gt;Grafana&lt;/strong&gt; menu in the upper left corner, then select the &lt;strong&gt;Connections&lt;/strong&gt; menu:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 310px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/connections.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/connections.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/connections.png?w=320 320w, /media/blog/altinity-cloud/connections.png?w=550 550w, /media/blog/altinity-cloud/connections.png?w=750 750w, /media/blog/altinity-cloud/connections.png?w=900 900w, /media/blog/altinity-cloud/connections.png?w=1040 1040w, /media/blog/altinity-cloud/connections.png?w=1240 1240w, /media/blog/altinity-cloud/connections.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Connections menu&#34;&#xA;width=&#34;310&#34;&#xA;height=&#34;619&#34;&#xA;title=&#34;**Figure 1.** The Connections menu&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/connections.png&#34;&#xA;alt=&#34;Connections menu&#34;&#xA;width=&#34;310&#34;&#xA;height=&#34;619&#34;&#xA;title=&#34;**Figure 1.** The Connections menu&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 1.&lt;/strong&gt; The Connections menu&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;On the &lt;strong&gt;Add new connection&lt;/strong&gt; page, enter &lt;code&gt;hosted prometheus&lt;/code&gt; as the connection type. You’ll see the tile for &lt;strong&gt;Hosted Prometheus metrics&lt;/strong&gt;:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 899px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/hosted-prometheus-metrics.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/hosted-prometheus-metrics.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=320 320w, /media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=550 550w, /media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=750 750w, /media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=900 900w, /media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=1040 1040w, /media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=1240 1240w, /media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Add new connection menu&#34;&#xA;width=&#34;899&#34;&#xA;height=&#34;499&#34;&#xA;title=&#34;**Figure 2.** Adding a new data connection&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/hosted-prometheus-metrics.png&#34;&#xA;alt=&#34;Add new connection menu&#34;&#xA;width=&#34;899&#34;&#xA;height=&#34;499&#34;&#xA;title=&#34;**Figure 2.** Adding a new data connection&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 2.&lt;/strong&gt; Adding a new data connection&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Click the &lt;strong&gt;Hosted Prometheus metrics&lt;/strong&gt; tile. On the Hosted Prometheus metrics page, select &lt;strong&gt;From my local Prometheus server&lt;/strong&gt; in section 1:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1114px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/from-my-local.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/from-my-local.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/from-my-local.png?w=320 320w, /media/blog/altinity-cloud/from-my-local.png?w=550 550w, /media/blog/altinity-cloud/from-my-local.png?w=750 750w, /media/blog/altinity-cloud/from-my-local.png?w=900 900w, /media/blog/altinity-cloud/from-my-local.png?w=1040 1040w, /media/blog/altinity-cloud/from-my-local.png?w=1240 1240w, /media/blog/altinity-cloud/from-my-local.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Choose a method for forwarding metrics menu&#34;&#xA;width=&#34;1114&#34;&#xA;height=&#34;483&#34;&#xA;title=&#34;**Figure 3.** We’ll get data from our local Prometheus server&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/from-my-local.png&#34;&#xA;alt=&#34;Choose a method for forwarding metrics menu&#34;&#xA;width=&#34;1114&#34;&#xA;height=&#34;483&#34;&#xA;title=&#34;**Figure 3.** We’ll get data from our local Prometheus server&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 3.&lt;/strong&gt; We’ll get data from our local Prometheus server&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;In section 2, select &lt;strong&gt;Send metrics from a single Prometheus instance&lt;/strong&gt;:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1108px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/send-metrics-single.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/send-metrics-single.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/send-metrics-single.png?w=320 320w, /media/blog/altinity-cloud/send-metrics-single.png?w=550 550w, /media/blog/altinity-cloud/send-metrics-single.png?w=750 750w, /media/blog/altinity-cloud/send-metrics-single.png?w=900 900w, /media/blog/altinity-cloud/send-metrics-single.png?w=1040 1040w, /media/blog/altinity-cloud/send-metrics-single.png?w=1240 1240w, /media/blog/altinity-cloud/send-metrics-single.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Choose use case for forwarding metrics menu&#34;&#xA;width=&#34;1108&#34;&#xA;height=&#34;243&#34;&#xA;title=&#34;**Figure 4.** Send metrics from a single Prometheus instance&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/send-metrics-single.png&#34;&#xA;alt=&#34;Choose use case for forwarding metrics menu&#34;&#xA;width=&#34;1108&#34;&#xA;height=&#34;243&#34;&#xA;title=&#34;**Figure 4.** Send metrics from a single Prometheus instance&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 4.&lt;/strong&gt; Send metrics from a single Prometheus instance&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Next, create a token for the Prometheus server in section 3. First give your token a name; this example uses &lt;code&gt;ch-to-prometheus-at-grafana&lt;/code&gt;:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1080px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/send-directly.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/send-directly.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/send-directly.png?w=320 320w, /media/blog/altinity-cloud/send-directly.png?w=550 550w, /media/blog/altinity-cloud/send-directly.png?w=750 750w, /media/blog/altinity-cloud/send-directly.png?w=900 900w, /media/blog/altinity-cloud/send-directly.png?w=1040 1040w, /media/blog/altinity-cloud/send-directly.png?w=1240 1240w, /media/blog/altinity-cloud/send-directly.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Send metrics direclty menu&#34;&#xA;width=&#34;1080&#34;&#xA;height=&#34;717&#34;&#xA;title=&#34;**Figure 5.** Defining a token name for the hosted Prometheus server&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/send-directly.png&#34;&#xA;alt=&#34;Send metrics direclty menu&#34;&#xA;width=&#34;1080&#34;&#xA;height=&#34;717&#34;&#xA;title=&#34;**Figure 5.** Defining a token name for the hosted Prometheus server&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 5.&lt;/strong&gt; Defining a token name for the hosted Prometheus server&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;With the token name defined, click the &lt;strong&gt;Create token&lt;/strong&gt; button. You’ll see something like this:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 950px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/create-token.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/create-token.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/create-token.png?w=320 320w, /media/blog/altinity-cloud/create-token.png?w=550 550w, /media/blog/altinity-cloud/create-token.png?w=750 750w, /media/blog/altinity-cloud/create-token.png?w=900 900w, /media/blog/altinity-cloud/create-token.png?w=1040 1040w, /media/blog/altinity-cloud/create-token.png?w=1240 1240w, /media/blog/altinity-cloud/create-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Update config menu&#34;&#xA;width=&#34;950&#34;&#xA;height=&#34;875&#34;&#xA;title=&#34;**Figure 6.** Creating a token for the Prometheus server&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/create-token.png&#34;&#xA;alt=&#34;Update config menu&#34;&#xA;width=&#34;950&#34;&#xA;height=&#34;875&#34;&#xA;title=&#34;**Figure 6.** Creating a token for the Prometheus server&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 6.&lt;/strong&gt; Creating a token for the Prometheus server&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Grafana Cloud generates YAML that should go into the Prometheus configuration. Fortunately, the ACM makes it easy to configure the connection between an Altinity.Cloud environment and the external Prometheus server. As you probably guessed, we need values from the YAML snippet above: The url field and the &lt;code&gt;username&lt;/code&gt; and &lt;code&gt;password&lt;/code&gt; fields in the &lt;code&gt;basic_auth&lt;/code&gt; section. We also need the name of the Grafana data source for our new Prometheus server. That data source will be named &lt;code&gt;grafana-[accountname]-prom&lt;/code&gt;. For this example, that’s &lt;code&gt;grafana-dougtidwell-prom&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;p&gt;Now it’s time to configure the Altinity.Cloud environment.&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-connect-altinitycloud-to-the-remote-prometheus-service-in-grafana-cloud&#34;&gt;How to connect Altinity.Cloud to the remote Prometheus service in Grafana Cloud&lt;/h2&gt;&#xA;&lt;p&gt;To connect your Altinity.Cloud environment to an external Prometheus server, go to the list of environments in the ACM and click the vertical dots icon and select &lt;strong&gt;Edit&lt;/strong&gt; from the menu:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 407px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/edit-environment.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/edit-environment.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/edit-environment.png?w=320 320w, /media/blog/altinity-cloud/edit-environment.png?w=550 550w, /media/blog/altinity-cloud/edit-environment.png?w=750 750w, /media/blog/altinity-cloud/edit-environment.png?w=900 900w, /media/blog/altinity-cloud/edit-environment.png?w=1040 1040w, /media/blog/altinity-cloud/edit-environment.png?w=1240 1240w, /media/blog/altinity-cloud/edit-environment.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The Edit Environment menu&#34;&#xA;width=&#34;407&#34;&#xA;height=&#34;178&#34;&#xA;title=&#34;**Figure 7.** The Edit Environment menu&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/edit-environment.png&#34;&#xA;alt=&#34;The Edit Environment menu&#34;&#xA;width=&#34;407&#34;&#xA;height=&#34;178&#34;&#xA;title=&#34;**Figure 7.** The Edit Environment menu&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 7.&lt;/strong&gt; The Edit Environment menu&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;In the Environment Configuration dialog, go to the &lt;strong&gt;Metrics&lt;/strong&gt; tab and fill in the details of your external Prometheus server in the &lt;strong&gt;External Prometheus&lt;/strong&gt; section:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1081px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/external-prometheus.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/external-prometheus.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/external-prometheus.png?w=320 320w, /media/blog/altinity-cloud/external-prometheus.png?w=550 550w, /media/blog/altinity-cloud/external-prometheus.png?w=750 750w, /media/blog/altinity-cloud/external-prometheus.png?w=900 900w, /media/blog/altinity-cloud/external-prometheus.png?w=1040 1040w, /media/blog/altinity-cloud/external-prometheus.png?w=1240 1240w, /media/blog/altinity-cloud/external-prometheus.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;External Prometheus entry in the Environmental Configuration menu&#34;&#xA;width=&#34;1081&#34;&#xA;height=&#34;998&#34;&#xA;title=&#34;**Figure 8.** Configuring an external Prometheus server in the **Metrics** tab of the Environment Configuration dialog&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/external-prometheus.png&#34;&#xA;alt=&#34;External Prometheus entry in the Environmental Configuration menu&#34;&#xA;width=&#34;1081&#34;&#xA;height=&#34;998&#34;&#xA;title=&#34;**Figure 8.** Configuring an external Prometheus server in the **Metrics** tab of the Environment Configuration dialog&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 8.&lt;/strong&gt; Configuring an external Prometheus server in the &lt;strong&gt;Metrics&lt;/strong&gt; tab of the Environment Configuration dialog&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Click &lt;strong&gt;OK&lt;/strong&gt; to establish the connection. The ACM will now send metrics data to the external Prometheus server.&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-use-grafana-cloud-to-visualize-prometheus-data&#34;&gt;How to use Grafana Cloud to visualize Prometheus data&lt;/h2&gt;&#xA;&lt;p&gt;Whether metrics from your Altinity.Cloud environment are being sent to a Prometheus server or a Prometheus server is scraping metrics from your environment, we want to explore that data. Grafana Cloud makes it easy to do that. We simply need to explore the Prometheus data source (&lt;code&gt;grafana-dougtidwell-prom&lt;/code&gt; in this example).&lt;/p&gt;&#xA;&lt;p&gt;Go to the Grafana menu, then select the &lt;strong&gt;Metrics&lt;/strong&gt; menu:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 484px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/metrics-menu.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/metrics-menu.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/metrics-menu.png?w=320 320w, /media/blog/altinity-cloud/metrics-menu.png?w=550 550w, /media/blog/altinity-cloud/metrics-menu.png?w=750 750w, /media/blog/altinity-cloud/metrics-menu.png?w=900 900w, /media/blog/altinity-cloud/metrics-menu.png?w=1040 1040w, /media/blog/altinity-cloud/metrics-menu.png?w=1240 1240w, /media/blog/altinity-cloud/metrics-menu.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Metrics menu&#34;&#xA;width=&#34;484&#34;&#xA;height=&#34;447&#34;&#xA;title=&#34;**FIgure 9.** The Metrics menu&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/metrics-menu.png&#34;&#xA;alt=&#34;Metrics menu&#34;&#xA;width=&#34;484&#34;&#xA;height=&#34;447&#34;&#xA;title=&#34;**FIgure 9.** The Metrics menu&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;FIgure 9.&lt;/strong&gt; The Metrics menu&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;The Metrics page lets you look at the metrics from your Altinity.Cloud environment without writing PromQL queries. Click the &lt;strong&gt;New metric exploration&lt;/strong&gt; button to explore a new set of metrics. When you do, you’ll see a list of all your Prometheus data sources:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 369px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/data-source.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/data-source.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/data-source.png?w=320 320w, /media/blog/altinity-cloud/data-source.png?w=550 550w, /media/blog/altinity-cloud/data-source.png?w=750 750w, /media/blog/altinity-cloud/data-source.png?w=900 900w, /media/blog/altinity-cloud/data-source.png?w=1040 1040w, /media/blog/altinity-cloud/data-source.png?w=1240 1240w, /media/blog/altinity-cloud/data-source.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Data source dropdown&#34;&#xA;width=&#34;369&#34;&#xA;height=&#34;174&#34;&#xA;title=&#34;**FIgure 10.** The available Prometheus data sources&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/data-source.png&#34;&#xA;alt=&#34;Data source dropdown&#34;&#xA;width=&#34;369&#34;&#xA;height=&#34;174&#34;&#xA;title=&#34;**FIgure 10.** The available Prometheus data sources&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;FIgure 10.&lt;/strong&gt; The available Prometheus data sources&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;We’ll select the &lt;code&gt;grafanacloud-dougtidwell-prom&lt;/code&gt; server and we see a dashboard full of useful metrics:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1084px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/metrics-no-labels.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/metrics-no-labels.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/metrics-no-labels.png?w=320 320w, /media/blog/altinity-cloud/metrics-no-labels.png?w=550 550w, /media/blog/altinity-cloud/metrics-no-labels.png?w=750 750w, /media/blog/altinity-cloud/metrics-no-labels.png?w=900 900w, /media/blog/altinity-cloud/metrics-no-labels.png?w=1040 1040w, /media/blog/altinity-cloud/metrics-no-labels.png?w=1240 1240w, /media/blog/altinity-cloud/metrics-no-labels.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Metrics dashboard&#34;&#xA;width=&#34;1084&#34;&#xA;height=&#34;924&#34;&#xA;title=&#34;**Figure 11.** Prometheus metrics with no labels specified&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/metrics-no-labels.png&#34;&#xA;alt=&#34;Metrics dashboard&#34;&#xA;width=&#34;1084&#34;&#xA;height=&#34;924&#34;&#xA;title=&#34;**Figure 11.** Prometheus metrics with no labels specified&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 11.&lt;/strong&gt; Prometheus metrics with no labels specified&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;The initial display includes metrics such as &lt;code&gt;Apiserver_request_tota&lt;/code&gt;l, which is a counter of apiserver requests broken out for each verb, HTTP response code and other categories, and &lt;code&gt;Clickhouse_operator_pod_add_events&lt;/code&gt;, which is a counter of the number of Kubernetes pods added while the Altinity Kubernetes Operator for ClickHouse is running.&lt;/p&gt;&#xA;&lt;p&gt;Each visualization is labeled with the name of the metric itself. Mousing over the circled i shows more information about a particular graph:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 571px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/counter-visualization.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/counter-visualization.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/counter-visualization.png?w=320 320w, /media/blog/altinity-cloud/counter-visualization.png?w=550 550w, /media/blog/altinity-cloud/counter-visualization.png?w=750 750w, /media/blog/altinity-cloud/counter-visualization.png?w=900 900w, /media/blog/altinity-cloud/counter-visualization.png?w=1040 1040w, /media/blog/altinity-cloud/counter-visualization.png?w=1240 1240w, /media/blog/altinity-cloud/counter-visualization.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;A short explanation of a visualization&#34;&#xA;width=&#34;571&#34;&#xA;height=&#34;170&#34;&#xA;title=&#34;**Figure 12.** A short explanation of a visualization&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/counter-visualization.png&#34;&#xA;alt=&#34;A short explanation of a visualization&#34;&#xA;width=&#34;571&#34;&#xA;height=&#34;170&#34;&#xA;title=&#34;**Figure 12.** A short explanation of a visualization&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 12.&lt;/strong&gt; A short explanation of a visualization&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Every metric sent to the Prometheus server has one or more labels attached to it. We can filter what we see by selecting one or more labels. Click the &lt;strong&gt;Add label&lt;/strong&gt; button to add a label to the query. When you click the button, you’ll see a dropdown list of labels from all the metrics sent to this server:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 352px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/label-list.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/label-list.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/label-list.png?w=320 320w, /media/blog/altinity-cloud/label-list.png?w=550 550w, /media/blog/altinity-cloud/label-list.png?w=750 750w, /media/blog/altinity-cloud/label-list.png?w=900 900w, /media/blog/altinity-cloud/label-list.png?w=1040 1040w, /media/blog/altinity-cloud/label-list.png?w=1240 1240w, /media/blog/altinity-cloud/label-list.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;List of labels in the metrics data&#34;&#xA;width=&#34;352&#34;&#xA;height=&#34;372&#34;&#xA;title=&#34;**Figure 13.** List of labels in the metrics data&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/label-list.png&#34;&#xA;alt=&#34;List of labels in the metrics data&#34;&#xA;width=&#34;352&#34;&#xA;height=&#34;372&#34;&#xA;title=&#34;**Figure 13.** List of labels in the metrics data&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 13.&lt;/strong&gt; List of labels in the metrics data&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;With a label selected, you’ll get a dropdown list of all the values for that label:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 229px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/value-list.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/value-list.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/value-list.png?w=320 320w, /media/blog/altinity-cloud/value-list.png?w=550 550w, /media/blog/altinity-cloud/value-list.png?w=750 750w, /media/blog/altinity-cloud/value-list.png?w=900 900w, /media/blog/altinity-cloud/value-list.png?w=1040 1040w, /media/blog/altinity-cloud/value-list.png?w=1240 1240w, /media/blog/altinity-cloud/value-list.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The list of values for a particular label&#34;&#xA;width=&#34;229&#34;&#xA;height=&#34;174&#34;&#xA;title=&#34;**Figure 14.** The list of values for a particular label&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/value-list.png&#34;&#xA;alt=&#34;The list of values for a particular label&#34;&#xA;width=&#34;229&#34;&#xA;height=&#34;174&#34;&#xA;title=&#34;**Figure 14.** The list of values for a particular label&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 14.&lt;/strong&gt; The list of values for a particular label&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;(The Altinity.Cloud environment we’re using here contains ClickHouse clusters named &lt;code&gt;maddie-na&lt;/code&gt; and &lt;code&gt;testms&lt;/code&gt;.)&lt;/p&gt;&#xA;&lt;p&gt;The page is filtered to show only visualizations of data tagged with the label and value you selected. In this example, that means everything with a label of &lt;code&gt;clickhouse_altinity_com_chi&lt;/code&gt; and a value of &lt;code&gt;maddie-na&lt;/code&gt;:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1070px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/limited-set.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/limited-set.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/limited-set.png?w=320 320w, /media/blog/altinity-cloud/limited-set.png?w=550 550w, /media/blog/altinity-cloud/limited-set.png?w=750 750w, /media/blog/altinity-cloud/limited-set.png?w=900 900w, /media/blog/altinity-cloud/limited-set.png?w=1040 1040w, /media/blog/altinity-cloud/limited-set.png?w=1240 1240w, /media/blog/altinity-cloud/limited-set.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;A limited set of visualizations&#34;&#xA;width=&#34;1070&#34;&#xA;height=&#34;906&#34;&#xA;title=&#34;**Figure 15.** A limited set of visualizations&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/limited-set.png&#34;&#xA;alt=&#34;A limited set of visualizations&#34;&#xA;width=&#34;1070&#34;&#xA;height=&#34;906&#34;&#xA;title=&#34;**Figure 15.** A limited set of visualizations&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 15.&lt;/strong&gt; A limited set of visualizations&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;So now we’ve successfully created a Prometheus server and connected it to your ClickHouse clusters. Now we’ll turn our attention to Loki…&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-set-up-a-hosted-logs-service-in-grafana-cloud&#34;&gt;How to set up a hosted logs service in Grafana Cloud&lt;/h2&gt;&#xA;&lt;p&gt;Metrics are useful for understanding the overall health of your system, but when we need to dig deeper we need logs. For that we’ll configure your hosted logs server in Grafana Cloud, which is powered by the open source log aggregation tool Grafana Loki. First, go to the Grafana menu in the upper left corner and select the &lt;strong&gt;Connections&lt;/strong&gt; menu as shown above in Figure 1.&lt;/p&gt;&#xA;&lt;p&gt;On the &lt;strong&gt;Add new connection&lt;/strong&gt; page, enter hosted logs as the connection type. You’ll see the tile for Hosted Loki:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 882px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/add-loki.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/add-loki.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/add-loki.png?w=320 320w, /media/blog/altinity-cloud/add-loki.png?w=550 550w, /media/blog/altinity-cloud/add-loki.png?w=750 750w, /media/blog/altinity-cloud/add-loki.png?w=900 900w, /media/blog/altinity-cloud/add-loki.png?w=1040 1040w, /media/blog/altinity-cloud/add-loki.png?w=1240 1240w, /media/blog/altinity-cloud/add-loki.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The Hosted Loki data connection&#34;&#xA;width=&#34;882&#34;&#xA;height=&#34;614&#34;&#xA;title=&#34;**Figure 16.** The Hosted Loki data connection&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/add-loki.png&#34;&#xA;alt=&#34;The Hosted Loki data connection&#34;&#xA;width=&#34;882&#34;&#xA;height=&#34;614&#34;&#xA;title=&#34;**Figure 16.** The Hosted Loki data connection&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 16.&lt;/strong&gt; The Hosted Loki data connection&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Click the &lt;strong&gt;Hosted logs&lt;/strong&gt; tile. On the Hosted logs page, select &lt;strong&gt;Send logs from a standalone host&lt;/strong&gt; in section 1:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1091px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/hosted-logs.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/hosted-logs.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/hosted-logs.png?w=320 320w, /media/blog/altinity-cloud/hosted-logs.png?w=550 550w, /media/blog/altinity-cloud/hosted-logs.png?w=750 750w, /media/blog/altinity-cloud/hosted-logs.png?w=900 900w, /media/blog/altinity-cloud/hosted-logs.png?w=1040 1040w, /media/blog/altinity-cloud/hosted-logs.png?w=1240 1240w, /media/blog/altinity-cloud/hosted-logs.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Send logs from a standalone host&#34;&#xA;width=&#34;1091&#34;&#xA;height=&#34;412&#34;&#xA;title=&#34;**Figure 17.** Send logs from a standalone host&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/hosted-logs.png&#34;&#xA;alt=&#34;Send logs from a standalone host&#34;&#xA;width=&#34;1091&#34;&#xA;height=&#34;412&#34;&#xA;title=&#34;**Figure 17.** Send logs from a standalone host&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 17.&lt;/strong&gt; Send logs from a standalone host&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Next, create a token for the Loki server in section 2. First, give your token a name; this example uses &lt;code&gt;ch-to-loki-at-grafana&lt;/code&gt;:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 911px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/naming-token.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/naming-token.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/naming-token.png?w=320 320w, /media/blog/altinity-cloud/naming-token.png?w=550 550w, /media/blog/altinity-cloud/naming-token.png?w=750 750w, /media/blog/altinity-cloud/naming-token.png?w=900 900w, /media/blog/altinity-cloud/naming-token.png?w=1040 1040w, /media/blog/altinity-cloud/naming-token.png?w=1240 1240w, /media/blog/altinity-cloud/naming-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Naming the token&#34;&#xA;width=&#34;911&#34;&#xA;height=&#34;484&#34;&#xA;title=&#34;**Figure 18.** Naming the token&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/naming-token.png&#34;&#xA;alt=&#34;Naming the token&#34;&#xA;width=&#34;911&#34;&#xA;height=&#34;484&#34;&#xA;title=&#34;**Figure 18.** Naming the token&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 18.&lt;/strong&gt; Naming the token&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;With the token name defined, click the &lt;strong&gt;Create token&lt;/strong&gt; button. You’ll see something like this:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 748px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/loki-token.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/loki-token.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/loki-token.png?w=320 320w, /media/blog/altinity-cloud/loki-token.png?w=550 550w, /media/blog/altinity-cloud/loki-token.png?w=750 750w, /media/blog/altinity-cloud/loki-token.png?w=900 900w, /media/blog/altinity-cloud/loki-token.png?w=1040 1040w, /media/blog/altinity-cloud/loki-token.png?w=1240 1240w, /media/blog/altinity-cloud/loki-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The token for the hosted Loki server&#34;&#xA;width=&#34;748&#34;&#xA;height=&#34;871&#34;&#xA;title=&#34;**Figure 19.** The token for the hosted Loki server&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/loki-token.png&#34;&#xA;alt=&#34;The token for the hosted Loki server&#34;&#xA;width=&#34;748&#34;&#xA;height=&#34;871&#34;&#xA;title=&#34;**Figure 19.** The token for the hosted Loki server&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 19.&lt;/strong&gt; The token for the hosted Loki server&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Typically using an external Loki server would involve using the &lt;code&gt;promtail&lt;/code&gt; agent to send the local ClickHouse logs to a Loki server. In creating the new token, Grafana generated a YAML file to configure &lt;code&gt;promtail&lt;/code&gt;. Fortunately, &lt;code&gt;promtail&lt;/code&gt; is deployed by Altinity.Cloud in the &lt;code&gt;altinity-cloud-system&lt;/code&gt; namespace:&lt;/p&gt;&#xA;&lt;div class=&#34;code-snippet code-snippet__mini&#34;&gt;&lt;div class=&#34;lang-toolbar__mini&#34;&gt;&#xA;&lt;span class=&#34;code-clipboard&#34;&gt;&#xA;&lt;button x-data=&#34;app_code_snippet()&#34; x-init=&#34;init()&#34; @click=&#34;copy()&#34;&gt;&#xA;&lt;img class=&#34;code-clipboard__icon&#34; src=&#34;/media/images/icons/icon-copy-small-2.svg&#34; alt=&#34;Copy code to clipboard&#34; width=&#34;14&#34; height=&#34;13&#34;&gt;&#xA;&lt;span&gt;Copy&lt;/span&gt;&#xA;&lt;/button&gt;&#xA;&lt;/span&gt;&#xA;&lt;/div&gt;&lt;div class=&#34;code-snippet code-snippet__border&#34;&gt;&#xA;&lt;pre data-expanded=&#34;false&#34;&gt;&lt;code class=&#34;language-none&#34;&gt;kubectl get pods --namespace altinity-cloud-system | grep promtail&#xA;promtail-4kgcx 1/1 Running 0 2d4h&#xA;promtail-4lgb7 1/1 Running 0 100m&#xA;promtail-7wm8b 1/1 Running 0 3d22h&#xA;promtail-d2n5g 1/1 Running 0 3d21h&#xA;promtail-mj6qv 1/1 Running 0 3d22h&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;p&gt;The one piece of information we need from the YAML file is the value of the URL as highlighted in Figure 19 above. Enter that value in the External Loki URL field of the Logs tab of the Environment Configuration dialog. (See Figure 20 below.) Once the URL is defined in the ACM, &lt;code&gt;promtail&lt;/code&gt; is automatically configured.&lt;/p&gt;&#xA;&lt;p&gt;Now it’s time to configure your external Loki server in the ACM.&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-connect-altinitycloud-to-the-hosted-logs-service-in-grafana-cloud&#34;&gt;How to connect Altinity.Cloud to the hosted logs service in Grafana Cloud&lt;/h2&gt;&#xA;&lt;p&gt;Integrating Loki with your ClickHouse clusters is done at the environment level in the ACM. To connect your environment to an external Loki server, go to the list of environments in the ACM and click the vertical dots icon and select Edit from the menu as shown in Figure 7 above. You’ll see the Environment Configuration dialog; go to the &lt;strong&gt;Logs&lt;/strong&gt; tab:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1038px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/log-token.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/log-token.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/log-token.png?w=320 320w, /media/blog/altinity-cloud/log-token.png?w=550 550w, /media/blog/altinity-cloud/log-token.png?w=750 750w, /media/blog/altinity-cloud/log-token.png?w=900 900w, /media/blog/altinity-cloud/log-token.png?w=1040 1040w, /media/blog/altinity-cloud/log-token.png?w=1240 1240w, /media/blog/altinity-cloud/log-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The Logs tab in the Environment Configuration dialog&#34;&#xA;width=&#34;1038&#34;&#xA;height=&#34;527&#34;&#xA;title=&#34;**Figure 20.** The Logs tab in the Environment Configuration dialog&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/log-token.png&#34;&#xA;alt=&#34;The Logs tab in the Environment Configuration dialog&#34;&#xA;width=&#34;1038&#34;&#xA;height=&#34;527&#34;&#xA;title=&#34;**Figure 20.** The Logs tab in the Environment Configuration dialog&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 20.&lt;/strong&gt; The Logs tab in the Environment Configuration dialog&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;In the &lt;strong&gt;External Loki URL&lt;/strong&gt; field, enter the URL of your external Loki server in the format &lt;code&gt;https://username:password@lokiurl.com/api/prom/push&lt;/code&gt;. The URL, username, and password come from the YAML file generated by Grafana Cloud above. You need to include your username and password as part of the URL, and use the endpoint &lt;code&gt;/api/prom/push&lt;/code&gt; to access the Loki API.&lt;/p&gt;&#xA;&lt;p&gt;Click &lt;strong&gt;OK&lt;/strong&gt; to save your settings. Log messages are now being sent from your ClickHouse cluster to your remote Loki server.&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-use-grafana-cloud-to-visualize-log-data&#34;&gt;How to use Grafana Cloud to visualize log data&lt;/h2&gt;&#xA;&lt;p&gt;With your Loki server set up, let’s take a look at the data the ACM is sending from your ClickHouse clusters. Go to the Grafana menu in the upper left and click the &lt;strong&gt;Data sources&lt;/strong&gt; menu:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 395px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/data-source-menu.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/data-source-menu.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/data-source-menu.png?w=320 320w, /media/blog/altinity-cloud/data-source-menu.png?w=550 550w, /media/blog/altinity-cloud/data-source-menu.png?w=750 750w, /media/blog/altinity-cloud/data-source-menu.png?w=900 900w, /media/blog/altinity-cloud/data-source-menu.png?w=1040 1040w, /media/blog/altinity-cloud/data-source-menu.png?w=1240 1240w, /media/blog/altinity-cloud/data-source-menu.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The Data sources menu&#34;&#xA;width=&#34;395&#34;&#xA;height=&#34;767&#34;&#xA;title=&#34;**Figure 21.** The Data sources menu&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/data-source-menu.png&#34;&#xA;alt=&#34;The Data sources menu&#34;&#xA;width=&#34;395&#34;&#xA;height=&#34;767&#34;&#xA;title=&#34;**Figure 21.** The Data sources menu&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 21.&lt;/strong&gt; The Data sources menu&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;When the list of data sources appears, you’ll see a tile for each data source. One or more of them will have the Loki logo. The one we’re looking for will be named &lt;code&gt;grafanacloud-[accountname]-logs&lt;/code&gt;:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 854px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/loki-data-source.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/loki-data-source.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/loki-data-source.png?w=320 320w, /media/blog/altinity-cloud/loki-data-source.png?w=550 550w, /media/blog/altinity-cloud/loki-data-source.png?w=750 750w, /media/blog/altinity-cloud/loki-data-source.png?w=900 900w, /media/blog/altinity-cloud/loki-data-source.png?w=1040 1040w, /media/blog/altinity-cloud/loki-data-source.png?w=1240 1240w, /media/blog/altinity-cloud/loki-data-source.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The tile for the Loki data source&#34;&#xA;width=&#34;854&#34;&#xA;height=&#34;86&#34;&#xA;title=&#34;**Figure 22.** The tile for the Loki data source&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/loki-data-source.png&#34;&#xA;alt=&#34;The tile for the Loki data source&#34;&#xA;width=&#34;854&#34;&#xA;height=&#34;86&#34;&#xA;title=&#34;**Figure 22.** The tile for the Loki data source&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 22.&lt;/strong&gt; The tile for the Loki data source&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Click the &lt;strong&gt;Explore&lt;/strong&gt; button to open the data source:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 947px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/loki-explorer.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/loki-explorer.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/loki-explorer.png?w=320 320w, /media/blog/altinity-cloud/loki-explorer.png?w=550 550w, /media/blog/altinity-cloud/loki-explorer.png?w=750 750w, /media/blog/altinity-cloud/loki-explorer.png?w=900 900w, /media/blog/altinity-cloud/loki-explorer.png?w=1040 1040w, /media/blog/altinity-cloud/loki-explorer.png?w=1240 1240w, /media/blog/altinity-cloud/loki-explorer.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The Loki data source explorer&#34;&#xA;width=&#34;947&#34;&#xA;height=&#34;405&#34;&#xA;title=&#34;**Figure 23.** The Loki data source explorer&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/loki-explorer.png&#34;&#xA;alt=&#34;The Loki data source explorer&#34;&#xA;width=&#34;947&#34;&#xA;height=&#34;405&#34;&#xA;title=&#34;**Figure 23.** The Loki data source explorer&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 23.&lt;/strong&gt; The Loki data source explorer&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Log messages in Loki consist of a timestamp, some number of labels (name/value pairs), and the text of the message. Click the &lt;strong&gt;Label browser&lt;/strong&gt; button to see the labels available on your Loki server:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 926px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/label-browser.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/label-browser.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/label-browser.png?w=320 320w, /media/blog/altinity-cloud/label-browser.png?w=550 550w, /media/blog/altinity-cloud/label-browser.png?w=750 750w, /media/blog/altinity-cloud/label-browser.png?w=900 900w, /media/blog/altinity-cloud/label-browser.png?w=1040 1040w, /media/blog/altinity-cloud/label-browser.png?w=1240 1240w, /media/blog/altinity-cloud/label-browser.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The label browser&#34;&#xA;width=&#34;926&#34;&#xA;height=&#34;843&#34;&#xA;title=&#34;**Figure 24.** The label browser&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/label-browser.png&#34;&#xA;alt=&#34;The label browser&#34;&#xA;width=&#34;926&#34;&#xA;height=&#34;843&#34;&#xA;title=&#34;**Figure 24.** The label browser&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 24.&lt;/strong&gt; The label browser&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;Here we’ve selected a couple of labels: &lt;code&gt;namespace&lt;/code&gt; and &lt;code&gt;pod&lt;/code&gt;. When selecting a label in section 1, the display in section 2 displays the available values for each label. Furthermore, as you select specific values in section 2, the available values under the other labels change. As an example, clicking on the value &lt;code&gt;altinity-maddie-na&lt;/code&gt; under the label namespace removes all of the values under the pod label except for &lt;code&gt;clickhouse-operator-7778d7cfb6-9q8m&lt;/code&gt;l. Selecting those two values changes the LogQL selector in section 3 to match:&lt;/p&gt;&#xA;&lt;div class=&#34;code-snippet code-snippet__mini&#34;&gt;&lt;div class=&#34;lang-toolbar__mini&#34;&gt;&#xA;&lt;span class=&#34;code-clipboard&#34;&gt;&#xA;&lt;button x-data=&#34;app_code_snippet()&#34; x-init=&#34;init()&#34; @click=&#34;copy()&#34;&gt;&#xA;&lt;img class=&#34;code-clipboard__icon&#34; src=&#34;/media/images/icons/icon-copy-small-2.svg&#34; alt=&#34;Copy code to clipboard&#34; width=&#34;14&#34; height=&#34;13&#34;&gt;&#xA;&lt;span&gt;Copy&lt;/span&gt;&#xA;&lt;/button&gt;&#xA;&lt;/span&gt;&#xA;&lt;/div&gt;&lt;div class=&#34;code-snippet code-snippet__border&#34;&gt;&#xA;&lt;pre data-expanded=&#34;false&#34;&gt;&lt;code class=&#34;language-none&#34;&gt;{namespace=&amp;#34;altinity-maddie-na&amp;#34;,pod=&amp;#34;clickhouse-operator-7778d7cfb6-9q8ml&amp;#34;}&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;p&gt;To see the logs that match this selector, click the &lt;strong&gt;Show Logs&lt;/strong&gt; button. You’ll see all the matching messages from the Loki server:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 1145px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/show-logs.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/show-logs.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/show-logs.png?w=320 320w, /media/blog/altinity-cloud/show-logs.png?w=550 550w, /media/blog/altinity-cloud/show-logs.png?w=750 750w, /media/blog/altinity-cloud/show-logs.png?w=900 900w, /media/blog/altinity-cloud/show-logs.png?w=1040 1040w, /media/blog/altinity-cloud/show-logs.png?w=1240 1240w, /media/blog/altinity-cloud/show-logs.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The log entries matching the selector&#34;&#xA;width=&#34;1145&#34;&#xA;height=&#34;649&#34;&#xA;title=&#34;**Figure 25.** The log entries matching the selector&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/show-logs.png&#34;&#xA;alt=&#34;The log entries matching the selector&#34;&#xA;width=&#34;1145&#34;&#xA;height=&#34;649&#34;&#xA;title=&#34;**Figure 25.** The log entries matching the selector&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 25.&lt;/strong&gt; The log entries matching the selector&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;The display also includes a graph of how many log messages have been issued over time:&lt;/p&gt;&#xA;&lt;figure&#xA;class=&#34;figure-wrapper figure-wrapper__lightbox w-100p &#34;&#xA;style=&#34;max-width: 940px;&#34;&#xA;itemprop=&#34;associatedMedia&#34;&#xA;itemscope=&#34;&#34;&#xA;itemtype=&#34;http://schema.org/ImageObject&#34;&#xA;&gt;&#xA;&lt;a&#xA;class=&#34;lightbox-link captioned&#34;&#xA;href=&#34;/media/blog/altinity-cloud/log-volume.png&#34;&#xA;itemprop=&#34;contentUrl&#34;&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;class=&#34;lazyload mb-0&#34;&#xA;data-src=&#34;/media/blog/altinity-cloud/log-volume.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/log-volume.png?w=320 320w, /media/blog/altinity-cloud/log-volume.png?w=550 550w, /media/blog/altinity-cloud/log-volume.png?w=750 750w, /media/blog/altinity-cloud/log-volume.png?w=900 900w, /media/blog/altinity-cloud/log-volume.png?w=1040 1040w, /media/blog/altinity-cloud/log-volume.png?w=1240 1240w, /media/blog/altinity-cloud/log-volume.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;The volume of log entries over time&#34;&#xA;width=&#34;940&#34;&#xA;height=&#34;173&#34;&#xA;title=&#34;**Figure 26.** The volume of log entries over time&#34;&#xA;/&gt;&#xA;&lt;noscript&gt;&#xA;&lt;img&#xA;src=&#34;/media/blog/altinity-cloud/log-volume.png&#34;&#xA;alt=&#34;The volume of log entries over time&#34;&#xA;width=&#34;940&#34;&#xA;height=&#34;173&#34;&#xA;title=&#34;**Figure 26.** The volume of log entries over time&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p caption text-gray-13 &#34;&gt;&lt;strong&gt;Figure 26.&lt;/strong&gt; The volume of log entries over time&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/figure&gt;&#xA;&lt;p&gt;So now we’ve configured a hosted Prometheus server and a hosted Loki server in Grafana Cloud, and we’ve used the ACM to connect ClickHouse clusters to the respective services so we can visualize metrics and logs in a Grafana dashboard.&lt;/p&gt;&#xA;&lt;h2 id=&#34;learn-more-about-grafana-cloud-and-altinity&#34;&gt;Learn more about Grafana Cloud and Altinity&lt;/h2&gt;&#xA;&lt;p&gt;Grafana Labs follows a &amp;ldquo;big tent&amp;rdquo; philosophy, which allows organizations to own their observability strategy, have the freedom to choose their own tools, and have the ability to bring all their data together in one view, no matter where it lives. Whether you set up monitoring Altinity.Cloud with the built-in open source tools or you leverage the out-of-the-box &lt;a href=&#34;/blog/2023/05/30/how-to-start-monitoring-your-clickhouse-instance-or-cluster-with-grafana-cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud solution&lt;/a&gt; for your ClickHouse clusters, you can learn more about how Grafana Cloud brings together all your data in one platform in the &lt;a href=&#34;/blog/2023/05/30/how-to-start-monitoring-your-clickhouse-instance-or-cluster-with-grafana-cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud documentation&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;However you want to run ClickHouse, &lt;strong&gt;Altinity&lt;/strong&gt; has the support you need to add low cost, open source real-time analytics to your applications. Our philosophy is that open source is a superior approach to developing software, and we advocate for its adoption across the modern data stack. See the &lt;a href=&#34;https://docs.altinity.com&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Altinity.Cloud documentation&lt;/a&gt; for all the details of connecting your ClickHouse clusters to &lt;a href=&#34;https://docs.altinity.com/altinitycloud/administratorguide/integrations/grafana/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Grafana Cloud&lt;/a&gt;, &lt;a href=&#34;https://docs.altinity.com/altinitycloud/administratorguide/integrations/prometheus/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Prometheus&lt;/a&gt;, and &lt;a href=&#34;https://docs.altinity.com/altinitycloud/administratorguide/integrations/loki/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Loki&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;a href=&#34;/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Grafana Cloud &lt;/a&gt;is the easiest way to get started with metrics, logs, traces, dashboards, and more. We have a generous forever-free tier and plans for every use case. &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt&#34;&gt;Sign up for free now!&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;】&lt;p&gt;&lt;em&gt;Doug Tidwell 是 Altinity 的内容总监，负责为 ClickHouse® 用户（特别是 Altinity 客户）创建有用的内容。他在数据库、CI/CD 系统、开发工具和中间件方面拥有 30 多年的经验。&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;在可视化、监控和记录 ClickHouse® 集群时，没有比使用 Grafana Cloud（由开源提供支持的开放且可组合的可观察性堆栈）更简单的方法来完成这三项任务了。&lt;/p&gt;&#xA;&lt;p&gt;Altinity.Cloud 是一个可以轻松在公共云或私有云中创建、管理和维护 ClickHouse 集群的平台。 Altinity.Cloud 具有内置监控功能，与 Prometheus 和 Loki 等 Grafana 托管服务完全兼容。这使得您可以轻松地使用 Grafana Cloud 通过 Prometheus 指标和 Loki 日志可视化您的 ClickHouse 数据。&lt;/p&gt;&#xA;&lt;p&gt;在这篇博文中，我们将介绍如何执行以下操作的步骤：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;在 Grafana Cloud 中设置远程 Prometheus 服务&lt;/li&gt;&#xA;&lt;li&gt;使用 Altinity Cloud Manager (ACM) 将 ClickHouse 集群连接到远程 Prometheus 服务&lt;/li&gt;&#xA;&lt;li&gt;使用 Grafana Cloud 可视化 ClickHouse 发送到 Prometheus 的数据&lt;/li&gt;&#xA;&lt;li&gt;在 Grafana Cloud 中设置远程 Loki 服务&lt;/li&gt;&#xA;&lt;li&gt;使用 ACM 将 ClickHouse 集群连接到远程 Loki 服务&lt;/li&gt;&#xA;&lt;li&gt;使用 Grafana Cloud 查看 ClickHouse 发送给 Loki 的数据&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;how-to-set-up-a-remote-prometheus-service-in-grafana-cloud&#34;&gt;如何在 Grafana Cloud 中设置远程 Prometheus 服务&lt;/h2&gt;&#xA;&lt;p&gt;在 Grafana Cloud 中设置 Prometheus 服务非常简单。登录您的 Grafana 云帐户。 （如果您还没有，&lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;plcmt=body-txt&#34;&gt;创建一个免费的&lt;/a&gt;。说真的。）点击左上角的 &lt;strong&gt;Grafana&lt;/strong&gt; 菜单，然后选择&lt;strong&gt;连接&lt;/strong&gt;菜单：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：310px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/connections.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src=&#34;/media/blog/altinity-cloud/connections.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/connections.png?w=320 320w，/media/blog/altinity-cloud/连接.png？w=550 550w，/media/blog/altinity-cloud/connections.png？w=750 750w，/media/blog/altinity-cloud/connections.png？w=900 900w，/media/blog/ altinity-cloud/connections.png?w=1040 1040w，/media/blog/altinity-cloud/connections.png?w=1240 1240w，/media/blog/altinity-cloud/connections.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;连接菜单&#34;&#xA;宽度=“310”&#xA;高度=“619”&#xA;title=&#34;**图 1.** 连接菜单&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/connections.png”&#xA;alt=&#34;连接菜单&#34;&#xA;宽度=“310”&#xA;高度=“619”&#xA;title=&#34;**图 1.** 连接菜单&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 1.&lt;/strong&gt; 连接菜单&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;在&lt;strong&gt;添加新连接&lt;/strong&gt;页面上，输入&lt;code&gt;hosted prometheus&lt;/code&gt;作为连接类型。您将看到&lt;strong&gt;托管 Prometheus 指标&lt;/strong&gt;的图块：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：899px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/hosted-prometheus-metrics.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/hosted-prometheus-metrics.png”data-srcset =“/media/blog/altinity-cloud/hosted-prometheus-metrics.png？w = 320 320w，/媒体/博客/altinity-cloud/hosted-prometheus-metrics.png?w=550 550w，/media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=750 750w，/media/blog/altinity-云/托管-prometheus-metrics.png？w=900 900w，/media/blog/altinity-cloud/hosted-prometheus-metrics.png？w=1040 1040w，/media/blog/altinity-cloud/hosted-prometheus-指标.png?w=1240 1240w，/media/blog/altinity-cloud/hosted-prometheus-metrics.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;添加新连接菜单&#34;&#xA;宽度=“899”&#xA;高度=“499”&#xA;title=&#34;**图 2.** 添加新的数据连接&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/hosted-prometheus-metrics.png”&#xA;alt=&#34;添加新连接菜单&#34;&#xA;宽度=“899”&#xA;高度=“499”&#xA;title=&#34;**图 2.** 添加新的数据连接&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 2.&lt;/strong&gt; 添加新的数据连接&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;点击&lt;strong&gt;托管 Prometheus 指标&lt;/strong&gt;图块。在“托管 Prometheus 指标”页面上，选择第 1 部分中的&lt;strong&gt;来自我的本地 Prometheus 服务器&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1114px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/from-my-local.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src=&#34;/media/blog/altinity-cloud/from-my-local.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/from-my-local.png?w=320 320w, /媒体/博客/altinity-cloud/from-my-local.png?w=550 550w，/media/blog/altinity-cloud/from-my-local.png?w=750 750w，/media/blog/altinity-云/from-my-local.png?w=900 900w，/media/blog/altinity-cloud/from-my-local.png?w=1040 1040w，/media/blog/altinity-cloud/from-my- local.png?w=1240 1240w，/media/blog/altinity-cloud/from-my-local.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;选择转发指标菜单的方法&#34;&#xA;宽度=“1114”&#xA;高度=“483”&#xA;title=&#34;**图 3.** 我们将从本地 Prometheus 服务器获取数据&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/from-my-local.png”&#xA;alt=&#34;选择转发我的方法技巧菜单”&#xA;宽度=“1114”&#xA;高度=“483”&#xA;title=&#34;**图 3.** 我们将从本地 Prometheus 服务器获取数据&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 3.&lt;/strong&gt; 我们将从本地 Prometheus 服务器获取数据&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;在第 2 部分中，选择&lt;strong&gt;从单个 Prometheus 实例发送指标&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1108px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/send-metrics-single.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/send-metrics-single.png”data-srcset =“/media/blog/altinity-cloud/send-metrics-single.png？w = 320 320w，/媒体/博客/altinity-cloud/send-metrics-single.png？w=550 550w，/media/blog/altinity-cloud/send-metrics-single.png？w=750 750w，/media/blog/altinity-云/send-metrics-single.png?w=900 900w，/media/blog/altinity-cloud/send-metrics-single.png?w=1040 1040w，/media/blog/altinity-cloud/send-metrics- single.png?w=1240 1240w，/media/blog/altinity-cloud/send-metrics-single.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;选择转发指标菜单的用例&#34;&#xA;宽度=“1108”&#xA;高度=“243”&#xA;title=&#34;**图 4.** 从单个 Prometheus 实例发送指标&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/send-metrics-single.png”&#xA;alt=&#34;选择转发指标菜单的用例&#34;&#xA;宽度=“1108”&#xA;高度=“243”&#xA;title=&#34;**图 4.** 从单个 Prometheus 实例发送指标&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 4.&lt;/strong&gt; 从单个 Prometheus 实例发送指标&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;接下来，为第 3 节中的 Prometheus 服务器创建一个令牌。首先为您的令牌命名；此示例使用&lt;code&gt;ch-to-prometheus-at-grafana&lt;/code&gt;：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1080px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/send-directly.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/send-directly.png”data-srcset =“/media/blog/altinity-cloud/send-directly.png？w = 320 320w，/media/blog/ altinity-cloud/send-directly.png?w=550 550w，/media/blog/altinity-cloud/send-directly.png?w=750 750w，/media/blog/altinity-cloud/send-directly.png？ w=900 900w，/media/blog/altinity-cloud/send-directly.png？w=1040 1040w，/media/blog/altinity-cloud/send-directly.png？w=1240 1240w，/media/blog/ altinity-cloud/send-directly.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;直接发送指标菜单&#34;&#xA;宽度=“1080”&#xA;高度=“717”&#xA;title=&#34;**图 5.** 为托管的 Prometheus 服务器定义令牌名称&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/altinity-cloud/send-直接.png&#34;&#xA;alt=&#34;发送指标直接菜单&#34;&#xA;宽度=“1080”&#xA;高度=“717”&#xA;title=&#34;**图 5.** 为托管的 Prometheus 服务器定义令牌名称&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 5.&lt;/strong&gt; 为托管 Prometheus 服务器定义令牌名称&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;定义令牌名称后，单击&lt;strong&gt;创建令牌&lt;/strong&gt;按钮。你会看到类似这样的内容：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：950px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/create-token.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/create-token.png”data-srcset =“/media/blog/altinity-cloud/create-token.png？w = 320 320w，/media/blog/ altinity-cloud/create-token.png?w=550 550w，/media/blog/altinity-cloud/create-token.png?w=750 750w，/media/blog/altinity-cloud/create-token.png？ w=900 900w，/media/blog/altinity-cloud/create-token.png？w=1040 1040w，/media/blog/altinity-cloud/create-token.png？w=1240 1240w，/media/blog/ altinity-cloud/create-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;更新配置菜单&#34;&#xA;宽度=“950”&#xA;高度=“875”&#xA;title=&#34;**图 6.** 为 Prometheus 服务器创建令牌&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/create-token.png”&#xA;alt=&#34;更新配置菜单&#34;&#xA;宽度=“950”&#xA;高度=“875”&#xA;title=&#34;**图 6.** 为 Prometheus 服务器创建令牌&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 6.&lt;/strong&gt; 为 Prometheus 服务器创建令牌&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;Grafana Cloud 生成应进入 Prometheus 配置的 YAML。幸运的是，ACM 可以轻松配置 Altinity.Cloud 环境和外部 Prometheus 服务器之间的连接。您可能已经猜到了，我们需要上面 YAML 代码段中的值：&lt;code&gt;basic_auth&lt;/code&gt; 部分中的 url 字段以及 &lt;code&gt;username&lt;/code&gt; 和 &lt;code&gt;password&lt;/code&gt; 字段。我们还需要新 Prometheus 服务器的 Grafana 数据源的名称。该数据源将命名为 &lt;code&gt;grafana-[accountname]-prom&lt;/code&gt;。在本例中，它是 &lt;code&gt;grafana-dougtidwell-prom&lt;/code&gt;。&lt;/p&gt;&#xA;&lt;p&gt;现在是时候配置 Altinity.Cloud 环境了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-connect-altinitycloud-to-the-remote-prometheus-service-in-grafana-cloud&#34;&gt;如何将 Altinity.Cloud 连接到 Grafana Cloud 中的远程 Prometheus 服务&lt;/h2&gt;&#xA;&lt;p&gt;要将 Altinity.Cloud 环境连接到外部 Prometheus 服务器，请转到 ACM 中的环境列表，单击垂直点图标，然后从菜单中选择&lt;strong&gt;编辑&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：407px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;class=&#34;灯箱链接标题&#34;&#xA;href=&#34;/media/blog/altinity-cloud/edit-environment.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/edit-environment.png”data-srcset =“/media/blog/altinity-cloud/edit-environment.png？w = 320 320w，/media/blog/ altinity-cloud/edit-environment.png?w=550 550w，/media/blog/altinity-cloud/edit-environment.png?w=750 750w，/media/blog/altinity-cloud/edit-environment.png？ w=900 900w，/media/blog/altinity-cloud/edit-environment.png？w=1040 1040w，/media/blog/altinity-cloud/edit-environment.png？w=1240 1240w，/media/blog/ altinity-cloud/edit-environment.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;编辑环境菜单&#34;&#xA;宽度=“407”&#xA;身高=“178”&#xA;title=&#34;**图 7.** 编辑环境菜单&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/altinity-cloud/edit-environment.png&#34;&#xA;alt=&#34;编辑环境菜单&#34;&#xA;宽度=“407”&#xA;身高=“178”&#xA;title=&#34;**图 7.** 编辑环境菜单&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 7.&lt;/strong&gt; 编辑环境菜单&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;在环境配置对话框中，转到&lt;strong&gt;指标&lt;/strong&gt;选项卡，并在&lt;strong&gt;外部 Prometheus&lt;/strong&gt; 部分填写外部 Prometheus 服务器的详细信息：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1081px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/external-prometheus.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/external-prometheus.png”data-srcset =“/media/blog/altinity-cloud/external-prometheus.png？w = 320 320w，/media/blog/ altinity-cloud/external-prometheus.png?w=550 550w，/media/blog/altinity-cloud/external-prometheus.png?w=750 750w，/media/blog/altinity-cloud/external-prometheus.png？ w=900 900w，/media/blog/altinity-cloud/external-prometheus.png？w=1040 1040w，/media/blog/altinity-cloud/external-prometheus.png？w=1240 1240w，/media/blog/ altinity-cloud/external-prometheus.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;环境配置菜单中的外部 Prometheus 条目&#34;&#xA;宽度=“1081”&#xA;高度=“998”&#xA;title=&#34;**图 8.** 在环境配置对话框的 **Metrics** 选项卡中配置外部 Prometheus 服务器”&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/external-prometheus.png”&#xA;alt=&#34;环境配置菜单中的外部 Prometheus 条目&#34;&#xA;宽度=“1081”&#xA;高度=“998”&#xA;title=&#34;**图 8.** 在环境配置对话框的 **Metrics** 选项卡中配置外部 Prometheus 服务器”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 8.&lt;/strong&gt; 在环境配置对话框的&lt;strong&gt;Metrics&lt;/strong&gt;选项卡中配置外部 Prometheus 服务器&lt;/figcaption &gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;点击&lt;strong&gt;确定&lt;/strong&gt;建立连接。 ACM 现在会将指标数据发送到外部 Prometheus 服务器。&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-use-grafana-cloud-to-visualize-prometheus-data&#34;&gt;如何使用 Grafana Cloud 可视化 Prometheus 数据&lt;/h2&gt;&#xA;&lt;p&gt;无论您的 Altinity.Cloud 环境中的指标正在发送到 Prometheus 服务器，还是 Prometheus 服务器正在从您的环境中抓取指标，我们都希望探索该数据。 Grafana Cloud 可以轻松做到这一点。我们只需要探索 Prometheus 数据源（本例中为 &lt;code&gt;grafana-dougtidwell-prom&lt;/code&gt;）。&lt;/p&gt;&#xA;&lt;p&gt;转到 Grafana 菜单，然后选择&lt;strong&gt;指标&lt;/strong&gt;菜单：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：484px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/metrics-menu.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/metrics-menu.png”data-srcset =“/media/blog/altinity-cloud/metrics-menu.png？w = 320 320w，/media/blog/ altinity-cloud/metrics-menu.png?w=550 550w，/media/blog/altinity-cloud/metrics-menu.png?w=750 750w，/media/blog/altinity-cloud/metrics-menu.png？ w=900 900w，/media/blog/altinity-cloud/metrics-menu.png？w=1040 1040w，/media/blog/altinity-cloud/metrics-menu.png？w=1240 1240w，/media/blog/ altinity-cloud/metrics-menu.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;指标菜单&#34;&#xA;宽度=“484”&#xA;高度=“447”&#xA;title=&#34;**图 9.** 指标菜单&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/metrics-menu.png”&#xA;alt=&#34;指标菜单&#34;&#xA;宽度=“484”&#xA;高度=“447”&#xA;title=&#34;**图 9.** 指标菜单&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 9.&lt;/strong&gt; 指标菜单&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;通过“指标”页面，您可以查看 Altinity.Cloud 环境中的指标，而无需编写 PromQL 查询。单击&lt;strong&gt;新指标探索&lt;/strong&gt;按钮以探索一组新指标。执行此操作后，您将看到所有 Prometheus 数据源的列表：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：369px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/data-source.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/data-source.png”data-srcset =“/media/blog/altinity-cloud/data-source.png？w = 320 320w，/media/blog/ altinity-cloud/data-source.png?w=550 550w，/media/blog/altinity-cloud/data-source.png?w=750 750w，/media/blog/altinity-cloud/data-source.png？ w=900 900w，/media/blog/altinity-cloud/data-source.png？w=1040 1040w，/media/blog/altinity-cloud/data-source.png？w=1240 1240w，/media/blog/ altinity-cloud/data-source.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;数据源下拉列表”&#xA;宽度=“369”&#xA;高度=“174”&#xA;title=&#34;**图 10.** 可用的 Prometheus 数据源&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/data-source.png”&#xA;alt=&#34;数据源下拉菜单&#34;&#xA;宽度=“369”&#xA;高度=“174”&#xA;title=&#34;**图 10.** 可用的 Prometheus 数据源&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 10.&lt;/strong&gt; 可用的 Prometheus 数据源&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;我们将选择&lt;code&gt;grafanacloud-dougtidwell-prom&lt;/code&gt;服务器，我们会看到一个充满有用指标的仪表板：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1084px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/metrics-no-labels.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/metrics-no-labels.png”data-srcset =“/media/blog/altinity-cloud/metrics-no-labels.png？w = 320 320w，/媒体/博客/altinity-cloud/metrics-no-labels.png？w=550 550w，/media/blog/altinity-cloud/metrics-no-labels.png？w=750 750w，/media/blog/altinity-云/metrics-no-labels.png?w=900 900w，/media/blog/altinity-cloud/metrics-no-labels.png?w=1040 1040w，/media/blog/altinity-cloud/metrics-no- labels.png?w=1240 1240w，/media/blog/altinity-cloud/metrics-no-labels.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;指标仪表板&#34;&#xA;宽度=“1084”&#xA;高度=“924”&#xA;title=&#34;**图 11.** 未指定标签的 Prometheus 指标&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/metrics-no-labels.png”&#xA;alt=&#34;指标仪表板&#34;&#xA;宽度=“1084”&#xA;高度=“924”&#xA;title=&#34;**图 11.** 未指定标签的 Prometheus 指标&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 11.&lt;/strong&gt; 未指定标签的 Prometheus 指标&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;初始显示包括诸如 &lt;code&gt;Apiserver_request_tota&lt;/code&gt;l 之类的指标，它是针对每个动词、HTTP 响应代码和其他类别细分的 apiserver 请求的计数器，以及 &lt;code&gt;Clickhouse_operator_pod_add_events&lt;/code&gt;，这是在 ClickHouse 的 Altinity Kubernetes Operator 运行时添加的 Kubernetes Pod 数量的计数器。&lt;/p&gt;&#xA;&lt;p&gt;每个可视化都标有指标本身的名称。将鼠标悬停在带圆圈的 i 上会显示有关特定图表的更多信息：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：571px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/counter-visualization.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/counter-visualization.png”data-srcset =“/media/blog/altinity-cloud/counter-visualization.png？w = 320 320w，/media/blog/ altinity-cloud/counter-visualization.png?w=550 550w, /媒体/博客/altinity-cloud/counter-visualization.png？w=750 750w，/media/blog/altinity-cloud/counter-visualization.png？w=900 900w，/media/blog/altinity-cloud/counter-可视化.png?w=1040 1040w，/media/blog/altinity-cloud/counter-visualization.png?w=1240 1240w，/media/blog/altinity-cloud/counter-visualization.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;可视化的简短说明&#34;&#xA;宽度=“571”&#xA;高度=“170”&#xA;title=&#34;**图 12.** 可视化的简短说明&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/counter-visualization.png”&#xA;alt=&#34;可视化的简短说明&#34;&#xA;宽度=“571”&#xA;高度=“170”&#xA;title=&#34;**图 12.** 可视化的简短说明&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 12.&lt;/strong&gt; 可视化的简短说明&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;发送到 Prometheus 服务器的每个指标都附加了一个或多个标签。我们可以通过选择一个或多个标签来过滤我们看到的内容。单击&lt;strong&gt;添加标签&lt;/strong&gt;按钮向查询添加标签。单击该按钮时，您将看到发送到此服务器的所有指标的标签下拉列表：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：352px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/label-list.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/label-list.png”data-srcset =“/media/blog/altinity-cloud/label-list.png？w = 320 320w，/media/blog/ altinity-cloud/label-list.png?w=550 550w，/media/blog/altinity-cloud/label-list.png?w=750 750w，/media/blog/altinity-cloud/label-list.png？ w=900 900w，/media/blog/altinity-cloud/label-list.png？w=1040 1040w，/media/blog/altinity-cloud/label-list.png？w=1240 1240w，/media/blog/ altinity-cloud/label-list.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;指标数据中的标签列表&#34;&#xA;宽度=“352”&#xA;高度=“372”&#xA;title=&#34;**图 13.** 指标数据中的标签列表&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/label-list.png”&#xA;alt=&#34;指标数据中的标签列表&#34;&#xA;宽度=“352”&#xA;高度=“372”&#xA;title=&#34;**图 13.** 指标数据中的标签列表&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 13.&lt;/strong&gt; 指标数据中的标签列表&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;选择标签后，您将获得该标签所有值的下拉列表：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：229px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/value-list.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src=&#34;/media/blog/altinity-cloud/value-list.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/value-list.png?w=320 320w，/media/blog/altinity-cloud/value-list.png?w=550 550w，/media/blog/altinity-cloud/value-list.png?w= 750 750w，/media/blog/altinity-cloud/value-list.png?w=900 900w，/media/blog/altinity-cloud/value-list.png?w=1040 1040w，/media/blog/altinity-云/value-list.png?w=1240 1240w，/media/blog/altinity-cloud/value-list.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;特定标签的值列表&#34;&#xA;宽度=“229”&#xA;高度=“174”&#xA;title=&#34;**图 14.** 特定标签的值列表&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/value-list.png”&#xA;alt=&#34;特定标签的值列表&#34;&#xA;宽度=“229”&#xA;高度=“174”&#xA;title=&#34;**图 14.** 特定标签的值列表&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 14.&lt;/strong&gt; 特定标签的值列表&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;（我们此处使用的 Altinity.Cloud 环境包含名为 &lt;code&gt;maddie-na&lt;/code&gt; 和 &lt;code&gt;testms&lt;/code&gt; 的 ClickHouse 集群。）&lt;/p&gt;&#xA;&lt;p&gt;页面经过过滤，仅显示用您选择的标签和值标记的数据的可视化。在此示例中，这意味着标签为 &lt;code&gt;clickhouse_altinity_com_chi&lt;/code&gt; 且值为 &lt;code&gt;maddie-na&lt;/code&gt; 的所有内容：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1070px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/limited-set.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src=&#34;/media/blog/altinity-cloud/limited-set.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/limited-set.png?w=320 320w，/media/blog/ altinity-cloud/limited-set.png?w=550 550w，/media/blog/altinity-cloud/limited-set.png?w=750 750w，/media/blog/altinity-cloud/limited-set.png？ w=900 900w，/media/blog/altinity-cloud/limited-set.png？w=1040 1040w，/media/blog/altinity-cloud/limited-set.png？w=1240 1240w，/media/blog/ altinity-cloud/limited-set.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;一组有限的可视化&#34;&#xA;宽度=“1070”&#xA;高度=“906”&#xA;title=&#34;**图 15.** 一组有限的可视化&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/altinity-cloud/limited-set.png&#34;&#xA;alt=&#34;一组有限的可视化&#34;&#xA;宽度=“1070”&#xA;高度=“906”&#xA;title=&#34;**图 15.** 一组有限的可视化&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 15.&lt;/strong&gt; 一组有限的可视化&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;现在我们已经成功创建了一个 Prometheus 服务器并将其连接到您的 ClickHouse 集群。现在我们将注意力转向洛基......&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-set-up-a-hosted-logs-service-in-grafana-cloud&#34;&gt;如何在 Grafana Cloud 中设置托管日志服务&lt;/h2&gt;&#xA;&lt;p&gt;指标对于了解系统的整体健康状况很有用，但是当我们需要深入挖掘时，我们需要日志。为此，我们将配置您的托管日志服务Grafana Cloud 中的 rver，由开源日志聚合工具 Grafana Loki 提供支持。首先，转到左上角的 Grafana 菜单，然后选择 &lt;strong&gt;Connections&lt;/strong&gt; 菜单，如上图 1 所示。&lt;/p&gt;&#xA;&lt;p&gt;在&lt;strong&gt;添加新连接&lt;/strong&gt;页面上，输入托管日志作为连接类型。您将看到 Hosted Loki 的图块：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：882px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/add-loki.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src=&#34;/media/blog/altinity-cloud/add-loki.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/add-loki.png?w=320 320w，/media/blog/ altinity-cloud/add-loki.png?w=550 550w，/media/blog/altinity-cloud/add-loki.png?w=750 750w，/media/blog/altinity-cloud/add-loki.png？ w=900 900w，/media/blog/altinity-cloud/add-loki.png？w=1040 1040w，/media/blog/altinity-cloud/add-loki.png？w=1240 1240w，/media/blog/ altinity-cloud/add-loki.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;托管 Loki 数据连接&#34;&#xA;宽度=“882”&#xA;高度=“614”&#xA;title=&#34;**图 16.** 托管 Loki 数据连接&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/altinity-cloud/add-loki.png&#34;&#xA;alt=&#34;托管 Loki 数据连接&#34;&#xA;宽度=“882”&#xA;高度=“614”&#xA;title=&#34;**图 16.** 托管 Loki 数据连接&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 16.&lt;/strong&gt; 托管 Loki 数据连接&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;点击&lt;strong&gt;托管日志&lt;/strong&gt;图块。在“托管日志”页面上，选择第 1 部分中的&lt;strong&gt;从独立主机发送日志&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1091px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/hosted-logs.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/hosted-logs.png”data-srcset =“/media/blog/altinity-cloud/hosted-logs.png？w = 320 320w，/media/blog/ altinity-cloud/hosted-logs.png?w=550 550w，/media/blog/altinity-cloud/hosted-logs.png?w=750 750w，/media/blog/altinity-cloud/hosted-logs.png？ w=900 900w，/media/blog/altinity-cloud/hosted-logs.png？w=1040 1040w，/media/blog/altinity-cloud/hosted-logs.png？w=1240 1240w，/media/blog/ altinity-cloud/hosted-logs.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;从独立主机发送日志&#34;&#xA;宽度=“1091”&#xA;高度=“412”&#xA;title=&#34;**图 17.** 从独立主机发送日志&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/hosted-logs.png”&#xA;alt=&#34;从独立主机发送日志&#34;&#xA;宽度=“1091”&#xA;高度=“412”&#xA;title=&#34;**图 17.** 从独立主机发送日志&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 17。&lt;/strong&gt;从独立主机发送日志&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;接下来，为第 2 部分中的 Loki 服务器创建一个令牌。首先，为您的令牌命名；此示例使用 &lt;code&gt;ch-to-loki-at-grafana&lt;/code&gt;：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：911px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/naming-token.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/naming-token.png”data-srcset =“/media/blog/altinity-cloud/naming-token.png？w = 320 320w，/media/blog/ altinity-cloud/naming-token.png?w=550 550w，/media/blog/altinity-cloud/naming-token.png?w=750 750w，/media/blog/altinity-cloud/naming-token.png？ w=900 900w，/media/blog/altinity-cloud/naming-token.png？w=1040 1040w，/media/blog/altinity-cloud/naming-token.png？w=1240 1240w，/media/blog/ altinity-cloud/naming-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;命名令牌&#34;&#xA;宽度=“911”&#xA;高度=“484”&#xA;title=&#34;**图 18.** 命名令牌&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/naming-token.png”&#xA;alt=&#34;命名令牌&#34;&#xA;宽度=“911”&#xA;高度=“484”&#xA;title=&#34;**图 18.** 命名令牌&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 18.&lt;/strong&gt; 命名令牌&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;定义令牌名称后，单击&lt;strong&gt;创建令牌&lt;/strong&gt;按钮。你会看到类似这样的内容：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：748px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/loki-token.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/loki-token.png”data-srcset =“/media/blog/altinity-cloud/loki-token.png？w = 320 320w，/media/blog/ altinity-cloud/loki-token.png?w=550 550w，/media/blog/altinity-cloud/loki-token.png?w=750 750w，/media/blog/altinity-cloud/loki-token.png？ w=900 900w，/media/blog/altinity-cloud/loki-token.png？w=1040 1040w，/media/blog/altinity-cloud/loki-token.png？w=1240 1240w，/media/blog/ altinity-cloud/loki-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;托管 Loki 服务器的令牌&#34;&#xA;宽度=“748”&#xA;高度=“871”&#xA;title=&#34;**图 19.** 托管 Loki 服务器的令牌&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/altinity-cloud/loki-token.png&#34;&#xA;alt=&#34;托管 Loki 服务器的令牌&#34;&#xA;宽度=“748”&#xA;高度=“871”&#xA;title=&#34;**图 19.** 托管 Loki 服务器的令牌&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 19.&lt;/strong&gt; 托管 Loki 服务器的令牌&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;通常使用外部 Loki 服务器需要使用 promtail 代理将本地 ClickHouse 日志发送到 Loki 服务器。在创造中获得新令牌后，Grafana 生成了一个 YAML 文件来配置 &lt;code&gt;promtail&lt;/code&gt;。幸运的是，&lt;code&gt;promtail&lt;/code&gt; 由 Altinity.Cloud 部署在 &lt;code&gt;altinity-cloud-system&lt;/code&gt; 命名空间中：&lt;/p&gt;&#xA;&lt;div class=&#34;code-snippet code-snippet__mini&#34;&gt;&lt;div class=&#34;lang-toolbar__mini&#34;&gt;&#xA;&lt;span class=&#34;code-clipboard&#34;&gt;&#xA;&lt;按钮 x-data=&#34;app_code_snippet()&#34; x-init=&#34;init()&#34; @click=&#34;copy()&#34;&gt;&#xA;&lt;img class=&#34;code-clipboard__icon&#34; src=&#34;/media/images/icons/icon-copy-small-2.svg&#34; alt=&#34;将代码复制到剪贴板&#34; width=&#34;14&#34; height=&#34;13&#34;&gt;&#xA;&lt;span&gt;复制&lt;/span&gt;&#xA;&lt;/按钮&gt;&#xA;&lt;/span&gt;&#xA;&lt;/div&gt;&lt;div class=&#34;code-snippet code-snippet__border&#34;&gt;&#xA;&lt;pre data-expanded=&#34;false&#34;&gt;&lt;code class=&#34;language-none&#34;&gt;kubectl get pods --namespace altinity-cloud-system | grep promtail&#xA;promtail-4kgcx 1/1 运行 0 2d4h&#xA;promtail-4lgb7 1/1 运行 0 100m&#xA;promtail-7wm8b 1/1 运行 0 3d22h&#xA;promtail-d2n5g 1/1 运行 0 3d21h&#xA;promtail-mj6qv 1/1 运行 0 3d22h&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;p&gt;我们需要从 YAML 文件中获取的一条信息是 URL 的值，如上图 19 中突出显示的那样。在“环境配置”对话框的“日志”选项卡的“外部 Loki URL”字段中输入该值。 （参见下面的图 20。）在 ACM 中定义 URL 后，&lt;code&gt;promtail&lt;/code&gt; 就会自动配置。&lt;/p&gt;&#xA;&lt;p&gt;现在是时候在 ACM 中配置外部 Loki 服务器了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-connect-altinitycloud-to-the-hosted-logs-service-in-grafana-cloud&#34;&gt;如何将 Altinity.Cloud 连接到 Grafana Cloud 中的托管日志服务&lt;/h2&gt;&#xA;&lt;p&gt;Loki 与 ClickHouse 集群的集成是在 ACM 的环境级别完成的。要将您的环境连接到外部 Loki 服务器，请转至 ACM 中的环境列表，单击垂直点图标，然后从菜单中选择“编辑”，如上面的图 7 所示。您将看到环境配置对话框；转到&lt;strong&gt;日志&lt;/strong&gt;选项卡：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1038px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/log-token.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/log-token.png”data-srcset =“/media/blog/altinity-cloud/log-token.png？w = 320 320w，/media/blog/ altinity-cloud/log-token.png?w=550 550w，/media/blog/altinity-cloud/log-token.png?w=750 750w，/media/blog/altinity-cloud/log-token.png？ w=900 900w，/media/blog/altinity-cloud/log-token.png？w=1040 1040w，/media/blog/altinity-cloud/log-token.png？w=1240 1240w，/media/blog/ altinity-cloud/log-token.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;环境配置对话框中的日志选项卡&#34;&#xA;宽度=“1038”&#xA;高度=“527”&#xA;title=&#34;**图 20.** 环境配置对话框中的日志选项卡&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/log-token.png”&#xA;alt=&#34;环境配置对话框中的日志选项卡&#34;&#xA;宽度=“1038”&#xA;高度=“527”&#xA;标题=“**图 20.** 环境配置对话框中的日志选项卡”&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 20.&lt;/strong&gt;“环境配置”对话框中的“日志”选项卡&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;在&lt;strong&gt;外部 Loki URL&lt;/strong&gt; 字段中，输入外部 Loki 服务器的 URL，格式为 &lt;code&gt;https://username:password@lokiurl.com/api/prom/push&lt;/代码&gt;. URL、用户名和密码来自上面 Grafana Cloud 生成的 YAML 文件。您需要将用户名和密码作为 URL 的一部分，并使用端点 &lt;code&gt;/api/prom/push&lt;/code&gt; 访问 Loki API。&lt;/p&gt;&#xA;&lt;p&gt;点击&lt;strong&gt;确定&lt;/strong&gt;保存您的设置。日志消息现在正在从 ClickHouse 集群发送到远程 Loki 服务器。&lt;/p&gt;&#xA;&lt;h2 id=&#34;how-to-use-grafana-cloud-to-visualize-log-data&#34;&gt;如何使用 Grafana Cloud 可视化日志数据&lt;/h2&gt;&#xA;&lt;p&gt;Loki 服务器设置完毕后，我们来看看 ACM 从 ClickHouse 集群发送的数据。转到左上角的 Grafana 菜单，然后单击&lt;strong&gt;数据源&lt;/strong&gt;菜单：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：395px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/data-source-menu.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/data-source-menu.png”data-srcset =“/media/blog/altinity-cloud/data-source-menu.png？w = 320 320w，/媒体/博客/altinity-cloud/data-source-menu.png？w=550 550w，/media/blog/altinity-cloud/data-source-menu.png？w=750 750w，/media/blog/altinity-云/data-source-menu.png?w=900 900w，/media/blog/altinity-cloud/data-source-menu.png?w=1040 1040w，/media/blog/altinity-cloud/data-source- menu.png?w=1240 1240w，/media/blog/altinity-cloud/data-source-menu.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;数据源菜单&#34;&#xA;宽度=“395”&#xA;高度=“767”&#xA;title=&#34;**图 21.** 数据源菜单&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/data-source-menu.png”&#xA;alt=&#34;数据源菜单&#34;&#xA;宽度=“395”&#xA;高度=“767”&#xA;title=&#34;**图 21.** 数据源菜单&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 21.&lt;/strong&gt; 数据源菜单&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;当数据源列表出现时，您将看到每个数据源的图块。其中一个或多个将带有洛基标志。我们要查找的名称将命名为 &lt;code&gt;grafanacloud-[accountname]-logs&lt;/code&gt;：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：854px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/loki-data-source.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;数据-src =“/媒体/博客/altinity-cloud/loki-data-source.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/loki-data-source.png?w=320 320w，/media/blog/altinity-cloud/loki -data-source.png?w=550 550w, /media/blog/altinity-cloud/loki-data-source.png?w=750 750w, /media/blog/altinity-cloud/loki-data-source.png ?w=900 900w, /media/blog/altinity-cloud/loki-data-source.png?w=1040 1040w, /media/blog/altinity-cloud/loki-data-source.png?w=1240 1240w, /media/blog/altinity-cloud/loki-data-source.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Loki 数据源的图块&#34;&#xA;宽度=“854”&#xA;高度=“86”&#xA;title=&#34;**图 22.** Loki 数据源的图块&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/altinity-cloud/loki-data-source.png&#34;&#xA;alt=&#34;Loki 数据源的图块&#34;&#xA;宽度=“854”&#xA;高度=“86”&#xA;title=&#34;**图 22.** Loki 数据源的图块&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 22.&lt;/strong&gt; Loki 数据源的图块&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;单击&lt;strong&gt;浏览&lt;/strong&gt;按钮打开数据源：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：947px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/loki-explorer.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/loki-explorer.png”data-srcset =“/media/blog/altinity-cloud/loki-explorer.png？w = 320 320w，/media/blog/ altinity-cloud/loki-explorer.png?w=550 550w，/media/blog/altinity-cloud/loki-explorer.png?w=750 750w，/media/blog/altinity-cloud/loki-explorer.png？ w=900 900w，/media/blog/altinity-cloud/loki-explorer.png？w=1040 1040w，/media/blog/altinity-cloud/loki-explorer.png？w=1240 1240w，/media/blog/ altinity-cloud/loki-explorer.png?w=1920 1920w&#34;&#xA;data-sizes=&#34;auto&#34;alt=&#34;Loki 数据源浏览器&#34;&#xA;宽度=“947”&#xA;高度=“405”&#xA;title=&#34;**图 23.** Loki 数据源浏览器&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src=&#34;/media/blog/altinity-cloud/loki-explorer.png&#34;&#xA;alt=&#34;Loki 数据源浏览器&#34;&#xA;宽度=“947”&#xA;高度=“405”&#xA;title=&#34;**图 23.** Loki 数据源浏览器&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 23.&lt;/strong&gt; Loki 数据源浏览器&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;Loki 中的日志消息由时间戳、一定数量的标签（名称/值对）和消息文本组成。单击&lt;strong&gt;标签浏览器&lt;/strong&gt;按钮查看 Loki 服务器上可用的标签：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：926px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/label-browser.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src=&#34;/media/blog/altinity-cloud/label-browser.png&#34;data-srcset=&#34;/media/blog/altinity-cloud/label-browser.png?w=320 320w, /media/blog/altinity-cloud/label-browser.png?w=550 550w, /media/blog/altinity-cloud/label-browser.png?w=750 750w、/media/blog/altinity-cloud/label-browser.png?w=900 900w、/media/blog/altinity-cloud/label-browser.png?w=1040 1040w、/media/blog/altinity-cloud /label-browser.png?w=1240 1240w, /media/blog/altinity-cloud/label-browser.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;标签浏览器&#34;&#xA;宽度=“926”&#xA;高度=“843”&#xA;title=&#34;**图 24.** 标签浏览器&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/label-browser.png”&#xA;alt=&#34;标签浏览器&#34;&#xA;宽度=“926”&#xA;高度=“843”&#xA;title=&#34;**图 24.** 标签浏览器&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 24.&lt;/strong&gt; 标签浏览器&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;这里我们选择了几个标签：&lt;code&gt;namespace&lt;/code&gt; 和 &lt;code&gt;pod&lt;/code&gt;。在第 1 部分中选择标签时，第 2 部分中的显示屏将显示每个标签的可用值。此外，当您在第 2 部分中选择特定值时，其他标签下的可用值也会发生变化。例如，单击标签命名空间下的值 &lt;code&gt;altinity-maddie-na&lt;/code&gt; 会删除 pod 标签下的所有值（&lt;code&gt;clickhouse-operator-7778d7cfb6-9q8m&lt;/code&gt;l 除外） 。选择这两个值会更改第 3 部分中的 LogQL 选择器以匹配：&lt;/p&gt;&#xA;&lt;div class=&#34;code-snippet code-snippet__mini&#34;&gt;&lt;div class=&#34;lang-toolbar__mini&#34;&gt;&#xA;&lt;span class=&#34;code-clipboard&#34;&gt;&#xA;&lt;按钮 x-data=&#34;app_code_snippet()&#34; x-init=&#34;init()&#34; @click=&#34;copy()&#34;&gt;&#xA;&lt;img class=&#34;code-clipboard__icon&#34; src=&#34;/media/images/icons/icon-copy-small-2.svg&#34; alt=&#34;将代码复制到剪贴板&#34; width=&#34;14&#34; height=&#34;13&#34;&gt;&#xA;&lt;span&gt;复制&lt;/span&gt;&#xA;&lt;/按钮&gt;&#xA;&lt;/span&gt;&#xA;&lt;/div&gt;&lt;div class=&#34;code-snippet code-snippet__border&#34;&gt;&#xA;&lt;pre data-expanded=&#34;false&#34;&gt;&lt;code class=&#34;language-none&#34;&gt;{namespace=&#34;altinity-maddie-na&#34;,pod=&#34;clickhouse-operator-7778d7cfb6-9q8ml&#34;}&lt;/code&gt;&lt;/pre &gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;p&gt;要查看与此选择器匹配的日志，请单击&lt;strong&gt;显示日志&lt;/strong&gt;按钮。您将看到来自 Loki 服务器的所有匹配消息：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：1145px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/show-logs.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/show-logs.png”data-srcset =“/media/blog/altinity-cloud/show-logs.png？w = 320 320w，/media/blog/ altinity-cloud/show-logs.png?w=550 550w，/media/blog/altinity-cloud/show-logs.png?w=750 750w，/media/blog/altinity-cloud/show-logs.png？ w=900 900w，/media/blog/altinity-cloud/show-logs.png？w=1040 1040w，/media/blog/altinity-cloud/show-logs.png？w=1240 1240w，/media/blog/ altinity-cloud/show-logs.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;与选择器匹配的日志条目&#34;&#xA;宽度=“1145”&#xA;高度=“649”&#xA;title=&#34;**图e 25.** 与选择器匹配的日志条目&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/show-logs.png”&#xA;alt=&#34;与选择器匹配的日志条目&#34;&#xA;宽度=“1145”&#xA;高度=“649”&#xA;title=&#34;**图25.**与选择器匹配的日志条目&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 25.&lt;/strong&gt; 与选择器匹配的日志条目&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;显示还包括随时间推移发出的日志消息数量的图表：&lt;/p&gt;&#xA;&lt;图&#xA;类=“图包装图包装__lightbox w-100p”&#xA;样式=“最大宽度：940px；”&#xA;itemprop =“关联媒体”&#xA;项目范围=“”&#xA;itemtype =“http://schema.org/ImageObject”&#xA;&gt;&#xA;&lt;一&#xA;类=“灯箱链接标题”&#xA;href=&#34;/media/blog/altinity-cloud/log-volume.png&#34;&#xA;itemprop=“内容网址”&#xA;&gt;&#xA;&lt;div class=&#34;img-wrapper w-100p h-auto&#34;&gt;&lt;img&#xA;类=“lazyload mb-0”&#xA;data-src =“/media/blog/altinity-cloud/log-volume.png”data-srcset =“/media/blog/altinity-cloud/log-volume.png？w = 320 320w，/media/blog/ altinity-cloud/log-volume.png?w=550 550w，/media/blog/altinity-cloud/log-volume.png?w=750 750w，/media/blog/altinity-cloud/log-volume.png？ w=900 900w，/media/blog/altinity-cloud/log-volume.png？w=1040 1040w，/media/blog/altinity-cloud/log-volume.png？w=1240 1240w，/media/blog/ altinity-cloud/log-volume.png?w=1920 1920w&#34;&#xA;data-size=&#34;auto&#34;alt=&#34;一段时间内日志条目的数量&#34;&#xA;宽度=“940”&#xA;身高=“173”&#xA;title=&#34;**图 26.** 随着时间的推移日志条目的数量&#34;&#xA;/&gt;&#xA;&lt;无脚本&gt;&#xA;&lt;图片&#xA;src =“/media/blog/altinity-cloud/log-volume.png”&#xA;alt=&#34;一段时间内日志条目的数量&#34;&#xA;宽度=“940”&#xA;身高=“173”&#xA;title=&#34;**图 26.** 随着时间的推移日志条目的数量&#34;&#xA;/&gt;&#xA;&lt;/noscript&gt;&lt;/div&gt;&#xA;&lt;figcaption class=&#34;w-100p title text-gray-13 &#34;&gt;&lt;strong&gt;图 26.&lt;/strong&gt; 随时间变化的日志条目量&lt;/figcaption&gt;&#xA;&lt;/a&gt;&#xA;&lt;/图&gt;&#xA;&lt;p&gt;现在我们已经在 Grafana Cloud 中配置了托管 Prometheus 服务器和托管 Loki 服务器，并且使用 ACM 将 ClickHouse 集群连接到相应的服务，以便我们可以在 Grafana 仪表板中可视化指标和日志。&lt; /p&gt;&#xA;&lt;h2 id=&#34;learn-more-about-grafana-cloud-and-altinity&#34;&gt;了解有关 Grafana Cloud 和 Altinity 的更多信息&lt;/h2&gt;&#xA;&lt;p&gt;Grafana Labs 遵循“大帐篷”理念，允许组织拥有自己的可观察性策略，可以自由选择自己的工具，并且能够将所有数据集中在一个视图中，无论数据位于何处。无论您使用内置开源工具设置监控 Altinity.Cloud，还是利用开箱即用的 &lt;a href=&#34;/blog/2023/05/30/how-to-start-monitoring-your -clickhouse-instance-or-cluster-with-grafana-cloud/?pg=blog&amp;plcmt=body-txt&#34;&gt;适用于您的 ClickHouse 集群的 Grafana Cloud 解决方案&lt;/a&gt;，您可以详细了解 Grafana Cloud 如何汇集所有数据在 &lt;a href=&#34;/blog/2023/05/30/how-to-start-monitoring-your-clickhouse-instance-or-cluster-with-grafana-cloud/?pg=blog&amp;plcmt=body- 中的一个平台中txt&#34;&gt;Grafana Cloud 文档&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;p&gt;随心所欲要运行 ClickHouse，&lt;strong&gt;Altinity&lt;/strong&gt; 可为您提供向应用程序添加低成本、开源实时分析所需的支持。我们的理念是开源是开发软件的优越方法，我们提倡在现代数据堆栈中采用开源。请参阅 &lt;a href=&#34;https://docs.altinity.com&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Altinity.Cloud 文档&lt;/a&gt;，了解将 ClickHouse 集群连接到 &lt;a href 的所有详细信息=&#34;https://docs.altinity.com/altinitycloud/administratorguide/integrations/grafana/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Grafana 云&lt;/a&gt;，&lt;a href=&#34;https://docs .altinity.com/altinitycloud/administratorguide/integrations/prometheus/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Prometheus&lt;/a&gt; 和 &lt;a href=&#34;https://docs.altinity.com/altinitycloud/ Administratorguide/integrations/loki/&#34; target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34;&gt;Loki&lt;/a&gt;。&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;&lt;a href=&#34;/products/cloud/?pg=blog&amp;plcmt=body-txt&#34;&gt;Grafana Cloud&lt;/a&gt;是开始使用指标、日志、跟踪、仪表板等的最简单方法。我们为每个用例提供慷慨的永久免费套餐和计划。 &lt;a href=&#34;/auth/sign-up/create-user/?pg=blog&amp;plcmt=body-txt&#34;&gt;立即免费注册！&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;</description>
      <pubDate>Thu, 19 Sep 2024 00:00:00 +0000</pubDate>
    </item>
  </channel>
</rss>